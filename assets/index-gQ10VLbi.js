var dd=u=>{throw TypeError(u)};var Cl=(u,t,n)=>t.has(u)||dd("Cannot "+n);var Zt=(u,t,n)=>(Cl(u,t,"read from private field"),n?n.call(u):t.get(u)),hn=(u,t,n)=>t.has(u)?dd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,n),Ne=(u,t,n,i)=>(Cl(u,t,"write to private field"),i?i.call(u,n):t.set(u,n),n),dn=(u,t,n)=>(Cl(u,t,"access private method"),n);var fd=(u,t,n,i)=>({set _(a){Ne(u,t,a,n)},get _(){return Zt(u,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function getDefaultExportFromCjs(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function getAugmentedNamespace(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var t=u.default;if(typeof t=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(u).forEach(function(i){var a=Object.getOwnPropertyDescriptor(u,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return u[i]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:u,type:i,key:l,ref:a!==void 0?a:null,props:o}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function y(S){return S===null||typeof S!="object"?null:(S=m&&S[m]||S["@@iterator"],typeof S=="function"?S:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,_={};function T(S,k,H){this.props=S,this.context=k,this.refs=_,this.updater=H||b}T.prototype.isReactComponent={},T.prototype.setState=function(S,k){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,k,"setState")},T.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function w(){}w.prototype=T.prototype;function N(S,k,H){this.props=S,this.context=k,this.refs=_,this.updater=H||b}var O=N.prototype=new w;O.constructor=N,A(O,T.prototype),O.isPureReactComponent=!0;var P=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function L(S,k,H,U,x,R){return H=R.ref,{$$typeof:u,type:S,key:k,ref:H!==void 0?H:null,props:R}}function X(S,k){return L(S.type,k,void 0,void 0,void 0,S.props)}function q(S){return typeof S=="object"&&S!==null&&S.$$typeof===u}function Q(S){var k={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(H){return k[H]})}var K=/\/+/g;function tt(S,k){return typeof S=="object"&&S!==null&&S.key!=null?Q(""+S.key):k.toString(36)}function gt(){}function ct(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(gt,gt):(S.status="pending",S.then(function(k){S.status==="pending"&&(S.status="fulfilled",S.value=k)},function(k){S.status==="pending"&&(S.status="rejected",S.reason=k)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function J(S,k,H,U,x){var R=typeof S;(R==="undefined"||R==="boolean")&&(S=null);var F=!1;if(S===null)F=!0;else switch(R){case"bigint":case"string":case"number":F=!0;break;case"object":switch(S.$$typeof){case u:case t:F=!0;break;case f:return F=S._init,J(F(S._payload),k,H,U,x)}}if(F)return x=x(S),F=U===""?"."+tt(S,0):U,P(x)?(H="",F!=null&&(H=F.replace(K,"$&/")+"/"),J(x,k,H,"",function(Y){return Y})):x!=null&&(q(x)&&(x=X(x,H+(x.key==null||S&&S.key===x.key?"":(""+x.key).replace(K,"$&/")+"/")+F)),k.push(x)),1;F=0;var G=U===""?".":U+":";if(P(S))for(var z=0;z<S.length;z++)U=S[z],R=G+tt(U,z),F+=J(U,k,H,R,x);else if(z=y(S),typeof z=="function")for(S=z.call(S),z=0;!(U=S.next()).done;)U=U.value,R=G+tt(U,z++),F+=J(U,k,H,R,x);else if(R==="object"){if(typeof S.then=="function")return J(ct(S),k,H,U,x);throw k=String(S),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return F}function I(S,k,H){if(S==null)return S;var U=[],x=0;return J(S,U,"","",function(R){return k.call(H,R,x++)}),U}function V(S){if(S._status===-1){var k=S._result;k=k(),k.then(function(H){(S._status===0||S._status===-1)&&(S._status=1,S._result=H)},function(H){(S._status===0||S._status===-1)&&(S._status=2,S._result=H)}),S._status===-1&&(S._status=0,S._result=k)}if(S._status===1)return S._result.default;throw S._result}var j=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function M(){}return react_production.Children={map:I,forEach:function(S,k,H){I(S,function(){k.apply(this,arguments)},H)},count:function(S){var k=0;return I(S,function(){k++}),k},toArray:function(S){return I(S,function(k){return k})||[]},only:function(S){if(!q(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},react_production.Component=T,react_production.Fragment=n,react_production.Profiler=a,react_production.PureComponent=N,react_production.StrictMode=i,react_production.Suspense=p,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(S){return E.H.useMemoCache(S)}},react_production.cache=function(S){return function(){return S.apply(null,arguments)}},react_production.cloneElement=function(S,k,H){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var U=A({},S.props),x=S.key,R=void 0;if(k!=null)for(F in k.ref!==void 0&&(R=void 0),k.key!==void 0&&(x=""+k.key),k)!C.call(k,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&k.ref===void 0||(U[F]=k[F]);var F=arguments.length-2;if(F===1)U.children=H;else if(1<F){for(var G=Array(F),z=0;z<F;z++)G[z]=arguments[z+2];U.children=G}return L(S.type,x,void 0,void 0,R,U)},react_production.createContext=function(S){return S={$$typeof:l,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:o,_context:S},S},react_production.createElement=function(S,k,H){var U,x={},R=null;if(k!=null)for(U in k.key!==void 0&&(R=""+k.key),k)C.call(k,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(x[U]=k[U]);var F=arguments.length-2;if(F===1)x.children=H;else if(1<F){for(var G=Array(F),z=0;z<F;z++)G[z]=arguments[z+2];x.children=G}if(S&&S.defaultProps)for(U in F=S.defaultProps,F)x[U]===void 0&&(x[U]=F[U]);return L(S,R,void 0,void 0,null,x)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(S){return{$$typeof:h,render:S}},react_production.isValidElement=q,react_production.lazy=function(S){return{$$typeof:f,_payload:{_status:-1,_result:S},_init:V}},react_production.memo=function(S,k){return{$$typeof:d,type:S,compare:k===void 0?null:k}},react_production.startTransition=function(S){var k=E.T,H={};E.T=H;try{var U=S(),x=E.S;x!==null&&x(H,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(M,j)}catch(R){j(R)}finally{E.T=k}},react_production.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},react_production.use=function(S){return E.H.use(S)},react_production.useActionState=function(S,k,H){return E.H.useActionState(S,k,H)},react_production.useCallback=function(S,k){return E.H.useCallback(S,k)},react_production.useContext=function(S){return E.H.useContext(S)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(S,k){return E.H.useDeferredValue(S,k)},react_production.useEffect=function(S,k,H){var U=E.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return U.useEffect(S,k)},react_production.useId=function(){return E.H.useId()},react_production.useImperativeHandle=function(S,k,H){return E.H.useImperativeHandle(S,k,H)},react_production.useInsertionEffect=function(S,k){return E.H.useInsertionEffect(S,k)},react_production.useLayoutEffect=function(S,k){return E.H.useLayoutEffect(S,k)},react_production.useMemo=function(S,k){return E.H.useMemo(S,k)},react_production.useOptimistic=function(S,k){return E.H.useOptimistic(S,k)},react_production.useReducer=function(S,k,H){return E.H.useReducer(S,k,H)},react_production.useRef=function(S){return E.H.useRef(S)},react_production.useState=function(S){return E.H.useState(S)},react_production.useSyncExternalStore=function(S,k,H){return E.H.useSyncExternalStore(S,k,H)},react_production.useTransition=function(){return E.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(u){function t(I,V){var j=I.length;I.push(V);t:for(;0<j;){var M=j-1>>>1,S=I[M];if(0<a(S,V))I[M]=V,I[j]=S,j=M;else break t}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var V=I[0],j=I.pop();if(j!==V){I[0]=j;t:for(var M=0,S=I.length,k=S>>>1;M<k;){var H=2*(M+1)-1,U=I[H],x=H+1,R=I[x];if(0>a(U,j))x<S&&0>a(R,U)?(I[M]=R,I[x]=j,M=x):(I[M]=U,I[H]=j,M=H);else if(x<S&&0>a(R,j))I[M]=R,I[x]=j,M=x;else break t}}return V}function a(I,V){var j=I.sortIndex-V.sortIndex;return j!==0?j:I.id-V.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;u.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();u.unstable_now=function(){return l.now()-h}}var p=[],d=[],f=1,m=null,y=3,b=!1,A=!1,_=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(I){for(var V=n(d);V!==null;){if(V.callback===null)i(d);else if(V.startTime<=I)i(d),V.sortIndex=V.expirationTime,t(p,V);else break;V=n(d)}}function E(I){if(_=!1,P(I),!A)if(n(p)!==null)A=!0,C||(C=!0,tt());else{var V=n(d);V!==null&&J(E,V.startTime-I)}}var C=!1,L=-1,X=5,q=-1;function Q(){return T?!0:!(u.unstable_now()-q<X)}function K(){if(T=!1,C){var I=u.unstable_now();q=I;var V=!0;try{t:{A=!1,_&&(_=!1,N(L),L=-1),b=!0;var j=y;try{e:{for(P(I),m=n(p);m!==null&&!(m.expirationTime>I&&Q());){var M=m.callback;if(typeof M=="function"){m.callback=null,y=m.priorityLevel;var S=M(m.expirationTime<=I);if(I=u.unstable_now(),typeof S=="function"){m.callback=S,P(I),V=!0;break e}m===n(p)&&i(p),P(I)}else i(p);m=n(p)}if(m!==null)V=!0;else{var k=n(d);k!==null&&J(E,k.startTime-I),V=!1}}break t}finally{m=null,y=j,b=!1}V=void 0}}finally{V?tt():C=!1}}}var tt;if(typeof O=="function")tt=function(){O(K)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,ct=gt.port2;gt.port1.onmessage=K,tt=function(){ct.postMessage(null)}}else tt=function(){w(K,0)};function J(I,V){L=w(function(){I(u.unstable_now())},V)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(I){I.callback=null},u.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<I?Math.floor(1e3/I):5},u.unstable_getCurrentPriorityLevel=function(){return y},u.unstable_next=function(I){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var j=y;y=V;try{return I()}finally{y=j}},u.unstable_requestPaint=function(){T=!0},u.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var j=y;y=I;try{return V()}finally{y=j}},u.unstable_scheduleCallback=function(I,V,j){var M=u.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?M+j:M):j=M,I){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=j+S,I={id:f++,callback:V,priorityLevel:I,startTime:j,expirationTime:S,sortIndex:-1},j>M?(I.sortIndex=j,t(d,I),n(p)===null&&I===n(d)&&(_?(N(L),L=-1):_=!0,J(E,j-M))):(I.sortIndex=S,t(p,I),A||b||(A=!0,C||(C=!0,tt()))),I},u.unstable_shouldYield=Q,u.unstable_wrapCallback=function(I){var V=y;return function(){var j=y;y=V;try{return I.apply(this,arguments)}finally{y=j}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var u=requireReact();function t(p){var d="https://react.dev/errors/"+p;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+p+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(p,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:p,containerInfo:d,implementation:f}}var l=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,d){if(p==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,reactDom_production.createPortal=function(p,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(p,d,null,f)},reactDom_production.flushSync=function(p){var d=l.T,f=i.p;try{if(l.T=null,i.p=2,p)return p()}finally{l.T=d,i.p=f,i.d.f()}},reactDom_production.preconnect=function(p,d){typeof p=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(p,d))},reactDom_production.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},reactDom_production.preinit=function(p,d){if(typeof p=="string"&&d&&typeof d.as=="string"){var f=d.as,m=h(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(p,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):f==="script"&&i.d.X(p,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},reactDom_production.preinitModule=function(p,d){if(typeof p=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=h(d.as,d.crossOrigin);i.d.M(p,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(p)},reactDom_production.preload=function(p,d){if(typeof p=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=h(f,d.crossOrigin);i.d.L(p,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},reactDom_production.preloadModule=function(p,d){if(typeof p=="string")if(d){var f=h(d.as,d.crossOrigin);i.d.m(p,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(p)},reactDom_production.requestFormReset=function(p){i.d.r(p)},reactDom_production.unstable_batchedUpdates=function(p,d){return p(d)},reactDom_production.useFormState=function(p,d,f){return l.H.useFormState(p,d,f)},reactDom_production.useFormStatus=function(){return l.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var u=requireScheduler(),t=requireReact(),n=requireReactDom();function i(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function l(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(i(188))}function p(e){var s=e.alternate;if(!s){if(s=o(e),s===null)throw Error(i(188));return s!==e?null:e}for(var r=e,c=s;;){var g=r.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===r)return h(g),e;if(v===c)return h(g),s;v=v.sibling}throw Error(i(188))}if(r.return!==c.return)r=g,c=v;else{for(var D=!1,B=g.child;B;){if(B===r){D=!0,r=g,c=v;break}if(B===c){D=!0,c=g,r=v;break}B=B.sibling}if(!D){for(B=v.child;B;){if(B===r){D=!0,r=v,c=g;break}if(B===c){D=!0,c=v,r=g;break}B=B.sibling}if(!D)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:s}function d(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=d(e),s!==null)return s;e=e.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function tt(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Symbol.for("react.client.reference");function ct(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===gt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case O:return(e.displayName||"Context")+".Provider";case N:return(e._context.displayName||"Context")+".Consumer";case P:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return s=e.displayName||null,s!==null?s:ct(e.type)||"Memo";case X:s=e._payload,e=e._init;try{return ct(e(s))}catch{}}return null}var J=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},M=[],S=-1;function k(e){return{current:e}}function H(e){0>S||(e.current=M[S],M[S]=null,S--)}function U(e,s){S++,M[S]=e.current,e.current=s}var x=k(null),R=k(null),F=k(null),G=k(null);function z(e,s){switch(U(F,s),U(R,e),U(x,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Bh(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Bh(s),e=Hh(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(x),U(x,e)}function Y(){H(x),H(R),H(F)}function $(e){e.memoizedState!==null&&U(G,e);var s=x.current,r=Hh(s,e.type);s!==r&&(U(R,e),U(x,r))}function at(e){R.current===e&&(H(x),H(R)),G.current===e&&(H(G),Js._currentValue=j)}var st=Object.prototype.hasOwnProperty,ot=u.unstable_scheduleCallback,bt=u.unstable_cancelCallback,dt=u.unstable_shouldYield,vt=u.unstable_requestPaint,At=u.unstable_now,St=u.unstable_getCurrentPriorityLevel,Tt=u.unstable_ImmediatePriority,_t=u.unstable_UserBlockingPriority,It=u.unstable_NormalPriority,zt=u.unstable_LowPriority,Pt=u.unstable_IdlePriority,te=u.log,we=u.unstable_setDisableYieldValue,ge=null,Gt=null;function xe(e){if(typeof te=="function"&&we(e),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ge,e)}catch{}}var jt=Math.clz32?Math.clz32:lt,ie=Math.log,yt=Math.LN2;function lt(e){return e>>>=0,e===0?32:31-(ie(e)/yt|0)|0}var nt=256,Et=4194304;function Ot(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function se(e,s,r){var c=e.pendingLanes;if(c===0)return 0;var g=0,v=e.suspendedLanes,D=e.pingedLanes;e=e.warmLanes;var B=c&134217727;return B!==0?(c=B&~v,c!==0?g=Ot(c):(D&=B,D!==0?g=Ot(D):r||(r=B&~e,r!==0&&(g=Ot(r))))):(B=c&~v,B!==0?g=Ot(B):D!==0?g=Ot(D):r||(r=c&~e,r!==0&&(g=Ot(r)))),g===0?0:s!==0&&s!==g&&(s&v)===0&&(v=g&-g,r=s&-s,v>=r||v===32&&(r&4194048)!==0)?s:g}function ee(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Pn(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fn(){var e=nt;return nt<<=1,(nt&4194048)===0&&(nt=256),e}function nn(){var e=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),e}function me(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function ze(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function sn(e,s,r,c,g,v){var D=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var B=e.entanglements,W=e.expirationTimes,rt=e.hiddenUpdates;for(r=D&~r;0<r;){var ft=31-jt(r),mt=1<<ft;B[ft]=0,W[ft]=-1;var ut=rt[ft];if(ut!==null)for(rt[ft]=null,ft=0;ft<ut.length;ft++){var ht=ut[ft];ht!==null&&(ht.lane&=-536870913)}r&=~mt}c!==0&&ni(e,c,0),v!==0&&g===0&&e.tag!==0&&(e.suspendedLanes|=v&~(D&~s))}function ni(e,s,r){e.pendingLanes|=s,e.suspendedLanes&=~s;var c=31-jt(s);e.entangledLanes|=s,e.entanglements[c]=e.entanglements[c]|1073741824|r&4194090}function oe(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var c=31-jt(r),g=1<<c;g&s|e[c]&s&&(e[c]|=s),r&=~g}}function On(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ei(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:rd(e.type))}function cs(e,s){var r=V.p;try{return V.p=e,s()}finally{V.p=r}}var Me=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Me,ue="__reactProps$"+Me,an="__reactContainer$"+Me,yr="__reactEvents$"+Me,md="__reactListeners$"+Me,bd="__reactHandles$"+Me,Rl="__reactResources$"+Me,us="__reactMarker$"+Me;function vr(e){delete e[Ht],delete e[ue],delete e[yr],delete e[md],delete e[bd]}function xi(e){var s=e[Ht];if(s)return s;for(var r=e.parentNode;r;){if(s=r[an]||r[Ht]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=Vh(e);e!==null;){if(r=e[Ht])return r;e=Vh(e)}return s}e=r,r=e.parentNode}return null}function Ti(e){if(e=e[Ht]||e[an]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function hs(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(i(33))}function wi(e){var s=e[Rl];return s||(s=e[Rl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function be(e){e[us]=!0}var Ml=new Set,Pl={};function ii(e,s){Ci(e,s),Ci(e+"Capture",s)}function Ci(e,s){for(Pl[e]=s,e=0;e<s.length;e++)Ml.add(s[e])}var yd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Dl={};function vd(e){return st.call(Dl,e)?!0:st.call(Ol,e)?!1:yd.test(e)?Dl[e]=!0:(Ol[e]=!0,!1)}function aa(e,s,r){if(vd(s))if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+r)}}function ra(e,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+r)}}function pn(e,s,r,c){if(c===null)e.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(s,r,""+c)}}var Ar,kl;function Ri(e){if(Ar===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Ar=s&&s[1]||"",kl=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ar+e+kl}var _r=!1;function Sr(e,s){if(!e||_r)return"";_r=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(ht){var ut=ht}Reflect.construct(e,[],mt)}else{try{mt.call()}catch(ht){ut=ht}e.call(mt.prototype)}}else{try{throw Error()}catch(ht){ut=ht}(mt=e())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(ht){if(ht&&ut&&typeof ht.stack=="string")return[ht.stack,ut.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),D=v[0],B=v[1];if(D&&B){var W=D.split(`
`),rt=B.split(`
`);for(g=c=0;c<W.length&&!W[c].includes("DetermineComponentFrameRoot");)c++;for(;g<rt.length&&!rt[g].includes("DetermineComponentFrameRoot");)g++;if(c===W.length||g===rt.length)for(c=W.length-1,g=rt.length-1;1<=c&&0<=g&&W[c]!==rt[g];)g--;for(;1<=c&&0<=g;c--,g--)if(W[c]!==rt[g]){if(c!==1||g!==1)do if(c--,g--,0>g||W[c]!==rt[g]){var ft=`
`+W[c].replace(" at new "," at ");return e.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",e.displayName)),ft}while(1<=c&&0<=g);break}}}finally{_r=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ri(r):""}function Ad(e){switch(e.tag){case 26:case 27:case 5:return Ri(e.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Sr(e.type,!1);case 11:return Sr(e.type.render,!1);case 1:return Sr(e.type,!0);case 31:return Ri("Activity");default:return""}}function Nl(e){try{var s="";do s+=Ad(e),e=e.return;while(e);return s}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Ge(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ll(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _d(e){var s=Ll(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),c=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var g=r.get,v=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return g.call(this)},set:function(D){c=""+D,v.call(this,D)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return c},setValue:function(D){c=""+D},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function oa(e){e._valueTracker||(e._valueTracker=_d(e))}function Fl(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return e&&(c=Ll(e)?e.checked?"true":"false":e.value),e=c,e!==r?(s.setValue(e),!0):!1}function la(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Sd=/[\n"\\]/g;function qe(e){return e.replace(Sd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Er(e,s,r,c,g,v,D,B){e.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.type=D:e.removeAttribute("type"),s!=null?D==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Ge(s)):e.value!==""+Ge(s)&&(e.value=""+Ge(s)):D!=="submit"&&D!=="reset"||e.removeAttribute("value"),s!=null?xr(e,D,Ge(s)):r!=null?xr(e,D,Ge(r)):c!=null&&e.removeAttribute("value"),g==null&&v!=null&&(e.defaultChecked=!!v),g!=null&&(e.checked=g&&typeof g!="function"&&typeof g!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.name=""+Ge(B):e.removeAttribute("name")}function Il(e,s,r,c,g,v,D,B){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.type=v),s!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;r=r!=null?""+Ge(r):"",s=s!=null?""+Ge(s):r,B||s===e.value||(e.value=s),e.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=B?e.checked:!!c,e.defaultChecked=!!c,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(e.name=D)}function xr(e,s,r){s==="number"&&la(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Mi(e,s,r,c){if(e=e.options,s){s={};for(var g=0;g<r.length;g++)s["$"+r[g]]=!0;for(r=0;r<e.length;r++)g=s.hasOwnProperty("$"+e[r].value),e[r].selected!==g&&(e[r].selected=g),g&&c&&(e[r].defaultSelected=!0)}else{for(r=""+Ge(r),s=null,g=0;g<e.length;g++){if(e[g].value===r){e[g].selected=!0,c&&(e[g].defaultSelected=!0);return}s!==null||e[g].disabled||(s=e[g])}s!==null&&(s.selected=!0)}}function jl(e,s,r){if(s!=null&&(s=""+Ge(s),s!==e.value&&(e.value=s),r==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=r!=null?""+Ge(r):""}function Ul(e,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(i(92));if(J(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=Ge(s),e.defaultValue=r,c=e.textContent,c===r&&c!==""&&c!==null&&(e.value=c)}function Pi(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var Ed=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(e,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":c?e.setProperty(s,r):typeof r!="number"||r===0||Ed.has(s)?s==="float"?e.cssFloat=r:e[s]=(""+r).trim():e[s]=r+"px"}function Hl(e,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(e=e.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&r[g]!==c&&Bl(e,g,c)}else for(var v in s)s.hasOwnProperty(v)&&Bl(e,v,s[v])}function Tr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Td=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(e){return Td.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wr=null;function Cr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oi=null,Di=null;function zl(e){var s=Ti(e);if(s&&(e=s.stateNode)){var r=e[ue]||null;t:switch(e=s.stateNode,s.type){case"input":if(Er(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+qe(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==e&&c.form===e.form){var g=c[ue]||null;if(!g)throw Error(i(90));Er(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===e.form&&Fl(c)}break t;case"textarea":jl(e,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&Mi(e,!!r.multiple,s,!1)}}}var Rr=!1;function Gl(e,s,r){if(Rr)return e(s,r);Rr=!0;try{var c=e(s);return c}finally{if(Rr=!1,(Oi!==null||Di!==null)&&(Ya(),Oi&&(s=Oi,e=Di,Di=Oi=null,zl(s),e)))for(s=0;s<e.length;s++)zl(e[s])}}function ds(e,s){var r=e.stateNode;if(r===null)return null;var c=r[ue]||null;if(c===null)return null;r=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mr=!1;if(gn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){Mr=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{Mr=!1}var kn=null,Pr=null,ua=null;function ql(){if(ua)return ua;var e,s=Pr,r=s.length,c,g="value"in kn?kn.value:kn.textContent,v=g.length;for(e=0;e<r&&s[e]===g[e];e++);var D=r-e;for(c=1;c<=D&&s[r-c]===g[v-c];c++);return ua=g.slice(e,1<c?1-c:void 0)}function ha(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function da(){return!0}function Vl(){return!1}function Pe(e){function s(r,c,g,v,D){this._reactName=r,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=D,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(r=e[B],this[B]=r?r(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?da:Vl,this.isPropagationStopped=Vl,this}return f(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),s}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=Pe(si),ps=f({},si,{view:0,detail:0}),wd=Pe(ps),Or,Dr,gs,pa=f({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gs&&(gs&&e.type==="mousemove"?(Or=e.screenX-gs.screenX,Dr=e.screenY-gs.screenY):Dr=Or=0,gs=e),Or)},movementY:function(e){return"movementY"in e?e.movementY:Dr}}),Xl=Pe(pa),Cd=f({},pa,{dataTransfer:0}),Rd=Pe(Cd),Md=f({},ps,{relatedTarget:0}),kr=Pe(Md),Pd=f({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=Pe(Pd),Dd=f({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kd=Pe(Dd),Nd=f({},si,{data:0}),$l=Pe(Nd),Ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Id[e])?!!s[e]:!1}function Nr(){return jd}var Ud=f({},ps,{key:function(e){if(e.key){var s=Ld[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=ha(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return e.type==="keypress"?ha(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ha(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bd=Pe(Ud),Hd=f({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yl=Pe(Hd),zd=f({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr}),Gd=Pe(zd),qd=f({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vd=Pe(qd),Xd=f({},pa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$d=Pe(Xd),Yd=f({},si,{newState:0,oldState:0}),Wd=Pe(Yd),Kd=[9,13,27,32],Lr=gn&&"CompositionEvent"in window,ms=null;gn&&"documentMode"in document&&(ms=document.documentMode);var Qd=gn&&"TextEvent"in window&&!ms,Wl=gn&&(!Lr||ms&&8<ms&&11>=ms),Kl=" ",Ql=!1;function Zl(e,s){switch(e){case"keyup":return Kd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ki=!1;function Zd(e,s){switch(e){case"compositionend":return Jl(s);case"keypress":return s.which!==32?null:(Ql=!0,Kl);case"textInput":return e=s.data,e===Kl&&Ql?null:e;default:return null}}function Jd(e,s){if(ki)return e==="compositionend"||!Lr&&Zl(e,s)?(e=ql(),ua=Pr=kn=null,ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Wl&&s.locale!=="ko"?null:s.data;default:return null}}var tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!tf[e.type]:s==="textarea"}function ec(e,s,r,c){Oi?Di?Di.push(c):Di=[c]:Oi=c,s=tr(s,"onChange"),0<s.length&&(r=new fa("onChange","change",null,r,c),e.push({event:r,listeners:s}))}var bs=null,ys=null;function ef(e){Lh(e,0)}function ga(e){var s=hs(e);if(Fl(s))return e}function nc(e,s){if(e==="change")return s}var ic=!1;if(gn){var Fr;if(gn){var Ir="oninput"in document;if(!Ir){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),Ir=typeof sc.oninput=="function"}Fr=Ir}else Fr=!1;ic=Fr&&(!document.documentMode||9<document.documentMode)}function ac(){bs&&(bs.detachEvent("onpropertychange",rc),ys=bs=null)}function rc(e){if(e.propertyName==="value"&&ga(ys)){var s=[];ec(s,ys,e,Cr(e)),Gl(ef,s)}}function nf(e,s,r){e==="focusin"?(ac(),bs=s,ys=r,bs.attachEvent("onpropertychange",rc)):e==="focusout"&&ac()}function sf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ga(ys)}function af(e,s){if(e==="click")return ga(s)}function rf(e,s){if(e==="input"||e==="change")return ga(s)}function of(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Le=typeof Object.is=="function"?Object.is:of;function vs(e,s){if(Le(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!st.call(s,g)||!Le(e[g],s[g]))return!1}return!0}function oc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lc(e,s){var r=oc(e);e=0;for(var c;r;){if(r.nodeType===3){if(c=e+r.textContent.length,e<=s&&c>=s)return{node:r,offset:s-e};e=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=oc(r)}}function cc(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?cc(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function uc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=la(e.document);s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=la(e.document)}return s}function jr(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var lf=gn&&"documentMode"in document&&11>=document.documentMode,Ni=null,Ur=null,As=null,Br=!1;function hc(e,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Br||Ni==null||Ni!==la(c)||(c=Ni,"selectionStart"in c&&jr(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),As&&vs(As,c)||(As=c,c=tr(Ur,"onSelect"),0<c.length&&(s=new fa("onSelect","select",null,s,r),e.push({event:s,listeners:c}),s.target=Ni)))}function ai(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Li={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},Hr={},dc={};gn&&(dc=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function ri(e){if(Hr[e])return Hr[e];if(!Li[e])return e;var s=Li[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in dc)return Hr[e]=s[r];return e}var fc=ri("animationend"),pc=ri("animationiteration"),gc=ri("animationstart"),cf=ri("transitionrun"),uf=ri("transitionstart"),hf=ri("transitioncancel"),mc=ri("transitionend"),bc=new Map,zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zr.push("scrollEnd");function Ze(e,s){bc.set(e,s),ii(s,[e])}var yc=new WeakMap;function Ve(e,s){if(typeof e=="object"&&e!==null){var r=yc.get(e);return r!==void 0?r:(s={value:e,source:s,stack:Nl(s)},yc.set(e,s),s)}return{value:e,source:s,stack:Nl(s)}}var Xe=[],Fi=0,Gr=0;function ma(){for(var e=Fi,s=Gr=Fi=0;s<e;){var r=Xe[s];Xe[s++]=null;var c=Xe[s];Xe[s++]=null;var g=Xe[s];Xe[s++]=null;var v=Xe[s];if(Xe[s++]=null,c!==null&&g!==null){var D=c.pending;D===null?g.next=g:(g.next=D.next,D.next=g),c.pending=g}v!==0&&vc(r,g,v)}}function ba(e,s,r,c){Xe[Fi++]=e,Xe[Fi++]=s,Xe[Fi++]=r,Xe[Fi++]=c,Gr|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function qr(e,s,r,c){return ba(e,s,r,c),ya(e)}function Ii(e,s){return ba(e,null,null,s),ya(e)}function vc(e,s,r){e.lanes|=r;var c=e.alternate;c!==null&&(c.lanes|=r);for(var g=!1,v=e.return;v!==null;)v.childLanes|=r,c=v.alternate,c!==null&&(c.childLanes|=r),v.tag===22&&(e=v.stateNode,e===null||e._visibility&1||(g=!0)),e=v,v=v.return;return e.tag===3?(v=e.stateNode,g&&s!==null&&(g=31-jt(r),e=v.hiddenUpdates,c=e[g],c===null?e[g]=[s]:c.push(s),s.lane=r|536870912),v):null}function ya(e){if(50<Vs)throw Vs=0,Qo=null,Error(i(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var ji={};function df(e,s,r,c){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(e,s,r,c){return new df(e,s,r,c)}function Vr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mn(e,s){var r=e.alternate;return r===null?(r=Fe(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ac(e,s){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,s=r.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function va(e,s,r,c,g,v){var D=0;if(c=e,typeof e=="function")Vr(e)&&(D=1);else if(typeof e=="string")D=pp(e,r,x.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case q:return e=Fe(31,r,s,g),e.elementType=q,e.lanes=v,e;case A:return oi(r.children,g,v,s);case _:D=8,g|=24;break;case T:return e=Fe(12,r,s,g|2),e.elementType=T,e.lanes=v,e;case E:return e=Fe(13,r,s,g),e.elementType=E,e.lanes=v,e;case C:return e=Fe(19,r,s,g),e.elementType=C,e.lanes=v,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w:case O:D=10;break t;case N:D=9;break t;case P:D=11;break t;case L:D=14;break t;case X:D=16,c=null;break t}D=29,r=Error(i(130,e===null?"null":typeof e,"")),c=null}return s=Fe(D,r,s,g),s.elementType=e,s.type=c,s.lanes=v,s}function oi(e,s,r,c){return e=Fe(7,e,c,s),e.lanes=r,e}function Xr(e,s,r){return e=Fe(6,e,null,s),e.lanes=r,e}function $r(e,s,r){return s=Fe(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Ui=[],Bi=0,Aa=null,_a=0,$e=[],Ye=0,li=null,bn=1,yn="";function ci(e,s){Ui[Bi++]=_a,Ui[Bi++]=Aa,Aa=e,_a=s}function _c(e,s,r){$e[Ye++]=bn,$e[Ye++]=yn,$e[Ye++]=li,li=e;var c=bn;e=yn;var g=32-jt(c)-1;c&=~(1<<g),r+=1;var v=32-jt(s)+g;if(30<v){var D=g-g%5;v=(c&(1<<D)-1).toString(32),c>>=D,g-=D,bn=1<<32-jt(s)+g|r<<g|c,yn=v+e}else bn=1<<v|r<<g|c,yn=e}function Yr(e){e.return!==null&&(ci(e,1),_c(e,1,0))}function Wr(e){for(;e===Aa;)Aa=Ui[--Bi],Ui[Bi]=null,_a=Ui[--Bi],Ui[Bi]=null;for(;e===li;)li=$e[--Ye],$e[Ye]=null,yn=$e[--Ye],$e[Ye]=null,bn=$e[--Ye],$e[Ye]=null}var Ce=null,ae=null,Bt=!1,ui=null,rn=!1,Kr=Error(i(519));function hi(e){var s=Error(i(418,""));throw Es(Ve(s,e)),Kr}function Sc(e){var s=e.stateNode,r=e.type,c=e.memoizedProps;switch(s[Ht]=e,s[ue]=c,r){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(r=0;r<$s.length;r++)Lt($s[r],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),Il(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),oa(s);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),Ul(s,c.value,c.defaultValue,c.children),oa(s)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||Uh(s.textContent,r)?(c.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),c.onScroll!=null&&Lt("scroll",s),c.onScrollEnd!=null&&Lt("scrollend",s),c.onClick!=null&&(s.onclick=er),s=!0):s=!1,s||hi(e)}function Ec(e){for(Ce=e.return;Ce;)switch(Ce.tag){case 5:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:Ce=Ce.return}}function _s(e){if(e!==Ce)return!1;if(!Bt)return Ec(e),Bt=!0,!1;var s=e.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||fl(e.type,e.memoizedProps)),r=!r),r&&ae&&hi(e),Ec(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(s===0){ae=tn(e.nextSibling);break t}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++;e=e.nextSibling}ae=null}}else s===27?(s=ae,Wn(e.type)?(e=bl,bl=null,ae=e):ae=s):ae=Ce?tn(e.stateNode.nextSibling):null;return!0}function Ss(){ae=Ce=null,Bt=!1}function xc(){var e=ui;return e!==null&&(ke===null?ke=e:ke.push.apply(ke,e),ui=null),e}function Es(e){ui===null?ui=[e]:ui.push(e)}var Qr=k(null),di=null,vn=null;function Nn(e,s,r){U(Qr,s._currentValue),s._currentValue=r}function An(e){e._currentValue=Qr.current,H(Qr)}function Zr(e,s,r){for(;e!==null;){var c=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),e===r)break;e=e.return}}function Jr(e,s,r,c){var g=e.child;for(g!==null&&(g.return=e);g!==null;){var v=g.dependencies;if(v!==null){var D=g.child;v=v.firstContext;t:for(;v!==null;){var B=v;v=g;for(var W=0;W<s.length;W++)if(B.context===s[W]){v.lanes|=r,B=v.alternate,B!==null&&(B.lanes|=r),Zr(v.return,r,e),c||(D=null);break t}v=B.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(i(341));D.lanes|=r,v=D.alternate,v!==null&&(v.lanes|=r),Zr(D,r,e),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===e){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function xs(e,s,r,c){e=null;for(var g=s,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var B=g.type;Le(g.pendingProps.value,D.value)||(e!==null?e.push(B):e=[B])}}else if(g===G.current){if(D=g.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(e!==null?e.push(Js):e=[Js])}g=g.return}e!==null&&Jr(s,e,r,c),s.flags|=262144}function Sa(e){for(e=e.firstContext;e!==null;){if(!Le(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fi(e){di=e,vn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Te(e){return Tc(di,e)}function Ea(e,s){return di===null&&fi(e),Tc(e,s)}function Tc(e,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},vn===null){if(e===null)throw Error(i(308));vn=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else vn=vn.next=s;return r}var ff=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(r,c){e.push(c)}};this.abort=function(){s.aborted=!0,e.forEach(function(r){return r()})}},pf=u.unstable_scheduleCallback,gf=u.unstable_NormalPriority,fe={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function to(){return{controller:new ff,data:new Map,refCount:0}}function Ts(e){e.refCount--,e.refCount===0&&pf(gf,function(){e.controller.abort()})}var ws=null,eo=0,Hi=0,zi=null;function mf(e,s){if(ws===null){var r=ws=[];eo=0,Hi=sl(),zi={status:"pending",value:void 0,then:function(c){r.push(c)}}}return eo++,s.then(wc,wc),s}function wc(){if(--eo===0&&ws!==null){zi!==null&&(zi.status="fulfilled");var e=ws;ws=null,Hi=0,zi=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function bf(e,s){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return e.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<r.length;g++)(0,r[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}var Cc=I.S;I.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&mf(e,s),Cc!==null&&Cc(e,s)};var pi=k(null);function no(){var e=pi.current;return e!==null?e:Kt.pooledCache}function xa(e,s){s===null?U(pi,pi.current):U(pi,s.pool)}function Rc(){var e=no();return e===null?null:{parent:fe._currentValue,pool:e}}var Cs=Error(i(460)),Mc=Error(i(474)),Ta=Error(i(542)),io={then:function(){}};function Pc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wa(){}function Oc(e,s,r){switch(r=e[r],r===void 0?e.push(s):r!==s&&(s.then(wa,wa),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,kc(e),e;default:if(typeof s.status=="string")s.then(wa,wa);else{if(e=Kt,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=s,e.status="pending",e.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,kc(e),e}throw Rs=s,Cs}}var Rs=null;function Dc(){if(Rs===null)throw Error(i(459));var e=Rs;return Rs=null,e}function kc(e){if(e===Cs||e===Ta)throw Error(i(483))}var Ln=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ao(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function In(e,s,r){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(qt&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=ya(e),vc(e,null,r),s}return ba(e,c,s,r),ya(e)}function Ms(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=e.pendingLanes,r|=c,s.lanes=r,oe(e,r)}}function ro(e,s){var r=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var D={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?g=v=D:v=v.next=D,r=r.next}while(r!==null);v===null?g=v=s:v=v.next=s}else g=v=s;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}var oo=!1;function Ps(){if(oo){var e=zi;if(e!==null)throw e}}function Os(e,s,r,c){oo=!1;var g=e.updateQueue;Ln=!1;var v=g.firstBaseUpdate,D=g.lastBaseUpdate,B=g.shared.pending;if(B!==null){g.shared.pending=null;var W=B,rt=W.next;W.next=null,D===null?v=rt:D.next=rt,D=W;var ft=e.alternate;ft!==null&&(ft=ft.updateQueue,B=ft.lastBaseUpdate,B!==D&&(B===null?ft.firstBaseUpdate=rt:B.next=rt,ft.lastBaseUpdate=W))}if(v!==null){var mt=g.baseState;D=0,ft=rt=W=null,B=v;do{var ut=B.lane&-536870913,ht=ut!==B.lane;if(ht?(Ft&ut)===ut:(c&ut)===ut){ut!==0&&ut===Hi&&(oo=!0),ft!==null&&(ft=ft.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var Mt=e,Ct=B;ut=s;var Yt=r;switch(Ct.tag){case 1:if(Mt=Ct.payload,typeof Mt=="function"){mt=Mt.call(Yt,mt,ut);break t}mt=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ct.payload,ut=typeof Mt=="function"?Mt.call(Yt,mt,ut):Mt,ut==null)break t;mt=f({},mt,ut);break t;case 2:Ln=!0}}ut=B.callback,ut!==null&&(e.flags|=64,ht&&(e.flags|=8192),ht=g.callbacks,ht===null?g.callbacks=[ut]:ht.push(ut))}else ht={lane:ut,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ft===null?(rt=ft=ht,W=mt):ft=ft.next=ht,D|=ut;if(B=B.next,B===null){if(B=g.shared.pending,B===null)break;ht=B,B=ht.next,ht.next=null,g.lastBaseUpdate=ht,g.shared.pending=null}}while(!0);ft===null&&(W=mt),g.baseState=W,g.firstBaseUpdate=rt,g.lastBaseUpdate=ft,v===null&&(g.shared.lanes=0),Vn|=D,e.lanes=D,e.memoizedState=mt}}function Nc(e,s){if(typeof e!="function")throw Error(i(191,e));e.call(s)}function Lc(e,s){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Nc(r[e],s)}var Gi=k(null),Ca=k(0);function Fc(e,s){e=Cn,U(Ca,e),U(Gi,s),Cn=e|s.baseLanes}function lo(){U(Ca,Cn),U(Gi,Gi.current)}function co(){Cn=Ca.current,H(Gi),H(Ca)}var jn=0,Dt=null,Xt=null,he=null,Ra=!1,qi=!1,gi=!1,Ma=0,Ds=0,Vi=null,yf=0;function le(){throw Error(i(321))}function uo(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!Le(e[r],s[r]))return!1;return!0}function ho(e,s,r,c,g,v){return jn=v,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,I.H=e===null||e.memoizedState===null?vu:Au,gi=!1,v=r(c,g),gi=!1,qi&&(v=jc(s,r,c,g)),Ic(e),v}function Ic(e){I.H=La;var s=Xt!==null&&Xt.next!==null;if(jn=0,he=Xt=Dt=null,Ra=!1,Ds=0,Vi=null,s)throw Error(i(300));e===null||ye||(e=e.dependencies,e!==null&&Sa(e)&&(ye=!0))}function jc(e,s,r,c){Dt=e;var g=0;do{if(qi&&(Vi=null),Ds=0,qi=!1,25<=g)throw Error(i(301));if(g+=1,he=Xt=null,e.updateQueue!=null){var v=e.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}I.H=Tf,v=s(r,c)}while(qi);return v}function vf(){var e=I.H,s=e.useState()[0];return s=typeof s.then=="function"?ks(s):s,e=e.useState()[0],(Xt!==null?Xt.memoizedState:null)!==e&&(Dt.flags|=1024),s}function fo(){var e=Ma!==0;return Ma=0,e}function po(e,s,r){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~r}function go(e){if(Ra){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Ra=!1}jn=0,he=Xt=Dt=null,qi=!1,Ds=Ma=0,Vi=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?Dt.memoizedState=he=e:he=he.next=e,he}function de(){if(Xt===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var s=he===null?Dt.memoizedState:he.next;if(s!==null)he=s,Xt=e;else{if(e===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},he===null?Dt.memoizedState=he=e:he=he.next=e}return he}function mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ks(e){var s=Ds;return Ds+=1,Vi===null&&(Vi=[]),e=Oc(Vi,e,s),s=Dt,(he===null?s.memoizedState:he.next)===null&&(s=s.alternate,I.H=s===null||s.memoizedState===null?vu:Au),e}function Pa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ks(e);if(e.$$typeof===O)return Te(e)}throw Error(i(438,String(e)))}function bo(e){var s=null,r=Dt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=Dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=mo(),Dt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(e),c=0;c<e;c++)r[c]=Q;return s.index++,r}function _n(e,s){return typeof s=="function"?s(e):s}function Oa(e){var s=de();return yo(s,Xt,e)}function yo(e,s,r){var c=e.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var g=e.baseQueue,v=c.pending;if(v!==null){if(g!==null){var D=g.next;g.next=v.next,v.next=D}s.baseQueue=g=v,c.pending=null}if(v=e.baseState,g===null)e.memoizedState=v;else{s=g.next;var B=D=null,W=null,rt=s,ft=!1;do{var mt=rt.lane&-536870913;if(mt!==rt.lane?(Ft&mt)===mt:(jn&mt)===mt){var ut=rt.revertLane;if(ut===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),mt===Hi&&(ft=!0);else if((jn&ut)===ut){rt=rt.next,ut===Hi&&(ft=!0);continue}else mt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},W===null?(B=W=mt,D=v):W=W.next=mt,Dt.lanes|=ut,Vn|=ut;mt=rt.action,gi&&r(v,mt),v=rt.hasEagerState?rt.eagerState:r(v,mt)}else ut={lane:mt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},W===null?(B=W=ut,D=v):W=W.next=ut,Dt.lanes|=mt,Vn|=mt;rt=rt.next}while(rt!==null&&rt!==s);if(W===null?D=v:W.next=B,!Le(v,e.memoizedState)&&(ye=!0,ft&&(r=zi,r!==null)))throw r;e.memoizedState=v,e.baseState=D,e.baseQueue=W,c.lastRenderedState=v}return g===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function vo(e){var s=de(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var c=r.dispatch,g=r.pending,v=s.memoizedState;if(g!==null){r.pending=null;var D=g=g.next;do v=e(v,D.action),D=D.next;while(D!==g);Le(v,s.memoizedState)||(ye=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),r.lastRenderedState=v}return[v,c]}function Uc(e,s,r){var c=Dt,g=de(),v=Bt;if(v){if(r===void 0)throw Error(i(407));r=r()}else r=s();var D=!Le((Xt||g).memoizedState,r);D&&(g.memoizedState=r,ye=!0),g=g.queue;var B=zc.bind(null,c,g,e);if(Ns(2048,8,B,[e]),g.getSnapshot!==s||D||he!==null&&he.memoizedState.tag&1){if(c.flags|=2048,Xi(9,Da(),Hc.bind(null,c,g,r,s),null),Kt===null)throw Error(i(349));v||(jn&124)!==0||Bc(c,s,r)}return r}function Bc(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Dt.updateQueue,s===null?(s=mo(),Dt.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function Hc(e,s,r,c){s.value=r,s.getSnapshot=c,Gc(s)&&qc(e)}function zc(e,s,r){return r(function(){Gc(s)&&qc(e)})}function Gc(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!Le(e,r)}catch{return!0}}function qc(e){var s=Ii(e,2);s!==null&&He(s,e,2)}function Ao(e){var s=Oe();if(typeof e=="function"){var r=e;if(e=r(),gi){xe(!0);try{r()}finally{xe(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:e},s}function Vc(e,s,r,c){return e.baseState=r,yo(e,Xt,typeof c=="function"?c:_n)}function Af(e,s,r,c,g){if(Na(e))throw Error(i(485));if(e=s.action,e!==null){var v={payload:g,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){v.listeners.push(D)}};I.T!==null?r(!0):v.isTransition=!1,c(v),r=s.pending,r===null?(v.next=s.pending=v,Xc(s,v)):(v.next=r.next,s.pending=r.next=v)}}function Xc(e,s){var r=s.action,c=s.payload,g=e.state;if(s.isTransition){var v=I.T,D={};I.T=D;try{var B=r(g,c),W=I.S;W!==null&&W(D,B),$c(e,s,B)}catch(rt){_o(e,s,rt)}finally{I.T=v}}else try{v=r(g,c),$c(e,s,v)}catch(rt){_o(e,s,rt)}}function $c(e,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Yc(e,s,c)},function(c){return _o(e,s,c)}):Yc(e,s,r)}function Yc(e,s,r){s.status="fulfilled",s.value=r,Wc(s),e.state=r,s=e.pending,s!==null&&(r=s.next,r===s?e.pending=null:(r=r.next,s.next=r,Xc(e,r)))}function _o(e,s,r){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,Wc(s),s=s.next;while(s!==c)}e.action=null}function Wc(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function Kc(e,s){return s}function Qc(e,s){if(Bt){var r=Kt.formState;if(r!==null){t:{var c=Dt;if(Bt){if(ae){e:{for(var g=ae,v=rn;g.nodeType!==8;){if(!v){g=null;break e}if(g=tn(g.nextSibling),g===null){g=null;break e}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){ae=tn(g.nextSibling),c=g.data==="F!";break t}}hi(c)}c=!1}c&&(s=r[0])}}return r=Oe(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:s},r.queue=c,r=mu.bind(null,Dt,c),c.dispatch=r,c=Ao(!1),v=wo.bind(null,Dt,!1,c.queue),c=Oe(),g={state:s,dispatch:null,action:e,pending:null},c.queue=g,r=Af.bind(null,Dt,g,v,r),g.dispatch=r,c.memoizedState=e,[s,r,!1]}function Zc(e){var s=de();return Jc(s,Xt,e)}function Jc(e,s,r){if(s=yo(e,s,Kc)[0],e=Oa(_n)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ks(s)}catch(D){throw D===Cs?Ta:D}else c=s;s=de();var g=s.queue,v=g.dispatch;return r!==s.memoizedState&&(Dt.flags|=2048,Xi(9,Da(),_f.bind(null,g,r),null)),[c,v,e]}function _f(e,s){e.action=s}function tu(e){var s=de(),r=Xt;if(r!==null)return Jc(s,r,e);de(),s=s.memoizedState,r=de();var c=r.queue.dispatch;return r.memoizedState=e,[s,c,!1]}function Xi(e,s,r,c){return e={tag:e,create:r,deps:c,inst:s,next:null},s=Dt.updateQueue,s===null&&(s=mo(),Dt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=e.next=e:(c=r.next,r.next=e,e.next=c,s.lastEffect=e),e}function Da(){return{destroy:void 0,resource:void 0}}function eu(){return de().memoizedState}function ka(e,s,r,c){var g=Oe();c=c===void 0?null:c,Dt.flags|=e,g.memoizedState=Xi(1|s,Da(),r,c)}function Ns(e,s,r,c){var g=de();c=c===void 0?null:c;var v=g.memoizedState.inst;Xt!==null&&c!==null&&uo(c,Xt.memoizedState.deps)?g.memoizedState=Xi(s,v,r,c):(Dt.flags|=e,g.memoizedState=Xi(1|s,v,r,c))}function nu(e,s){ka(8390656,8,e,s)}function iu(e,s){Ns(2048,8,e,s)}function su(e,s){return Ns(4,2,e,s)}function au(e,s){return Ns(4,4,e,s)}function ru(e,s){if(typeof s=="function"){e=e();var r=s(e);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function ou(e,s,r){r=r!=null?r.concat([e]):null,Ns(4,4,ru.bind(null,s,e),r)}function So(){}function lu(e,s){var r=de();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&uo(s,c[1])?c[0]:(r.memoizedState=[e,s],e)}function cu(e,s){var r=de();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&uo(s,c[1]))return c[0];if(c=e(),gi){xe(!0);try{e()}finally{xe(!1)}}return r.memoizedState=[c,s],c}function Eo(e,s,r){return r===void 0||(jn&1073741824)!==0?e.memoizedState=s:(e.memoizedState=r,e=dh(),Dt.lanes|=e,Vn|=e,r)}function uu(e,s,r,c){return Le(r,s)?r:Gi.current!==null?(e=Eo(e,r,c),Le(e,s)||(ye=!0),e):(jn&42)===0?(ye=!0,e.memoizedState=r):(e=dh(),Dt.lanes|=e,Vn|=e,s)}function hu(e,s,r,c,g){var v=V.p;V.p=v!==0&&8>v?v:8;var D=I.T,B={};I.T=B,wo(e,!1,s,r);try{var W=g(),rt=I.S;if(rt!==null&&rt(B,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ft=bf(W,c);Ls(e,s,ft,Be(e))}else Ls(e,s,c,Be(e))}catch(mt){Ls(e,s,{then:function(){},status:"rejected",reason:mt},Be())}finally{V.p=v,I.T=D}}function Sf(){}function xo(e,s,r,c){if(e.tag!==5)throw Error(i(476));var g=du(e).queue;hu(e,g,s,j,r===null?Sf:function(){return fu(e),r(c)})}function du(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:j},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:r},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function fu(e){var s=du(e).next.queue;Ls(e,s,{},Be())}function To(){return Te(Js)}function pu(){return de().memoizedState}function gu(){return de().memoizedState}function Ef(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var r=Be();e=Fn(r);var c=In(s,e,r);c!==null&&(He(c,s,r),Ms(c,s,r)),s={cache:to()},e.payload=s;return}s=s.return}}function xf(e,s,r){var c=Be();r={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Na(e)?bu(s,r):(r=qr(e,s,r,c),r!==null&&(He(r,e,c),yu(r,s,c)))}function mu(e,s,r){var c=Be();Ls(e,s,r,c)}function Ls(e,s,r,c){var g={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Na(e))bu(s,g);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var D=s.lastRenderedState,B=v(D,r);if(g.hasEagerState=!0,g.eagerState=B,Le(B,D))return ba(e,s,g,0),Kt===null&&ma(),!1}catch{}finally{}if(r=qr(e,s,g,c),r!==null)return He(r,e,c),yu(r,s,c),!0}return!1}function wo(e,s,r,c){if(c={lane:2,revertLane:sl(),action:c,hasEagerState:!1,eagerState:null,next:null},Na(e)){if(s)throw Error(i(479))}else s=qr(e,r,c,2),s!==null&&He(s,e,2)}function Na(e){var s=e.alternate;return e===Dt||s!==null&&s===Dt}function bu(e,s){qi=Ra=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function yu(e,s,r){if((r&4194048)!==0){var c=s.lanes;c&=e.pendingLanes,r|=c,s.lanes=r,oe(e,r)}}var La={readContext:Te,use:Pa,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le},vu={readContext:Te,use:Pa,useCallback:function(e,s){return Oe().memoizedState=[e,s===void 0?null:s],e},useContext:Te,useEffect:nu,useImperativeHandle:function(e,s,r){r=r!=null?r.concat([e]):null,ka(4194308,4,ru.bind(null,s,e),r)},useLayoutEffect:function(e,s){return ka(4194308,4,e,s)},useInsertionEffect:function(e,s){ka(4,2,e,s)},useMemo:function(e,s){var r=Oe();s=s===void 0?null:s;var c=e();if(gi){xe(!0);try{e()}finally{xe(!1)}}return r.memoizedState=[c,s],c},useReducer:function(e,s,r){var c=Oe();if(r!==void 0){var g=r(s);if(gi){xe(!0);try{r(s)}finally{xe(!1)}}}else g=s;return c.memoizedState=c.baseState=g,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},c.queue=e,e=e.dispatch=xf.bind(null,Dt,e),[c.memoizedState,e]},useRef:function(e){var s=Oe();return e={current:e},s.memoizedState=e},useState:function(e){e=Ao(e);var s=e.queue,r=mu.bind(null,Dt,s);return s.dispatch=r,[e.memoizedState,r]},useDebugValue:So,useDeferredValue:function(e,s){var r=Oe();return Eo(r,e,s)},useTransition:function(){var e=Ao(!1);return e=hu.bind(null,Dt,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,r){var c=Dt,g=Oe();if(Bt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Kt===null)throw Error(i(349));(Ft&124)!==0||Bc(c,s,r)}g.memoizedState=r;var v={value:r,getSnapshot:s};return g.queue=v,nu(zc.bind(null,c,v,e),[e]),c.flags|=2048,Xi(9,Da(),Hc.bind(null,c,v,r,s),null),r},useId:function(){var e=Oe(),s=Kt.identifierPrefix;if(Bt){var r=yn,c=bn;r=(c&~(1<<32-jt(c)-1)).toString(32)+r,s=""+s+"R"+r,r=Ma++,0<r&&(s+="H"+r.toString(32)),s+=""}else r=yf++,s=""+s+"r"+r.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:To,useFormState:Qc,useActionState:Qc,useOptimistic:function(e){var s=Oe();s.memoizedState=s.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=wo.bind(null,Dt,!0,r),r.dispatch=s,[e,s]},useMemoCache:bo,useCacheRefresh:function(){return Oe().memoizedState=Ef.bind(null,Dt)}},Au={readContext:Te,use:Pa,useCallback:lu,useContext:Te,useEffect:iu,useImperativeHandle:ou,useInsertionEffect:su,useLayoutEffect:au,useMemo:cu,useReducer:Oa,useRef:eu,useState:function(){return Oa(_n)},useDebugValue:So,useDeferredValue:function(e,s){var r=de();return uu(r,Xt.memoizedState,e,s)},useTransition:function(){var e=Oa(_n)[0],s=de().memoizedState;return[typeof e=="boolean"?e:ks(e),s]},useSyncExternalStore:Uc,useId:pu,useHostTransitionStatus:To,useFormState:Zc,useActionState:Zc,useOptimistic:function(e,s){var r=de();return Vc(r,Xt,e,s)},useMemoCache:bo,useCacheRefresh:gu},Tf={readContext:Te,use:Pa,useCallback:lu,useContext:Te,useEffect:iu,useImperativeHandle:ou,useInsertionEffect:su,useLayoutEffect:au,useMemo:cu,useReducer:vo,useRef:eu,useState:function(){return vo(_n)},useDebugValue:So,useDeferredValue:function(e,s){var r=de();return Xt===null?Eo(r,e,s):uu(r,Xt.memoizedState,e,s)},useTransition:function(){var e=vo(_n)[0],s=de().memoizedState;return[typeof e=="boolean"?e:ks(e),s]},useSyncExternalStore:Uc,useId:pu,useHostTransitionStatus:To,useFormState:tu,useActionState:tu,useOptimistic:function(e,s){var r=de();return Xt!==null?Vc(r,Xt,e,s):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:bo,useCacheRefresh:gu},$i=null,Fs=0;function Fa(e){var s=Fs;return Fs+=1,$i===null&&($i=[]),Oc($i,e,s)}function Is(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Ia(e,s){throw s.$$typeof===m?Error(i(525)):(e=Object.prototype.toString.call(s),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function _u(e){var s=e._init;return s(e._payload)}function Su(e){function s(et,Z){if(e){var it=et.deletions;it===null?(et.deletions=[Z],et.flags|=16):it.push(Z)}}function r(et,Z){if(!e)return null;for(;Z!==null;)s(et,Z),Z=Z.sibling;return null}function c(et){for(var Z=new Map;et!==null;)et.key!==null?Z.set(et.key,et):Z.set(et.index,et),et=et.sibling;return Z}function g(et,Z){return et=mn(et,Z),et.index=0,et.sibling=null,et}function v(et,Z,it){return et.index=it,e?(it=et.alternate,it!==null?(it=it.index,it<Z?(et.flags|=67108866,Z):it):(et.flags|=67108866,Z)):(et.flags|=1048576,Z)}function D(et){return e&&et.alternate===null&&(et.flags|=67108866),et}function B(et,Z,it,pt){return Z===null||Z.tag!==6?(Z=Xr(it,et.mode,pt),Z.return=et,Z):(Z=g(Z,it),Z.return=et,Z)}function W(et,Z,it,pt){var xt=it.type;return xt===A?ft(et,Z,it.props.children,pt,it.key):Z!==null&&(Z.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===X&&_u(xt)===Z.type)?(Z=g(Z,it.props),Is(Z,it),Z.return=et,Z):(Z=va(it.type,it.key,it.props,null,et.mode,pt),Is(Z,it),Z.return=et,Z)}function rt(et,Z,it,pt){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==it.containerInfo||Z.stateNode.implementation!==it.implementation?(Z=$r(it,et.mode,pt),Z.return=et,Z):(Z=g(Z,it.children||[]),Z.return=et,Z)}function ft(et,Z,it,pt,xt){return Z===null||Z.tag!==7?(Z=oi(it,et.mode,pt,xt),Z.return=et,Z):(Z=g(Z,it),Z.return=et,Z)}function mt(et,Z,it){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Xr(""+Z,et.mode,it),Z.return=et,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return it=va(Z.type,Z.key,Z.props,null,et.mode,it),Is(it,Z),it.return=et,it;case b:return Z=$r(Z,et.mode,it),Z.return=et,Z;case X:var pt=Z._init;return Z=pt(Z._payload),mt(et,Z,it)}if(J(Z)||tt(Z))return Z=oi(Z,et.mode,it,null),Z.return=et,Z;if(typeof Z.then=="function")return mt(et,Fa(Z),it);if(Z.$$typeof===O)return mt(et,Ea(et,Z),it);Ia(et,Z)}return null}function ut(et,Z,it,pt){var xt=Z!==null?Z.key:null;if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return xt!==null?null:B(et,Z,""+it,pt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case y:return it.key===xt?W(et,Z,it,pt):null;case b:return it.key===xt?rt(et,Z,it,pt):null;case X:return xt=it._init,it=xt(it._payload),ut(et,Z,it,pt)}if(J(it)||tt(it))return xt!==null?null:ft(et,Z,it,pt,null);if(typeof it.then=="function")return ut(et,Z,Fa(it),pt);if(it.$$typeof===O)return ut(et,Z,Ea(et,it),pt);Ia(et,it)}return null}function ht(et,Z,it,pt,xt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return et=et.get(it)||null,B(Z,et,""+pt,xt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case y:return et=et.get(pt.key===null?it:pt.key)||null,W(Z,et,pt,xt);case b:return et=et.get(pt.key===null?it:pt.key)||null,rt(Z,et,pt,xt);case X:var kt=pt._init;return pt=kt(pt._payload),ht(et,Z,it,pt,xt)}if(J(pt)||tt(pt))return et=et.get(it)||null,ft(Z,et,pt,xt,null);if(typeof pt.then=="function")return ht(et,Z,it,Fa(pt),xt);if(pt.$$typeof===O)return ht(et,Z,it,Ea(Z,pt),xt);Ia(Z,pt)}return null}function Mt(et,Z,it,pt){for(var xt=null,kt=null,wt=Z,Rt=Z=0,Ae=null;wt!==null&&Rt<it.length;Rt++){wt.index>Rt?(Ae=wt,wt=null):Ae=wt.sibling;var Ut=ut(et,wt,it[Rt],pt);if(Ut===null){wt===null&&(wt=Ae);break}e&&wt&&Ut.alternate===null&&s(et,wt),Z=v(Ut,Z,Rt),kt===null?xt=Ut:kt.sibling=Ut,kt=Ut,wt=Ae}if(Rt===it.length)return r(et,wt),Bt&&ci(et,Rt),xt;if(wt===null){for(;Rt<it.length;Rt++)wt=mt(et,it[Rt],pt),wt!==null&&(Z=v(wt,Z,Rt),kt===null?xt=wt:kt.sibling=wt,kt=wt);return Bt&&ci(et,Rt),xt}for(wt=c(wt);Rt<it.length;Rt++)Ae=ht(wt,et,Rt,it[Rt],pt),Ae!==null&&(e&&Ae.alternate!==null&&wt.delete(Ae.key===null?Rt:Ae.key),Z=v(Ae,Z,Rt),kt===null?xt=Ae:kt.sibling=Ae,kt=Ae);return e&&wt.forEach(function(ti){return s(et,ti)}),Bt&&ci(et,Rt),xt}function Ct(et,Z,it,pt){if(it==null)throw Error(i(151));for(var xt=null,kt=null,wt=Z,Rt=Z=0,Ae=null,Ut=it.next();wt!==null&&!Ut.done;Rt++,Ut=it.next()){wt.index>Rt?(Ae=wt,wt=null):Ae=wt.sibling;var ti=ut(et,wt,Ut.value,pt);if(ti===null){wt===null&&(wt=Ae);break}e&&wt&&ti.alternate===null&&s(et,wt),Z=v(ti,Z,Rt),kt===null?xt=ti:kt.sibling=ti,kt=ti,wt=Ae}if(Ut.done)return r(et,wt),Bt&&ci(et,Rt),xt;if(wt===null){for(;!Ut.done;Rt++,Ut=it.next())Ut=mt(et,Ut.value,pt),Ut!==null&&(Z=v(Ut,Z,Rt),kt===null?xt=Ut:kt.sibling=Ut,kt=Ut);return Bt&&ci(et,Rt),xt}for(wt=c(wt);!Ut.done;Rt++,Ut=it.next())Ut=ht(wt,et,Rt,Ut.value,pt),Ut!==null&&(e&&Ut.alternate!==null&&wt.delete(Ut.key===null?Rt:Ut.key),Z=v(Ut,Z,Rt),kt===null?xt=Ut:kt.sibling=Ut,kt=Ut);return e&&wt.forEach(function(wp){return s(et,wp)}),Bt&&ci(et,Rt),xt}function Yt(et,Z,it,pt){if(typeof it=="object"&&it!==null&&it.type===A&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case y:t:{for(var xt=it.key;Z!==null;){if(Z.key===xt){if(xt=it.type,xt===A){if(Z.tag===7){r(et,Z.sibling),pt=g(Z,it.props.children),pt.return=et,et=pt;break t}}else if(Z.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===X&&_u(xt)===Z.type){r(et,Z.sibling),pt=g(Z,it.props),Is(pt,it),pt.return=et,et=pt;break t}r(et,Z);break}else s(et,Z);Z=Z.sibling}it.type===A?(pt=oi(it.props.children,et.mode,pt,it.key),pt.return=et,et=pt):(pt=va(it.type,it.key,it.props,null,et.mode,pt),Is(pt,it),pt.return=et,et=pt)}return D(et);case b:t:{for(xt=it.key;Z!==null;){if(Z.key===xt)if(Z.tag===4&&Z.stateNode.containerInfo===it.containerInfo&&Z.stateNode.implementation===it.implementation){r(et,Z.sibling),pt=g(Z,it.children||[]),pt.return=et,et=pt;break t}else{r(et,Z);break}else s(et,Z);Z=Z.sibling}pt=$r(it,et.mode,pt),pt.return=et,et=pt}return D(et);case X:return xt=it._init,it=xt(it._payload),Yt(et,Z,it,pt)}if(J(it))return Mt(et,Z,it,pt);if(tt(it)){if(xt=tt(it),typeof xt!="function")throw Error(i(150));return it=xt.call(it),Ct(et,Z,it,pt)}if(typeof it.then=="function")return Yt(et,Z,Fa(it),pt);if(it.$$typeof===O)return Yt(et,Z,Ea(et,it),pt);Ia(et,it)}return typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint"?(it=""+it,Z!==null&&Z.tag===6?(r(et,Z.sibling),pt=g(Z,it),pt.return=et,et=pt):(r(et,Z),pt=Xr(it,et.mode,pt),pt.return=et,et=pt),D(et)):r(et,Z)}return function(et,Z,it,pt){try{Fs=0;var xt=Yt(et,Z,it,pt);return $i=null,xt}catch(wt){if(wt===Cs||wt===Ta)throw wt;var kt=Fe(29,wt,null,et.mode);return kt.lanes=pt,kt.return=et,kt}finally{}}}var Yi=Su(!0),Eu=Su(!1),We=k(null),on=null;function Un(e){var s=e.alternate;U(pe,pe.current&1),U(We,e),on===null&&(s===null||Gi.current!==null||s.memoizedState!==null)&&(on=e)}function xu(e){if(e.tag===22){if(U(pe,pe.current),U(We,e),on===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(on=e)}}else Bn()}function Bn(){U(pe,pe.current),U(We,We.current)}function Sn(e){H(We),on===e&&(on=null),H(pe)}var pe=k(0);function ja(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||ml(r)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Co(e,s,r,c){s=e.memoizedState,r=r(c,s),r=r==null?s:f({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ro={enqueueSetState:function(e,s,r){e=e._reactInternals;var c=Be(),g=Fn(c);g.payload=s,r!=null&&(g.callback=r),s=In(e,g,c),s!==null&&(He(s,e,c),Ms(s,e,c))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var c=Be(),g=Fn(c);g.tag=1,g.payload=s,r!=null&&(g.callback=r),s=In(e,g,c),s!==null&&(He(s,e,c),Ms(s,e,c))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=Be(),c=Fn(r);c.tag=2,s!=null&&(c.callback=s),s=In(e,c,r),s!==null&&(He(s,e,r),Ms(s,e,r))}};function Tu(e,s,r,c,g,v,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,v,D):s.prototype&&s.prototype.isPureReactComponent?!vs(r,c)||!vs(g,v):!0}function wu(e,s,r,c){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==e&&Ro.enqueueReplaceState(s,s.state,null)}function mi(e,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(e=e.defaultProps){r===s&&(r=f({},r));for(var g in e)r[g]===void 0&&(r[g]=e[g])}return r}var Ua=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Cu(e){Ua(e)}function Ru(e){console.error(e)}function Mu(e){Ua(e)}function Ba(e,s){try{var r=e.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Pu(e,s,r){try{var c=e.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Mo(e,s,r){return r=Fn(r),r.tag=3,r.payload={element:null},r.callback=function(){Ba(e,s)},r}function Ou(e){return e=Fn(e),e.tag=3,e}function Du(e,s,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;e.payload=function(){return g(v)},e.callback=function(){Pu(s,r,c)}}var D=r.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(e.callback=function(){Pu(s,r,c),typeof g!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var B=c.stack;this.componentDidCatch(c.value,{componentStack:B!==null?B:""})})}function wf(e,s,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&xs(s,r,g,!0),r=We.current,r!==null){switch(r.tag){case 13:return on===null?Jo():r.alternate===null&&re===0&&(re=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===io?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),el(e,c,g)),!1;case 22:return r.flags|=65536,c===io?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),el(e,c,g)),!1}throw Error(i(435,r.tag))}return el(e,c,g),Jo(),!1}if(Bt)return s=We.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==Kr&&(e=Error(i(422),{cause:c}),Es(Ve(e,r)))):(c!==Kr&&(s=Error(i(423),{cause:c}),Es(Ve(s,r))),e=e.current.alternate,e.flags|=65536,g&=-g,e.lanes|=g,c=Ve(c,r),g=Mo(e.stateNode,c,g),ro(e,g),re!==4&&(re=2)),!1;var v=Error(i(520),{cause:c});if(v=Ve(v,r),qs===null?qs=[v]:qs.push(v),re!==4&&(re=2),s===null)return!0;c=Ve(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,e=g&-g,r.lanes|=e,e=Mo(r.stateNode,c,e),ro(r,e),!1;case 1:if(s=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Xn===null||!Xn.has(v))))return r.flags|=65536,g&=-g,r.lanes|=g,g=Ou(g),Du(g,e,r,c),ro(r,g),!1}r=r.return}while(r!==null);return!1}var ku=Error(i(461)),ye=!1;function _e(e,s,r,c){s.child=e===null?Eu(s,null,r,c):Yi(s,e.child,r,c)}function Nu(e,s,r,c,g){r=r.render;var v=s.ref;if("ref"in c){var D={};for(var B in c)B!=="ref"&&(D[B]=c[B])}else D=c;return fi(s),c=ho(e,s,r,D,v,g),B=fo(),e!==null&&!ye?(po(e,s,g),En(e,s,g)):(Bt&&B&&Yr(s),s.flags|=1,_e(e,s,c,g),s.child)}function Lu(e,s,r,c,g){if(e===null){var v=r.type;return typeof v=="function"&&!Vr(v)&&v.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=v,Fu(e,s,v,c,g)):(e=va(r.type,null,c,s,s.mode,g),e.ref=s.ref,e.return=s,s.child=e)}if(v=e.child,!Io(e,g)){var D=v.memoizedProps;if(r=r.compare,r=r!==null?r:vs,r(D,c)&&e.ref===s.ref)return En(e,s,g)}return s.flags|=1,e=mn(v,c),e.ref=s.ref,e.return=s,s.child=e}function Fu(e,s,r,c,g){if(e!==null){var v=e.memoizedProps;if(vs(v,c)&&e.ref===s.ref)if(ye=!1,s.pendingProps=c=v,Io(e,g))(e.flags&131072)!==0&&(ye=!0);else return s.lanes=e.lanes,En(e,s,g)}return Po(e,s,r,c,g)}function Iu(e,s,r){var c=s.pendingProps,g=c.children,v=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=v!==null?v.baseLanes|r:r,e!==null){for(g=s.child=e.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;s.childLanes=v&~c}else s.childLanes=0,s.child=null;return ju(e,s,c,r)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&xa(s,v!==null?v.cachePool:null),v!==null?Fc(s,v):lo(),xu(s);else return s.lanes=s.childLanes=536870912,ju(e,s,v!==null?v.baseLanes|r:r,r)}else v!==null?(xa(s,v.cachePool),Fc(s,v),Bn(),s.memoizedState=null):(e!==null&&xa(s,null),lo(),Bn());return _e(e,s,g,r),s.child}function ju(e,s,r,c){var g=no();return g=g===null?null:{parent:fe._currentValue,pool:g},s.memoizedState={baseLanes:r,cachePool:g},e!==null&&xa(s,null),lo(),xu(s),e!==null&&xs(e,s,c,!0),null}function Ha(e,s){var r=s.ref;if(r===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(s.flags|=4194816)}}function Po(e,s,r,c,g){return fi(s),r=ho(e,s,r,c,void 0,g),c=fo(),e!==null&&!ye?(po(e,s,g),En(e,s,g)):(Bt&&c&&Yr(s),s.flags|=1,_e(e,s,r,g),s.child)}function Uu(e,s,r,c,g,v){return fi(s),s.updateQueue=null,r=jc(s,c,r,g),Ic(e),c=fo(),e!==null&&!ye?(po(e,s,v),En(e,s,v)):(Bt&&c&&Yr(s),s.flags|=1,_e(e,s,r,v),s.child)}function Bu(e,s,r,c,g){if(fi(s),s.stateNode===null){var v=ji,D=r.contextType;typeof D=="object"&&D!==null&&(v=Te(D)),v=new r(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ro,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},so(s),D=r.contextType,v.context=typeof D=="object"&&D!==null?Te(D):ji,v.state=s.memoizedState,D=r.getDerivedStateFromProps,typeof D=="function"&&(Co(s,r,D,c),v.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(D=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),D!==v.state&&Ro.enqueueReplaceState(v,v.state,null),Os(s,c,v,g),Ps(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(e===null){v=s.stateNode;var B=s.memoizedProps,W=mi(r,B);v.props=W;var rt=v.context,ft=r.contextType;D=ji,typeof ft=="object"&&ft!==null&&(D=Te(ft));var mt=r.getDerivedStateFromProps;ft=typeof mt=="function"||typeof v.getSnapshotBeforeUpdate=="function",B=s.pendingProps!==B,ft||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(B||rt!==D)&&wu(s,v,c,D),Ln=!1;var ut=s.memoizedState;v.state=ut,Os(s,c,v,g),Ps(),rt=s.memoizedState,B||ut!==rt||Ln?(typeof mt=="function"&&(Co(s,r,mt,c),rt=s.memoizedState),(W=Ln||Tu(s,r,W,c,ut,rt,D))?(ft||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=rt),v.props=c,v.state=rt,v.context=D,c=W):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,ao(e,s),D=s.memoizedProps,ft=mi(r,D),v.props=ft,mt=s.pendingProps,ut=v.context,rt=r.contextType,W=ji,typeof rt=="object"&&rt!==null&&(W=Te(rt)),B=r.getDerivedStateFromProps,(rt=typeof B=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D!==mt||ut!==W)&&wu(s,v,c,W),Ln=!1,ut=s.memoizedState,v.state=ut,Os(s,c,v,g),Ps();var ht=s.memoizedState;D!==mt||ut!==ht||Ln||e!==null&&e.dependencies!==null&&Sa(e.dependencies)?(typeof B=="function"&&(Co(s,r,B,c),ht=s.memoizedState),(ft=Ln||Tu(s,r,ft,c,ut,ht,W)||e!==null&&e.dependencies!==null&&Sa(e.dependencies))?(rt||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ht,W),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ht,W)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||D===e.memoizedProps&&ut===e.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&ut===e.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ht),v.props=c,v.state=ht,v.context=W,c=ft):(typeof v.componentDidUpdate!="function"||D===e.memoizedProps&&ut===e.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&ut===e.memoizedState||(s.flags|=1024),c=!1)}return v=c,Ha(e,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,e!==null&&c?(s.child=Yi(s,e.child,null,g),s.child=Yi(s,null,r,g)):_e(e,s,r,g),s.memoizedState=v.state,e=s.child):e=En(e,s,g),e}function Hu(e,s,r,c){return Ss(),s.flags|=256,_e(e,s,r,c),s.child}var Oo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Do(e){return{baseLanes:e,cachePool:Rc()}}function ko(e,s,r){return e=e!==null?e.childLanes&~r:0,s&&(e|=Ke),e}function zu(e,s,r){var c=s.pendingProps,g=!1,v=(s.flags&128)!==0,D;if((D=v)||(D=e!==null&&e.memoizedState===null?!1:(pe.current&2)!==0),D&&(g=!0,s.flags&=-129),D=(s.flags&32)!==0,s.flags&=-33,e===null){if(Bt){if(g?Un(s):Bn(),Bt){var B=ae,W;if(W=B){t:{for(W=B,B=rn;W.nodeType!==8;){if(!B){B=null;break t}if(W=tn(W.nextSibling),W===null){B=null;break t}}B=W}B!==null?(s.memoizedState={dehydrated:B,treeContext:li!==null?{id:bn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},W=Fe(18,null,null,0),W.stateNode=B,W.return=s,s.child=W,Ce=s,ae=null,W=!0):W=!1}W||hi(s)}if(B=s.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return ml(B)?s.lanes=32:s.lanes=536870912,null;Sn(s)}return B=c.children,c=c.fallback,g?(Bn(),g=s.mode,B=za({mode:"hidden",children:B},g),c=oi(c,g,r,null),B.return=s,c.return=s,B.sibling=c,s.child=B,g=s.child,g.memoizedState=Do(r),g.childLanes=ko(e,D,r),s.memoizedState=Oo,c):(Un(s),No(s,B))}if(W=e.memoizedState,W!==null&&(B=W.dehydrated,B!==null)){if(v)s.flags&256?(Un(s),s.flags&=-257,s=Lo(e,s,r)):s.memoizedState!==null?(Bn(),s.child=e.child,s.flags|=128,s=null):(Bn(),g=c.fallback,B=s.mode,c=za({mode:"visible",children:c.children},B),g=oi(g,B,r,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,Yi(s,e.child,null,r),c=s.child,c.memoizedState=Do(r),c.childLanes=ko(e,D,r),s.memoizedState=Oo,s=g);else if(Un(s),ml(B)){if(D=B.nextSibling&&B.nextSibling.dataset,D)var rt=D.dgst;D=rt,c=Error(i(419)),c.stack="",c.digest=D,Es({value:c,source:null,stack:null}),s=Lo(e,s,r)}else if(ye||xs(e,s,r,!1),D=(r&e.childLanes)!==0,ye||D){if(D=Kt,D!==null&&(c=r&-r,c=(c&42)!==0?1:On(c),c=(c&(D.suspendedLanes|r))!==0?0:c,c!==0&&c!==W.retryLane))throw W.retryLane=c,Ii(e,c),He(D,e,c),ku;B.data==="$?"||Jo(),s=Lo(e,s,r)}else B.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=W.treeContext,ae=tn(B.nextSibling),Ce=s,Bt=!0,ui=null,rn=!1,e!==null&&($e[Ye++]=bn,$e[Ye++]=yn,$e[Ye++]=li,bn=e.id,yn=e.overflow,li=s),s=No(s,c.children),s.flags|=4096);return s}return g?(Bn(),g=c.fallback,B=s.mode,W=e.child,rt=W.sibling,c=mn(W,{mode:"hidden",children:c.children}),c.subtreeFlags=W.subtreeFlags&65011712,rt!==null?g=mn(rt,g):(g=oi(g,B,r,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,B=e.child.memoizedState,B===null?B=Do(r):(W=B.cachePool,W!==null?(rt=fe._currentValue,W=W.parent!==rt?{parent:rt,pool:rt}:W):W=Rc(),B={baseLanes:B.baseLanes|r,cachePool:W}),g.memoizedState=B,g.childLanes=ko(e,D,r),s.memoizedState=Oo,c):(Un(s),r=e.child,e=r.sibling,r=mn(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,e!==null&&(D=s.deletions,D===null?(s.deletions=[e],s.flags|=16):D.push(e)),s.child=r,s.memoizedState=null,r)}function No(e,s){return s=za({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function za(e,s){return e=Fe(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lo(e,s,r){return Yi(s,e.child,null,r),e=No(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Gu(e,s,r){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s),Zr(e.return,s,r)}function Fo(e,s,r,c,g){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=g)}function qu(e,s,r){var c=s.pendingProps,g=c.revealOrder,v=c.tail;if(_e(e,s,c.children,r),c=pe.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gu(e,r,s);else if(e.tag===19)Gu(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(U(pe,c),g){case"forwards":for(r=s.child,g=null;r!==null;)e=r.alternate,e!==null&&ja(e)===null&&(g=r),r=r.sibling;r=g,r===null?(g=s.child,s.child=null):(g=r.sibling,r.sibling=null),Fo(s,!1,g,r,v);break;case"backwards":for(r=null,g=s.child,s.child=null;g!==null;){if(e=g.alternate,e!==null&&ja(e)===null){s.child=g;break}e=g.sibling,g.sibling=r,r=g,g=e}Fo(s,!0,r,null,v);break;case"together":Fo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function En(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),Vn|=s.lanes,(r&s.childLanes)===0)if(e!==null){if(xs(e,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(i(153));if(s.child!==null){for(e=s.child,r=mn(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=mn(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function Io(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Sa(e)))}function Cf(e,s,r){switch(s.tag){case 3:z(s,s.stateNode.containerInfo),Nn(s,fe,e.memoizedState.cache),Ss();break;case 27:case 5:$(s);break;case 4:z(s,s.stateNode.containerInfo);break;case 10:Nn(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Un(s),s.flags|=128,null):(r&s.child.childLanes)!==0?zu(e,s,r):(Un(s),e=En(e,s,r),e!==null?e.sibling:null);Un(s);break;case 19:var g=(e.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(xs(e,s,r,!1),c=(r&s.childLanes)!==0),g){if(c)return qu(e,s,r);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),U(pe,pe.current),c)break;return null;case 22:case 23:return s.lanes=0,Iu(e,s,r);case 24:Nn(s,fe,e.memoizedState.cache)}return En(e,s,r)}function Vu(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps)ye=!0;else{if(!Io(e,r)&&(s.flags&128)===0)return ye=!1,Cf(e,s,r);ye=(e.flags&131072)!==0}else ye=!1,Bt&&(s.flags&1048576)!==0&&_c(s,_a,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var c=s.elementType,g=c._init;if(c=g(c._payload),s.type=c,typeof c=="function")Vr(c)?(e=mi(c,e),s.tag=1,s=Bu(null,s,c,e,r)):(s.tag=0,s=Po(null,s,c,e,r));else{if(c!=null){if(g=c.$$typeof,g===P){s.tag=11,s=Nu(null,s,c,e,r);break t}else if(g===L){s.tag=14,s=Lu(null,s,c,e,r);break t}}throw s=ct(c)||c,Error(i(306,s,""))}}return s;case 0:return Po(e,s,s.type,s.pendingProps,r);case 1:return c=s.type,g=mi(c,s.pendingProps),Bu(e,s,c,g,r);case 3:t:{if(z(s,s.stateNode.containerInfo),e===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;g=v.element,ao(e,s),Os(s,c,null,r);var D=s.memoizedState;if(c=D.cache,Nn(s,fe,c),c!==v.cache&&Jr(s,[fe],r,!0),Ps(),c=D.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:D.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Hu(e,s,c,r);break t}else if(c!==g){g=Ve(Error(i(424)),s),Es(g),s=Hu(e,s,c,r);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ae=tn(e.firstChild),Ce=s,Bt=!0,ui=null,rn=!0,r=Eu(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ss(),c===g){s=En(e,s,r);break t}_e(e,s,c,r)}s=s.child}return s;case 26:return Ha(e,s),e===null?(r=Wh(s.type,null,s.pendingProps,null))?s.memoizedState=r:Bt||(r=s.type,e=s.pendingProps,c=nr(F.current).createElement(r),c[Ht]=s,c[ue]=e,Ee(c,r,e),be(c),s.stateNode=c):s.memoizedState=Wh(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return $(s),e===null&&Bt&&(c=s.stateNode=Xh(s.type,s.pendingProps,F.current),Ce=s,rn=!0,g=ae,Wn(s.type)?(bl=g,ae=tn(c.firstChild)):ae=g),_e(e,s,s.pendingProps.children,r),Ha(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Bt&&((g=c=ae)&&(c=ep(c,s.type,s.pendingProps,rn),c!==null?(s.stateNode=c,Ce=s,ae=tn(c.firstChild),rn=!1,g=!0):g=!1),g||hi(s)),$(s),g=s.type,v=s.pendingProps,D=e!==null?e.memoizedProps:null,c=v.children,fl(g,v)?c=null:D!==null&&fl(g,D)&&(s.flags|=32),s.memoizedState!==null&&(g=ho(e,s,vf,null,null,r),Js._currentValue=g),Ha(e,s),_e(e,s,c,r),s.child;case 6:return e===null&&Bt&&((e=r=ae)&&(r=np(r,s.pendingProps,rn),r!==null?(s.stateNode=r,Ce=s,ae=null,e=!0):e=!1),e||hi(s)),null;case 13:return zu(e,s,r);case 4:return z(s,s.stateNode.containerInfo),c=s.pendingProps,e===null?s.child=Yi(s,null,c,r):_e(e,s,c,r),s.child;case 11:return Nu(e,s,s.type,s.pendingProps,r);case 7:return _e(e,s,s.pendingProps,r),s.child;case 8:return _e(e,s,s.pendingProps.children,r),s.child;case 12:return _e(e,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,Nn(s,s.type,c.value),_e(e,s,c.children,r),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,fi(s),g=Te(g),c=c(g),s.flags|=1,_e(e,s,c,r),s.child;case 14:return Lu(e,s,s.type,s.pendingProps,r);case 15:return Fu(e,s,s.type,s.pendingProps,r);case 19:return qu(e,s,r);case 31:return c=s.pendingProps,r=s.mode,c={mode:c.mode,children:c.children},e===null?(r=za(c,r),r.ref=s.ref,s.child=r,r.return=s,s=r):(r=mn(e.child,c),r.ref=s.ref,s.child=r,r.return=s,s=r),s;case 22:return Iu(e,s,r);case 24:return fi(s),c=Te(fe),e===null?(g=no(),g===null&&(g=Kt,v=to(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=r),g=v),s.memoizedState={parent:c,cache:g},so(s),Nn(s,fe,g)):((e.lanes&r)!==0&&(ao(e,s),Os(s,null,null,r),Ps()),g=e.memoizedState,v=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Nn(s,fe,c)):(c=v.cache,Nn(s,fe,c),c!==g.cache&&Jr(s,[fe],r,!0))),_e(e,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function xn(e){e.flags|=4}function Xu(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!td(s)){if(s=We.current,s!==null&&((Ft&4194048)===Ft?on!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||s!==on))throw Rs=io,Mc;e.flags|=8192}}function Ga(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?nn():536870912,e.lanes|=s,Zi|=s)}function js(e,s){if(!Bt)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function ne(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,c=0;if(s)for(var g=e.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=e,g=g.sibling;else for(g=e.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=c,e.childLanes=r,s}function Rf(e,s,r){var c=s.pendingProps;switch(Wr(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ne(s),null;case 1:return ne(s),null;case 3:return r=s.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),An(fe),Y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(_s(s)?xn(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xc())),ne(s),null;case 26:return r=s.memoizedState,e===null?(xn(s),r!==null?(ne(s),Xu(s,r)):(ne(s),s.flags&=-16777217)):r?r!==e.memoizedState?(xn(s),ne(s),Xu(s,r)):(ne(s),s.flags&=-16777217):(e.memoizedProps!==c&&xn(s),ne(s),s.flags&=-16777217),null;case 27:at(s),r=F.current;var g=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==c&&xn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ne(s),null}e=x.current,_s(s)?Sc(s):(e=Xh(g,c,r),s.stateNode=e,xn(s))}return ne(s),null;case 5:if(at(s),r=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==c&&xn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ne(s),null}if(e=x.current,_s(s))Sc(s);else{switch(g=nr(F.current),e){case 1:e=g.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=g.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?g.createElement(r,{is:c.is}):g.createElement(r)}}e[Ht]=s,e[ue]=c;t:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)e.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break t;for(;g.sibling===null;){if(g.return===null||g.return===s)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=e;t:switch(Ee(e,r,c),r){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&xn(s)}}return ne(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==c&&xn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(e=F.current,_s(s)){if(e=s.stateNode,r=s.memoizedProps,c=null,g=Ce,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}e[Ht]=s,e=!!(e.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Uh(e.nodeValue,r)),e||hi(s)}else e=nr(e).createTextNode(c),e[Ht]=s,s.stateNode=e}return ne(s),null;case 13:if(c=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(g=_s(s),c!==null&&c.dehydrated!==null){if(e===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ht]=s}else Ss(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ne(s),g=!1}else g=xc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Sn(s),s):(Sn(s),null)}if(Sn(s),(s.flags&128)!==0)return s.lanes=r,s;if(r=c!==null,e=e!==null&&e.memoizedState!==null,r){c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var v=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)}return r!==e&&r&&(s.child.flags|=8192),Ga(s,s.updateQueue),ne(s),null;case 4:return Y(),e===null&&ll(s.stateNode.containerInfo),ne(s),null;case 10:return An(s.type),ne(s),null;case 19:if(H(pe),g=s.memoizedState,g===null)return ne(s),null;if(c=(s.flags&128)!==0,v=g.rendering,v===null)if(c)js(g,!1);else{if(re!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(v=ja(e),v!==null){for(s.flags|=128,js(g,!1),e=v.updateQueue,s.updateQueue=e,Ga(s,e),s.subtreeFlags=0,e=r,r=s.child;r!==null;)Ac(r,e),r=r.sibling;return U(pe,pe.current&1|2),s.child}e=e.sibling}g.tail!==null&&At()>Xa&&(s.flags|=128,c=!0,js(g,!1),s.lanes=4194304)}else{if(!c)if(e=ja(v),e!==null){if(s.flags|=128,c=!0,e=e.updateQueue,s.updateQueue=e,Ga(s,e),js(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Bt)return ne(s),null}else 2*At()-g.renderingStartTime>Xa&&r!==536870912&&(s.flags|=128,c=!0,js(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(e=g.last,e!==null?e.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=At(),s.sibling=null,e=pe.current,U(pe,c?e&1|2:e&1),s):(ne(s),null);case 22:case 23:return Sn(s),co(),c=s.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(ne(s),s.subtreeFlags&6&&(s.flags|=8192)):ne(s),r=s.updateQueue,r!==null&&Ga(s,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),e!==null&&H(pi),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),An(fe),ne(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Mf(e,s){switch(Wr(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return An(fe),Y(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return at(s),null;case 13:if(Sn(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ss()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return H(pe),null;case 4:return Y(),null;case 10:return An(s.type),null;case 22:case 23:return Sn(s),co(),e!==null&&H(pi),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return An(fe),null;case 25:return null;default:return null}}function $u(e,s){switch(Wr(s),s.tag){case 3:An(fe),Y();break;case 26:case 27:case 5:at(s);break;case 4:Y();break;case 13:Sn(s);break;case 19:H(pe);break;case 10:An(s.type);break;case 22:case 23:Sn(s),co(),e!==null&&H(pi);break;case 24:An(fe)}}function Us(e,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&e)===e){c=void 0;var v=r.create,D=r.inst;c=v(),D.destroy=c}r=r.next}while(r!==g)}}catch(B){Wt(s,s.return,B)}}function Hn(e,s,r){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&e)===e){var D=c.inst,B=D.destroy;if(B!==void 0){D.destroy=void 0,g=s;var W=r,rt=B;try{rt()}catch(ft){Wt(g,W,ft)}}}c=c.next}while(c!==v)}}catch(ft){Wt(s,s.return,ft)}}function Yu(e){var s=e.updateQueue;if(s!==null){var r=e.stateNode;try{Lc(s,r)}catch(c){Wt(e,e.return,c)}}}function Wu(e,s,r){r.props=mi(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(c){Wt(e,s,c)}}function Bs(e,s){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof r=="function"?e.refCleanup=r(c):r.current=c}}catch(g){Wt(e,s,g)}}function ln(e,s){var r=e.ref,c=e.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){Wt(e,s,g)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Wt(e,s,g)}else r.current=null}function Ku(e){var s=e.type,r=e.memoizedProps,c=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(g){Wt(e,e.return,g)}}function jo(e,s,r){try{var c=e.stateNode;Kf(c,e.type,r,s),c[ue]=s}catch(g){Wt(e,e.return,g)}}function Qu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wn(e.type)||e.tag===4}function Uo(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Qu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bo(e,s,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(e),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=er));else if(c!==4&&(c===27&&Wn(e.type)&&(r=e.stateNode,s=null),e=e.child,e!==null))for(Bo(e,s,r),e=e.sibling;e!==null;)Bo(e,s,r),e=e.sibling}function qa(e,s,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(c!==4&&(c===27&&Wn(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(qa(e,s,r),e=e.sibling;e!==null;)qa(e,s,r),e=e.sibling}function Zu(e){var s=e.stateNode,r=e.memoizedProps;try{for(var c=e.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Ee(s,c,r),s[Ht]=e,s[ue]=r}catch(v){Wt(e,e.return,v)}}var Tn=!1,ce=!1,Ho=!1,Ju=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Pf(e,s){if(e=e.containerInfo,hl=lr,e=uc(e),jr(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break t}var D=0,B=-1,W=-1,rt=0,ft=0,mt=e,ut=null;e:for(;;){for(var ht;mt!==r||g!==0&&mt.nodeType!==3||(B=D+g),mt!==v||c!==0&&mt.nodeType!==3||(W=D+c),mt.nodeType===3&&(D+=mt.nodeValue.length),(ht=mt.firstChild)!==null;)ut=mt,mt=ht;for(;;){if(mt===e)break e;if(ut===r&&++rt===g&&(B=D),ut===v&&++ft===c&&(W=D),(ht=mt.nextSibling)!==null)break;mt=ut,ut=mt.parentNode}mt=ht}r=B===-1||W===-1?null:{start:B,end:W}}else r=null}r=r||{start:0,end:0}}else r=null;for(dl={focusedElem:e,selectionRange:r},lr=!1,ve=s;ve!==null;)if(s=ve,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,ve=e;else for(;ve!==null;){switch(s=ve,v=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&v!==null){e=void 0,r=s,g=v.memoizedProps,v=v.memoizedState,c=r.stateNode;try{var Mt=mi(r.type,g,r.elementType===r.type);e=c.getSnapshotBeforeUpdate(Mt,v),c.__reactInternalSnapshotBeforeUpdate=e}catch(Ct){Wt(r,r.return,Ct)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,r=e.nodeType,r===9)gl(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gl(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=s.sibling,e!==null){e.return=s.return,ve=e;break}ve=s.return}}function th(e,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:zn(e,r),c&4&&Us(5,r);break;case 1:if(zn(e,r),c&4)if(e=r.stateNode,s===null)try{e.componentDidMount()}catch(D){Wt(r,r.return,D)}else{var g=mi(r.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(g,s,e.__reactInternalSnapshotBeforeUpdate)}catch(D){Wt(r,r.return,D)}}c&64&&Yu(r),c&512&&Bs(r,r.return);break;case 3:if(zn(e,r),c&64&&(e=r.updateQueue,e!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Lc(e,s)}catch(D){Wt(r,r.return,D)}}break;case 27:s===null&&c&4&&Zu(r);case 26:case 5:zn(e,r),s===null&&c&4&&Ku(r),c&512&&Bs(r,r.return);break;case 12:zn(e,r);break;case 13:zn(e,r),c&4&&ih(e,r),c&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Uf.bind(null,r),ip(e,r))));break;case 22:if(c=r.memoizedState!==null||Tn,!c){s=s!==null&&s.memoizedState!==null||ce,g=Tn;var v=ce;Tn=c,(ce=s)&&!v?Gn(e,r,(r.subtreeFlags&8772)!==0):zn(e,r),Tn=g,ce=v}break;case 30:break;default:zn(e,r)}}function eh(e){var s=e.alternate;s!==null&&(e.alternate=null,eh(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&vr(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qt=null,De=!1;function wn(e,s,r){for(r=r.child;r!==null;)nh(e,s,r),r=r.sibling}function nh(e,s,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ge,r)}catch{}switch(r.tag){case 26:ce||ln(r,s),wn(e,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ce||ln(r,s);var c=Qt,g=De;Wn(r.type)&&(Qt=r.stateNode,De=!1),wn(e,s,r),Ws(r.stateNode),Qt=c,De=g;break;case 5:ce||ln(r,s);case 6:if(c=Qt,g=De,Qt=null,wn(e,s,r),Qt=c,De=g,Qt!==null)if(De)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(r.stateNode)}catch(v){Wt(r,s,v)}else try{Qt.removeChild(r.stateNode)}catch(v){Wt(r,s,v)}break;case 18:Qt!==null&&(De?(e=Qt,qh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),ia(e)):qh(Qt,r.stateNode));break;case 4:c=Qt,g=De,Qt=r.stateNode.containerInfo,De=!0,wn(e,s,r),Qt=c,De=g;break;case 0:case 11:case 14:case 15:ce||Hn(2,r,s),ce||Hn(4,r,s),wn(e,s,r);break;case 1:ce||(ln(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Wu(r,s,c)),wn(e,s,r);break;case 21:wn(e,s,r);break;case 22:ce=(c=ce)||r.memoizedState!==null,wn(e,s,r),ce=c;break;default:wn(e,s,r)}}function ih(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ia(e)}catch(r){Wt(s,s.return,r)}}function Of(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new Ju),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new Ju),s;default:throw Error(i(435,e.tag))}}function zo(e,s){var r=Of(e);s.forEach(function(c){var g=Bf.bind(null,e,c);r.has(c)||(r.add(c),c.then(g,g))})}function Ie(e,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],v=e,D=s,B=D;t:for(;B!==null;){switch(B.tag){case 27:if(Wn(B.type)){Qt=B.stateNode,De=!1;break t}break;case 5:Qt=B.stateNode,De=!1;break t;case 3:case 4:Qt=B.stateNode.containerInfo,De=!0;break t}B=B.return}if(Qt===null)throw Error(i(160));nh(v,D,g),Qt=null,De=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)sh(s,e),s=s.sibling}var Je=null;function sh(e,s){var r=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ie(s,e),je(e),c&4&&(Hn(3,e,e.return),Us(3,e),Hn(5,e,e.return));break;case 1:Ie(s,e),je(e),c&512&&(ce||r===null||ln(r,r.return)),c&64&&Tn&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var g=Je;if(Ie(s,e),je(e),c&512&&(ce||r===null||ln(r,r.return)),c&4){var v=r!==null?r.memoizedState:null;if(c=e.memoizedState,r===null)if(c===null)if(e.stateNode===null){t:{c=e.type,r=e.memoizedProps,g=g.ownerDocument||g;e:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[us]||v[Ht]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),Ee(v,c,r),v[Ht]=e,be(v),c=v;break t;case"link":var D=Zh("link","href",g).get(c+(r.href||""));if(D){for(var B=0;B<D.length;B++)if(v=D[B],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){D.splice(B,1);break e}}v=g.createElement(c),Ee(v,c,r),g.head.appendChild(v);break;case"meta":if(D=Zh("meta","content",g).get(c+(r.content||""))){for(B=0;B<D.length;B++)if(v=D[B],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){D.splice(B,1);break e}}v=g.createElement(c),Ee(v,c,r),g.head.appendChild(v);break;default:throw Error(i(468,c))}v[Ht]=e,be(v),c=v}e.stateNode=c}else Jh(g,e.type,e.stateNode);else e.stateNode=Qh(g,c,e.memoizedProps);else v!==c?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,c===null?Jh(g,e.type,e.stateNode):Qh(g,c,e.memoizedProps)):c===null&&e.stateNode!==null&&jo(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ie(s,e),je(e),c&512&&(ce||r===null||ln(r,r.return)),r!==null&&c&4&&jo(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ie(s,e),je(e),c&512&&(ce||r===null||ln(r,r.return)),e.flags&32){g=e.stateNode;try{Pi(g,"")}catch(ht){Wt(e,e.return,ht)}}c&4&&e.stateNode!=null&&(g=e.memoizedProps,jo(e,g,r!==null?r.memoizedProps:g)),c&1024&&(Ho=!0);break;case 6:if(Ie(s,e),je(e),c&4){if(e.stateNode===null)throw Error(i(162));c=e.memoizedProps,r=e.stateNode;try{r.nodeValue=c}catch(ht){Wt(e,e.return,ht)}}break;case 3:if(ar=null,g=Je,Je=ir(s.containerInfo),Ie(s,e),Je=g,je(e),c&4&&r!==null&&r.memoizedState.isDehydrated)try{ia(s.containerInfo)}catch(ht){Wt(e,e.return,ht)}Ho&&(Ho=!1,ah(e));break;case 4:c=Je,Je=ir(e.stateNode.containerInfo),Ie(s,e),je(e),Je=c;break;case 12:Ie(s,e),je(e);break;case 13:Ie(s,e),je(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yo=At()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,zo(e,c)));break;case 22:g=e.memoizedState!==null;var W=r!==null&&r.memoizedState!==null,rt=Tn,ft=ce;if(Tn=rt||g,ce=ft||W,Ie(s,e),ce=ft,Tn=rt,je(e),c&8192)t:for(s=e.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(r===null||W||Tn||ce||bi(e)),r=null,s=e;;){if(s.tag===5||s.tag===26){if(r===null){W=r=s;try{if(v=W.stateNode,g)D=v.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{B=W.stateNode;var mt=W.memoizedProps.style,ut=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;B.style.display=ut==null||typeof ut=="boolean"?"":(""+ut).trim()}}catch(ht){Wt(W,W.return,ht)}}}else if(s.tag===6){if(r===null){W=s;try{W.stateNode.nodeValue=g?"":W.memoizedProps}catch(ht){Wt(W,W.return,ht)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=e.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,zo(e,r))));break;case 19:Ie(s,e),je(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,zo(e,c)));break;case 30:break;case 21:break;default:Ie(s,e),je(e)}}function je(e){var s=e.flags;if(s&2){try{for(var r,c=e.return;c!==null;){if(Qu(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var g=r.stateNode,v=Uo(e);qa(e,v,g);break;case 5:var D=r.stateNode;r.flags&32&&(Pi(D,""),r.flags&=-33);var B=Uo(e);qa(e,B,D);break;case 3:case 4:var W=r.stateNode.containerInfo,rt=Uo(e);Bo(e,rt,W);break;default:throw Error(i(161))}}catch(ft){Wt(e,e.return,ft)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function ah(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;ah(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function zn(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)th(e,s.alternate,s),s=s.sibling}function bi(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Hn(4,s,s.return),bi(s);break;case 1:ln(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Wu(s,s.return,r),bi(s);break;case 27:Ws(s.stateNode);case 26:case 5:ln(s,s.return),bi(s);break;case 22:s.memoizedState===null&&bi(s);break;case 30:bi(s);break;default:bi(s)}e=e.sibling}}function Gn(e,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=e,v=s,D=v.flags;switch(v.tag){case 0:case 11:case 15:Gn(g,v,r),Us(4,v);break;case 1:if(Gn(g,v,r),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(rt){Wt(c,c.return,rt)}if(c=v,g=c.updateQueue,g!==null){var B=c.stateNode;try{var W=g.shared.hiddenCallbacks;if(W!==null)for(g.shared.hiddenCallbacks=null,g=0;g<W.length;g++)Nc(W[g],B)}catch(rt){Wt(c,c.return,rt)}}r&&D&64&&Yu(v),Bs(v,v.return);break;case 27:Zu(v);case 26:case 5:Gn(g,v,r),r&&c===null&&D&4&&Ku(v),Bs(v,v.return);break;case 12:Gn(g,v,r);break;case 13:Gn(g,v,r),r&&D&4&&ih(g,v);break;case 22:v.memoizedState===null&&Gn(g,v,r),Bs(v,v.return);break;case 30:break;default:Gn(g,v,r)}s=s.sibling}}function Go(e,s){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ts(r))}function qo(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Ts(e))}function cn(e,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rh(e,s,r,c),s=s.sibling}function rh(e,s,r,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:cn(e,s,r,c),g&2048&&Us(9,s);break;case 1:cn(e,s,r,c);break;case 3:cn(e,s,r,c),g&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Ts(e)));break;case 12:if(g&2048){cn(e,s,r,c),e=s.stateNode;try{var v=s.memoizedProps,D=v.id,B=v.onPostCommit;typeof B=="function"&&B(D,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(W){Wt(s,s.return,W)}}else cn(e,s,r,c);break;case 13:cn(e,s,r,c);break;case 23:break;case 22:v=s.stateNode,D=s.alternate,s.memoizedState!==null?v._visibility&2?cn(e,s,r,c):Hs(e,s):v._visibility&2?cn(e,s,r,c):(v._visibility|=2,Wi(e,s,r,c,(s.subtreeFlags&10256)!==0)),g&2048&&Go(D,s);break;case 24:cn(e,s,r,c),g&2048&&qo(s.alternate,s);break;default:cn(e,s,r,c)}}function Wi(e,s,r,c,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=e,D=s,B=r,W=c,rt=D.flags;switch(D.tag){case 0:case 11:case 15:Wi(v,D,B,W,g),Us(8,D);break;case 23:break;case 22:var ft=D.stateNode;D.memoizedState!==null?ft._visibility&2?Wi(v,D,B,W,g):Hs(v,D):(ft._visibility|=2,Wi(v,D,B,W,g)),g&&rt&2048&&Go(D.alternate,D);break;case 24:Wi(v,D,B,W,g),g&&rt&2048&&qo(D.alternate,D);break;default:Wi(v,D,B,W,g)}s=s.sibling}}function Hs(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=e,c=s,g=c.flags;switch(c.tag){case 22:Hs(r,c),g&2048&&Go(c.alternate,c);break;case 24:Hs(r,c),g&2048&&qo(c.alternate,c);break;default:Hs(r,c)}s=s.sibling}}var zs=8192;function Ki(e){if(e.subtreeFlags&zs)for(e=e.child;e!==null;)oh(e),e=e.sibling}function oh(e){switch(e.tag){case 26:Ki(e),e.flags&zs&&e.memoizedState!==null&&mp(Je,e.memoizedState,e.memoizedProps);break;case 5:Ki(e);break;case 3:case 4:var s=Je;Je=ir(e.stateNode.containerInfo),Ki(e),Je=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=zs,zs=16777216,Ki(e),zs=s):Ki(e));break;default:Ki(e)}}function lh(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Gs(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];ve=c,uh(c,e)}lh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ch(e),e=e.sibling}function ch(e){switch(e.tag){case 0:case 11:case 15:Gs(e),e.flags&2048&&Hn(9,e,e.return);break;case 3:Gs(e);break;case 12:Gs(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Va(e)):Gs(e);break;default:Gs(e)}}function Va(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];ve=c,uh(c,e)}lh(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Hn(8,s,s.return),Va(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Va(s));break;default:Va(s)}e=e.sibling}}function uh(e,s){for(;ve!==null;){var r=ve;switch(r.tag){case 0:case 11:case 15:Hn(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ts(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,ve=c;else t:for(r=e;ve!==null;){c=ve;var g=c.sibling,v=c.return;if(eh(c),c===r){ve=null;break t}if(g!==null){g.return=v,ve=g;break t}ve=v}}}var Df={getCacheForType:function(e){var s=Te(fe),r=s.data.get(e);return r===void 0&&(r=e(),s.data.set(e,r)),r}},kf=typeof WeakMap=="function"?WeakMap:Map,qt=0,Kt=null,Nt=null,Ft=0,Vt=0,Ue=null,qn=!1,Qi=!1,Vo=!1,Cn=0,re=0,Vn=0,yi=0,Xo=0,Ke=0,Zi=0,qs=null,ke=null,$o=!1,Yo=0,Xa=1/0,$a=null,Xn=null,Se=0,$n=null,Ji=null,ts=0,Wo=0,Ko=null,hh=null,Vs=0,Qo=null;function Be(){if((qt&2)!==0&&Ft!==0)return Ft&-Ft;if(I.T!==null){var e=Hi;return e!==0?e:sl()}return Ei()}function dh(){Ke===0&&(Ke=(Ft&536870912)===0||Bt?fn():536870912);var e=We.current;return e!==null&&(e.flags|=32),Ke}function He(e,s,r){(e===Kt&&(Vt===2||Vt===9)||e.cancelPendingCommit!==null)&&(es(e,0),Yn(e,Ft,Ke,!1)),ze(e,r),((qt&2)===0||e!==Kt)&&(e===Kt&&((qt&2)===0&&(yi|=r),re===4&&Yn(e,Ft,Ke,!1)),un(e))}function fh(e,s,r){if((qt&6)!==0)throw Error(i(327));var c=!r&&(s&124)===0&&(s&e.expiredLanes)===0||ee(e,s),g=c?Ff(e,s):tl(e,s,!0),v=c;do{if(g===0){Qi&&!c&&Yn(e,s,0,!1);break}else{if(r=e.current.alternate,v&&!Nf(r)){g=tl(e,s,!1),v=!1;continue}if(g===2){if(v=s,e.errorRecoveryDisabledLanes&v)var D=0;else D=e.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){s=D;t:{var B=e;g=qs;var W=B.current.memoizedState.isDehydrated;if(W&&(es(B,D).flags|=256),D=tl(B,D,!1),D!==2){if(Vo&&!W){B.errorRecoveryDisabledLanes|=v,yi|=v,g=4;break t}v=ke,ke=g,v!==null&&(ke===null?ke=v:ke.push.apply(ke,v))}g=D}if(v=!1,g!==2)continue}}if(g===1){es(e,0),Yn(e,s,0,!0);break}t:{switch(c=e,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Yn(c,s,Ke,!qn);break t;case 2:ke=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Yo+300-At(),10<g)){if(Yn(c,s,Ke,!qn),se(c,0,!0)!==0)break t;c.timeoutHandle=zh(ph.bind(null,c,r,ke,$a,$o,s,Ke,yi,Zi,qn,v,2,-0,0),g);break t}ph(c,r,ke,$a,$o,s,Ke,yi,Zi,qn,v,0,-0,0)}}break}while(!0);un(e)}function ph(e,s,r,c,g,v,D,B,W,rt,ft,mt,ut,ht){if(e.timeoutHandle=-1,mt=s.subtreeFlags,(mt&8192||(mt&16785408)===16785408)&&(Zs={stylesheets:null,count:0,unsuspend:gp},oh(s),mt=bp(),mt!==null)){e.cancelPendingCommit=mt(_h.bind(null,e,s,v,r,c,g,D,B,W,ft,1,ut,ht)),Yn(e,v,D,!rt);return}_h(e,s,v,r,c,g,D,B,W)}function Nf(e){for(var s=e;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],v=g.getSnapshot;g=g.value;try{if(!Le(v(),g))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yn(e,s,r,c){s&=~Xo,s&=~yi,e.suspendedLanes|=s,e.pingedLanes&=~s,c&&(e.warmLanes|=s),c=e.expirationTimes;for(var g=s;0<g;){var v=31-jt(g),D=1<<v;c[v]=-1,g&=~D}r!==0&&ni(e,r,s)}function Ya(){return(qt&6)===0?(Xs(0),!1):!0}function Zo(){if(Nt!==null){if(Vt===0)var e=Nt.return;else e=Nt,vn=di=null,go(e),$i=null,Fs=0,e=Nt;for(;e!==null;)$u(e.alternate,e),e=e.return;Nt=null}}function es(e,s){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Zf(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Zo(),Kt=e,Nt=r=mn(e.current,null),Ft=s,Vt=0,Ue=null,qn=!1,Qi=ee(e,s),Vo=!1,Zi=Ke=Xo=yi=Vn=re=0,ke=qs=null,$o=!1,(s&8)!==0&&(s|=s&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=s;0<c;){var g=31-jt(c),v=1<<g;s|=e[g],c&=~v}return Cn=s,ma(),r}function gh(e,s){Dt=null,I.H=La,s===Cs||s===Ta?(s=Dc(),Vt=3):s===Mc?(s=Dc(),Vt=4):Vt=s===ku?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ue=s,Nt===null&&(re=1,Ba(e,Ve(s,e.current)))}function mh(){var e=I.H;return I.H=La,e===null?La:e}function bh(){var e=I.A;return I.A=Df,e}function Jo(){re=4,qn||(Ft&4194048)!==Ft&&We.current!==null||(Qi=!0),(Vn&134217727)===0&&(yi&134217727)===0||Kt===null||Yn(Kt,Ft,Ke,!1)}function tl(e,s,r){var c=qt;qt|=2;var g=mh(),v=bh();(Kt!==e||Ft!==s)&&($a=null,es(e,s)),s=!1;var D=re;t:do try{if(Vt!==0&&Nt!==null){var B=Nt,W=Ue;switch(Vt){case 8:Zo(),D=6;break t;case 3:case 2:case 9:case 6:We.current===null&&(s=!0);var rt=Vt;if(Vt=0,Ue=null,ns(e,B,W,rt),r&&Qi){D=0;break t}break;default:rt=Vt,Vt=0,Ue=null,ns(e,B,W,rt)}}Lf(),D=re;break}catch(ft){gh(e,ft)}while(!0);return s&&e.shellSuspendCounter++,vn=di=null,qt=c,I.H=g,I.A=v,Nt===null&&(Kt=null,Ft=0,ma()),D}function Lf(){for(;Nt!==null;)yh(Nt)}function Ff(e,s){var r=qt;qt|=2;var c=mh(),g=bh();Kt!==e||Ft!==s?($a=null,Xa=At()+500,es(e,s)):Qi=ee(e,s);t:do try{if(Vt!==0&&Nt!==null){s=Nt;var v=Ue;e:switch(Vt){case 1:Vt=0,Ue=null,ns(e,s,v,1);break;case 2:case 9:if(Pc(v)){Vt=0,Ue=null,vh(s);break}s=function(){Vt!==2&&Vt!==9||Kt!==e||(Vt=7),un(e)},v.then(s,s);break t;case 3:Vt=7;break t;case 4:Vt=5;break t;case 7:Pc(v)?(Vt=0,Ue=null,vh(s)):(Vt=0,Ue=null,ns(e,s,v,7));break;case 5:var D=null;switch(Nt.tag){case 26:D=Nt.memoizedState;case 5:case 27:var B=Nt;if(!D||td(D)){Vt=0,Ue=null;var W=B.sibling;if(W!==null)Nt=W;else{var rt=B.return;rt!==null?(Nt=rt,Wa(rt)):Nt=null}break e}}Vt=0,Ue=null,ns(e,s,v,5);break;case 6:Vt=0,Ue=null,ns(e,s,v,6);break;case 8:Zo(),re=6;break t;default:throw Error(i(462))}}If();break}catch(ft){gh(e,ft)}while(!0);return vn=di=null,I.H=c,I.A=g,qt=r,Nt!==null?0:(Kt=null,Ft=0,ma(),re)}function If(){for(;Nt!==null&&!dt();)yh(Nt)}function yh(e){var s=Vu(e.alternate,e,Cn);e.memoizedProps=e.pendingProps,s===null?Wa(e):Nt=s}function vh(e){var s=e,r=s.alternate;switch(s.tag){case 15:case 0:s=Uu(r,s,s.pendingProps,s.type,void 0,Ft);break;case 11:s=Uu(r,s,s.pendingProps,s.type.render,s.ref,Ft);break;case 5:go(s);default:$u(r,s),s=Nt=Ac(s,Cn),s=Vu(r,s,Cn)}e.memoizedProps=e.pendingProps,s===null?Wa(e):Nt=s}function ns(e,s,r,c){vn=di=null,go(s),$i=null,Fs=0;var g=s.return;try{if(wf(e,g,s,r,Ft)){re=1,Ba(e,Ve(r,e.current)),Nt=null;return}}catch(v){if(g!==null)throw Nt=g,v;re=1,Ba(e,Ve(r,e.current)),Nt=null;return}s.flags&32768?(Bt||c===1?e=!0:Qi||(Ft&536870912)!==0?e=!1:(qn=e=!0,(c===2||c===9||c===3||c===6)&&(c=We.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ah(s,e)):Wa(s)}function Wa(e){var s=e;do{if((s.flags&32768)!==0){Ah(s,qn);return}e=s.return;var r=Rf(s.alternate,s,Cn);if(r!==null){Nt=r;return}if(s=s.sibling,s!==null){Nt=s;return}Nt=s=e}while(s!==null);re===0&&(re=5)}function Ah(e,s){do{var r=Mf(e.alternate,e);if(r!==null){r.flags&=32767,Nt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=r}while(e!==null);re=6,Nt=null}function _h(e,s,r,c,g,v,D,B,W){e.cancelPendingCommit=null;do Ka();while(Se!==0);if((qt&6)!==0)throw Error(i(327));if(s!==null){if(s===e.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=Gr,sn(e,r,v,D,B,W),e===Kt&&(Nt=Kt=null,Ft=0),Ji=s,$n=e,ts=r,Wo=v,Ko=g,hh=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Hf(It,function(){return wh(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=I.T,I.T=null,g=V.p,V.p=2,D=qt,qt|=4;try{Pf(e,s,r)}finally{qt=D,V.p=g,I.T=c}}Se=1,Sh(),Eh(),xh()}}function Sh(){if(Se===1){Se=0;var e=$n,s=Ji,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=I.T,I.T=null;var c=V.p;V.p=2;var g=qt;qt|=4;try{sh(s,e);var v=dl,D=uc(e.containerInfo),B=v.focusedElem,W=v.selectionRange;if(D!==B&&B&&B.ownerDocument&&cc(B.ownerDocument.documentElement,B)){if(W!==null&&jr(B)){var rt=W.start,ft=W.end;if(ft===void 0&&(ft=rt),"selectionStart"in B)B.selectionStart=rt,B.selectionEnd=Math.min(ft,B.value.length);else{var mt=B.ownerDocument||document,ut=mt&&mt.defaultView||window;if(ut.getSelection){var ht=ut.getSelection(),Mt=B.textContent.length,Ct=Math.min(W.start,Mt),Yt=W.end===void 0?Ct:Math.min(W.end,Mt);!ht.extend&&Ct>Yt&&(D=Yt,Yt=Ct,Ct=D);var et=lc(B,Ct),Z=lc(B,Yt);if(et&&Z&&(ht.rangeCount!==1||ht.anchorNode!==et.node||ht.anchorOffset!==et.offset||ht.focusNode!==Z.node||ht.focusOffset!==Z.offset)){var it=mt.createRange();it.setStart(et.node,et.offset),ht.removeAllRanges(),Ct>Yt?(ht.addRange(it),ht.extend(Z.node,Z.offset)):(it.setEnd(Z.node,Z.offset),ht.addRange(it))}}}}for(mt=[],ht=B;ht=ht.parentNode;)ht.nodeType===1&&mt.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<mt.length;B++){var pt=mt[B];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}lr=!!hl,dl=hl=null}finally{qt=g,V.p=c,I.T=r}}e.current=s,Se=2}}function Eh(){if(Se===2){Se=0;var e=$n,s=Ji,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=I.T,I.T=null;var c=V.p;V.p=2;var g=qt;qt|=4;try{th(e,s.alternate,s)}finally{qt=g,V.p=c,I.T=r}}Se=3}}function xh(){if(Se===4||Se===3){Se=0,vt();var e=$n,s=Ji,r=ts,c=hh;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Se=5:(Se=0,Ji=$n=null,Th(e,e.pendingLanes));var g=e.pendingLanes;if(g===0&&(Xn=null),Dn(r),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ge,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=I.T,g=V.p,V.p=2,I.T=null;try{for(var v=e.onRecoverableError,D=0;D<c.length;D++){var B=c[D];v(B.value,{componentStack:B.stack})}}finally{I.T=s,V.p=g}}(ts&3)!==0&&Ka(),un(e),g=e.pendingLanes,(r&4194090)!==0&&(g&42)!==0?e===Qo?Vs++:(Vs=0,Qo=e):Vs=0,Xs(0)}}function Th(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Ts(s)))}function Ka(e){return Sh(),Eh(),xh(),wh()}function wh(){if(Se!==5)return!1;var e=$n,s=Wo;Wo=0;var r=Dn(ts),c=I.T,g=V.p;try{V.p=32>r?32:r,I.T=null,r=Ko,Ko=null;var v=$n,D=ts;if(Se=0,Ji=$n=null,ts=0,(qt&6)!==0)throw Error(i(331));var B=qt;if(qt|=4,ch(v.current),rh(v,v.current,D,r),qt=B,Xs(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ge,v)}catch{}return!0}finally{V.p=g,I.T=c,Th(e,s)}}function Ch(e,s,r){s=Ve(r,s),s=Mo(e.stateNode,s,2),e=In(e,s,2),e!==null&&(ze(e,2),un(e))}function Wt(e,s,r){if(e.tag===3)Ch(e,e,r);else for(;s!==null;){if(s.tag===3){Ch(s,e,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xn===null||!Xn.has(c))){e=Ve(r,e),r=Ou(2),c=In(s,r,2),c!==null&&(Du(r,c,s,e),ze(c,2),un(c));break}}s=s.return}}function el(e,s,r){var c=e.pingCache;if(c===null){c=e.pingCache=new kf;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(r)||(Vo=!0,g.add(r),e=jf.bind(null,e,s,r),s.then(e,e))}function jf(e,s,r){var c=e.pingCache;c!==null&&c.delete(s),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Kt===e&&(Ft&r)===r&&(re===4||re===3&&(Ft&62914560)===Ft&&300>At()-Yo?(qt&2)===0&&es(e,0):Xo|=r,Zi===Ft&&(Zi=0)),un(e)}function Rh(e,s){s===0&&(s=nn()),e=Ii(e,s),e!==null&&(ze(e,s),un(e))}function Uf(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),Rh(e,r)}function Bf(e,s){var r=0;switch(e.tag){case 13:var c=e.stateNode,g=e.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Rh(e,r)}function Hf(e,s){return ot(e,s)}var Qa=null,is=null,nl=!1,Za=!1,il=!1,vi=0;function un(e){e!==is&&e.next===null&&(is===null?Qa=is=e:is=is.next=e),Za=!0,nl||(nl=!0,Gf())}function Xs(e,s){if(!il&&Za){il=!0;do for(var r=!1,c=Qa;c!==null;){if(e!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var D=c.suspendedLanes,B=c.pingedLanes;v=(1<<31-jt(42|e)+1)-1,v&=g&~(D&~B),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,Dh(c,v))}else v=Ft,v=se(c,c===Kt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ee(c,v)||(r=!0,Dh(c,v));c=c.next}while(r);il=!1}}function zf(){Mh()}function Mh(){Za=nl=!1;var e=0;vi!==0&&(Qf()&&(e=vi),vi=0);for(var s=At(),r=null,c=Qa;c!==null;){var g=c.next,v=Ph(c,s);v===0?(c.next=null,r===null?Qa=g:r.next=g,g===null&&(is=r)):(r=c,(e!==0||(v&3)!==0)&&(Za=!0)),c=g}Xs(e)}function Ph(e,s){for(var r=e.suspendedLanes,c=e.pingedLanes,g=e.expirationTimes,v=e.pendingLanes&-62914561;0<v;){var D=31-jt(v),B=1<<D,W=g[D];W===-1?((B&r)===0||(B&c)!==0)&&(g[D]=Pn(B,s)):W<=s&&(e.expiredLanes|=B),v&=~B}if(s=Kt,r=Ft,r=se(e,e===s?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,r===0||e===s&&(Vt===2||Vt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&bt(c),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||ee(e,r)){if(s=r&-r,s===e.callbackPriority)return s;switch(c!==null&&bt(c),Dn(r)){case 2:case 8:r=_t;break;case 32:r=It;break;case 268435456:r=Pt;break;default:r=It}return c=Oh.bind(null,e),r=ot(r,c),e.callbackPriority=s,e.callbackNode=r,s}return c!==null&&c!==null&&bt(c),e.callbackPriority=2,e.callbackNode=null,2}function Oh(e,s){if(Se!==0&&Se!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ka()&&e.callbackNode!==r)return null;var c=Ft;return c=se(e,e===Kt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(fh(e,c,s),Ph(e,At()),e.callbackNode!=null&&e.callbackNode===r?Oh.bind(null,e):null)}function Dh(e,s){if(Ka())return null;fh(e,s,!0)}function Gf(){Jf(function(){(qt&6)!==0?ot(Tt,zf):Mh()})}function sl(){return vi===0&&(vi=fn()),vi}function kh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ca(""+e)}function Nh(e,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,e.id&&r.setAttribute("form",e.id),s.parentNode.insertBefore(r,s),e=new FormData(e),r.parentNode.removeChild(r),e}function qf(e,s,r,c,g){if(s==="submit"&&r&&r.stateNode===g){var v=kh((g[ue]||null).action),D=c.submitter;D&&(s=(s=D[ue]||null)?kh(s.formAction):D.getAttribute("formAction"),s!==null&&(v=s,D=null));var B=new fa("action","action",null,c,g);e.push({event:B,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(vi!==0){var W=D?Nh(g,D):new FormData(g);xo(r,{pending:!0,data:W,method:g.method,action:v},null,W)}}else typeof v=="function"&&(B.preventDefault(),W=D?Nh(g,D):new FormData(g),xo(r,{pending:!0,data:W,method:g.method,action:v},v,W))},currentTarget:g}]})}}for(var al=0;al<zr.length;al++){var rl=zr[al],Vf=rl.toLowerCase(),Xf=rl[0].toUpperCase()+rl.slice(1);Ze(Vf,"on"+Xf)}Ze(fc,"onAnimationEnd"),Ze(pc,"onAnimationIteration"),Ze(gc,"onAnimationStart"),Ze("dblclick","onDoubleClick"),Ze("focusin","onFocus"),Ze("focusout","onBlur"),Ze(cf,"onTransitionRun"),Ze(uf,"onTransitionStart"),Ze(hf,"onTransitionCancel"),Ze(mc,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$f=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($s));function Lh(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var c=e[r],g=c.event;c=c.listeners;t:{var v=void 0;if(s)for(var D=c.length-1;0<=D;D--){var B=c[D],W=B.instance,rt=B.currentTarget;if(B=B.listener,W!==v&&g.isPropagationStopped())break t;v=B,g.currentTarget=rt;try{v(g)}catch(ft){Ua(ft)}g.currentTarget=null,v=W}else for(D=0;D<c.length;D++){if(B=c[D],W=B.instance,rt=B.currentTarget,B=B.listener,W!==v&&g.isPropagationStopped())break t;v=B,g.currentTarget=rt;try{v(g)}catch(ft){Ua(ft)}g.currentTarget=null,v=W}}}}function Lt(e,s){var r=s[yr];r===void 0&&(r=s[yr]=new Set);var c=e+"__bubble";r.has(c)||(Fh(s,e,2,!1),r.add(c))}function ol(e,s,r){var c=0;s&&(c|=4),Fh(r,e,c,s)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function ll(e){if(!e[Ja]){e[Ja]=!0,Ml.forEach(function(r){r!=="selectionchange"&&($f.has(r)||ol(r,!1,e),ol(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Ja]||(s[Ja]=!0,ol("selectionchange",!1,s))}}function Fh(e,s,r,c){switch(rd(s)){case 2:var g=Ap;break;case 8:g=_p;break;default:g=Sl}r=g.bind(null,s,r,e),g=void 0,!Mr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?e.addEventListener(s,r,{capture:!0,passive:g}):e.addEventListener(s,r,!0):g!==void 0?e.addEventListener(s,r,{passive:g}):e.addEventListener(s,r,!1)}function cl(e,s,r,c,g){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var D=c.tag;if(D===3||D===4){var B=c.stateNode.containerInfo;if(B===g)break;if(D===4)for(D=c.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;B!==null;){if(D=xi(B),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){c=v=D;continue t}B=B.parentNode}}c=c.return}Gl(function(){var rt=v,ft=Cr(r),mt=[];t:{var ut=bc.get(e);if(ut!==void 0){var ht=fa,Mt=e;switch(e){case"keypress":if(ha(r)===0)break t;case"keydown":case"keyup":ht=Bd;break;case"focusin":Mt="focus",ht=kr;break;case"focusout":Mt="blur",ht=kr;break;case"beforeblur":case"afterblur":ht=kr;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Gd;break;case fc:case pc:case gc:ht=Od;break;case mc:ht=Vd;break;case"scroll":case"scrollend":ht=wd;break;case"wheel":ht=$d;break;case"copy":case"cut":case"paste":ht=kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Yl;break;case"toggle":case"beforetoggle":ht=Wd}var Ct=(s&4)!==0,Yt=!Ct&&(e==="scroll"||e==="scrollend"),et=Ct?ut!==null?ut+"Capture":null:ut;Ct=[];for(var Z=rt,it;Z!==null;){var pt=Z;if(it=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||it===null||et===null||(pt=ds(Z,et),pt!=null&&Ct.push(Ys(Z,pt,it))),Yt)break;Z=Z.return}0<Ct.length&&(ut=new ht(ut,Mt,null,r,ft),mt.push({event:ut,listeners:Ct}))}}if((s&7)===0){t:{if(ut=e==="mouseover"||e==="pointerover",ht=e==="mouseout"||e==="pointerout",ut&&r!==wr&&(Mt=r.relatedTarget||r.fromElement)&&(xi(Mt)||Mt[an]))break t;if((ht||ut)&&(ut=ft.window===ft?ft:(ut=ft.ownerDocument)?ut.defaultView||ut.parentWindow:window,ht?(Mt=r.relatedTarget||r.toElement,ht=rt,Mt=Mt?xi(Mt):null,Mt!==null&&(Yt=o(Mt),Ct=Mt.tag,Mt!==Yt||Ct!==5&&Ct!==27&&Ct!==6)&&(Mt=null)):(ht=null,Mt=rt),ht!==Mt)){if(Ct=Xl,pt="onMouseLeave",et="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Ct=Yl,pt="onPointerLeave",et="onPointerEnter",Z="pointer"),Yt=ht==null?ut:hs(ht),it=Mt==null?ut:hs(Mt),ut=new Ct(pt,Z+"leave",ht,r,ft),ut.target=Yt,ut.relatedTarget=it,pt=null,xi(ft)===rt&&(Ct=new Ct(et,Z+"enter",Mt,r,ft),Ct.target=it,Ct.relatedTarget=Yt,pt=Ct),Yt=pt,ht&&Mt)e:{for(Ct=ht,et=Mt,Z=0,it=Ct;it;it=ss(it))Z++;for(it=0,pt=et;pt;pt=ss(pt))it++;for(;0<Z-it;)Ct=ss(Ct),Z--;for(;0<it-Z;)et=ss(et),it--;for(;Z--;){if(Ct===et||et!==null&&Ct===et.alternate)break e;Ct=ss(Ct),et=ss(et)}Ct=null}else Ct=null;ht!==null&&Ih(mt,ut,ht,Ct,!1),Mt!==null&&Yt!==null&&Ih(mt,Yt,Mt,Ct,!0)}}t:{if(ut=rt?hs(rt):window,ht=ut.nodeName&&ut.nodeName.toLowerCase(),ht==="select"||ht==="input"&&ut.type==="file")var xt=nc;else if(tc(ut))if(ic)xt=rf;else{xt=sf;var kt=nf}else ht=ut.nodeName,!ht||ht.toLowerCase()!=="input"||ut.type!=="checkbox"&&ut.type!=="radio"?rt&&Tr(rt.elementType)&&(xt=nc):xt=af;if(xt&&(xt=xt(e,rt))){ec(mt,xt,r,ft);break t}kt&&kt(e,ut,rt),e==="focusout"&&rt&&ut.type==="number"&&rt.memoizedProps.value!=null&&xr(ut,"number",ut.value)}switch(kt=rt?hs(rt):window,e){case"focusin":(tc(kt)||kt.contentEditable==="true")&&(Ni=kt,Ur=rt,As=null);break;case"focusout":As=Ur=Ni=null;break;case"mousedown":Br=!0;break;case"contextmenu":case"mouseup":case"dragend":Br=!1,hc(mt,r,ft);break;case"selectionchange":if(lf)break;case"keydown":case"keyup":hc(mt,r,ft)}var wt;if(Lr)t:{switch(e){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else ki?Zl(e,r)&&(Rt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Rt="onCompositionStart");Rt&&(Wl&&r.locale!=="ko"&&(ki||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&ki&&(wt=ql()):(kn=ft,Pr="value"in kn?kn.value:kn.textContent,ki=!0)),kt=tr(rt,Rt),0<kt.length&&(Rt=new $l(Rt,e,null,r,ft),mt.push({event:Rt,listeners:kt}),wt?Rt.data=wt:(wt=Jl(r),wt!==null&&(Rt.data=wt)))),(wt=Qd?Zd(e,r):Jd(e,r))&&(Rt=tr(rt,"onBeforeInput"),0<Rt.length&&(kt=new $l("onBeforeInput","beforeinput",null,r,ft),mt.push({event:kt,listeners:Rt}),kt.data=wt)),qf(mt,e,rt,r,ft)}Lh(mt,s)})}function Ys(e,s,r){return{instance:e,listener:s,currentTarget:r}}function tr(e,s){for(var r=s+"Capture",c=[];e!==null;){var g=e,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ds(e,r),g!=null&&c.unshift(Ys(e,g,v)),g=ds(e,s),g!=null&&c.push(Ys(e,g,v))),e.tag===3)return c;e=e.return}return[]}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ih(e,s,r,c,g){for(var v=s._reactName,D=[];r!==null&&r!==c;){var B=r,W=B.alternate,rt=B.stateNode;if(B=B.tag,W!==null&&W===c)break;B!==5&&B!==26&&B!==27||rt===null||(W=rt,g?(rt=ds(r,v),rt!=null&&D.unshift(Ys(r,rt,W))):g||(rt=ds(r,v),rt!=null&&D.push(Ys(r,rt,W)))),r=r.return}D.length!==0&&e.push({event:s,listeners:D})}var Yf=/\r\n?/g,Wf=/\u0000|\uFFFD/g;function jh(e){return(typeof e=="string"?e:""+e).replace(Yf,`
`).replace(Wf,"")}function Uh(e,s){return s=jh(s),jh(e)===s}function er(){}function $t(e,s,r,c,g,v){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Pi(e,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Pi(e,""+c);break;case"className":ra(e,"class",c);break;case"tabIndex":ra(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ra(e,r,c);break;case"style":Hl(e,c,v);break;case"data":if(s!=="object"){ra(e,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){e.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=ca(""+c),e.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(s!=="input"&&$t(e,s,"name",g.name,g,null),$t(e,s,"formEncType",g.formEncType,g,null),$t(e,s,"formMethod",g.formMethod,g,null),$t(e,s,"formTarget",g.formTarget,g,null)):($t(e,s,"encType",g.encType,g,null),$t(e,s,"method",g.method,g,null),$t(e,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=ca(""+c),e.setAttribute(r,c);break;case"onClick":c!=null&&(e.onclick=er);break;case"onScroll":c!=null&&Lt("scroll",e);break;case"onScrollEnd":c!=null&&Lt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}r=ca(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""+c):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":c===!0?e.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,c):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(r,c):e.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(r):e.setAttribute(r,c);break;case"popover":Lt("beforetoggle",e),Lt("toggle",e),aa(e,"popover",c);break;case"xlinkActuate":pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":aa(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=xd.get(r)||r,aa(e,r,c))}}function ul(e,s,r,c,g,v){switch(r){case"style":Hl(e,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof c=="string"?Pi(e,c):(typeof c=="number"||typeof c=="bigint")&&Pi(e,""+c);break;case"onScroll":c!=null&&Lt("scroll",e);break;case"onScrollEnd":c!=null&&Lt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pl.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),s=r.slice(2,g?r.length-7:void 0),v=e[ue]||null,v=v!=null?v[r]:null,typeof v=="function"&&e.removeEventListener(s,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(s,c,g);break t}r in e?e[r]=c:c===!0?e.setAttribute(r,""):aa(e,r,c)}}}function Ee(e,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",e),Lt("load",e);var c=!1,g=!1,v;for(v in r)if(r.hasOwnProperty(v)){var D=r[v];if(D!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:$t(e,s,v,D,r,null)}}g&&$t(e,s,"srcSet",r.srcSet,r,null),c&&$t(e,s,"src",r.src,r,null);return;case"input":Lt("invalid",e);var B=v=D=g=null,W=null,rt=null;for(c in r)if(r.hasOwnProperty(c)){var ft=r[c];if(ft!=null)switch(c){case"name":g=ft;break;case"type":D=ft;break;case"checked":W=ft;break;case"defaultChecked":rt=ft;break;case"value":v=ft;break;case"defaultValue":B=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(i(137,s));break;default:$t(e,s,c,ft,r,null)}}Il(e,v,B,W,rt,D,g,!1),oa(e);return;case"select":Lt("invalid",e),c=D=v=null;for(g in r)if(r.hasOwnProperty(g)&&(B=r[g],B!=null))switch(g){case"value":v=B;break;case"defaultValue":D=B;break;case"multiple":c=B;default:$t(e,s,g,B,r,null)}s=v,r=D,e.multiple=!!c,s!=null?Mi(e,!!c,s,!1):r!=null&&Mi(e,!!c,r,!0);return;case"textarea":Lt("invalid",e),v=g=c=null;for(D in r)if(r.hasOwnProperty(D)&&(B=r[D],B!=null))switch(D){case"value":c=B;break;case"defaultValue":g=B;break;case"children":v=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(91));break;default:$t(e,s,D,B,r,null)}Ul(e,c,g,v),oa(e);return;case"option":for(W in r)if(r.hasOwnProperty(W)&&(c=r[W],c!=null))switch(W){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:$t(e,s,W,c,r,null)}return;case"dialog":Lt("beforetoggle",e),Lt("toggle",e),Lt("cancel",e),Lt("close",e);break;case"iframe":case"object":Lt("load",e);break;case"video":case"audio":for(c=0;c<$s.length;c++)Lt($s[c],e);break;case"image":Lt("error",e),Lt("load",e);break;case"details":Lt("toggle",e);break;case"embed":case"source":case"link":Lt("error",e),Lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in r)if(r.hasOwnProperty(rt)&&(c=r[rt],c!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:$t(e,s,rt,c,r,null)}return;default:if(Tr(s)){for(ft in r)r.hasOwnProperty(ft)&&(c=r[ft],c!==void 0&&ul(e,s,ft,c,r,void 0));return}}for(B in r)r.hasOwnProperty(B)&&(c=r[B],c!=null&&$t(e,s,B,c,r,null))}function Kf(e,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,D=null,B=null,W=null,rt=null,ft=null;for(ht in r){var mt=r[ht];if(r.hasOwnProperty(ht)&&mt!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":W=mt;default:c.hasOwnProperty(ht)||$t(e,s,ht,null,c,mt)}}for(var ut in c){var ht=c[ut];if(mt=r[ut],c.hasOwnProperty(ut)&&(ht!=null||mt!=null))switch(ut){case"type":v=ht;break;case"name":g=ht;break;case"checked":rt=ht;break;case"defaultChecked":ft=ht;break;case"value":D=ht;break;case"defaultValue":B=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(i(137,s));break;default:ht!==mt&&$t(e,s,ut,ht,c,mt)}}Er(e,D,B,W,rt,ft,v,g);return;case"select":ht=D=B=ut=null;for(v in r)if(W=r[v],r.hasOwnProperty(v)&&W!=null)switch(v){case"value":break;case"multiple":ht=W;default:c.hasOwnProperty(v)||$t(e,s,v,null,c,W)}for(g in c)if(v=c[g],W=r[g],c.hasOwnProperty(g)&&(v!=null||W!=null))switch(g){case"value":ut=v;break;case"defaultValue":B=v;break;case"multiple":D=v;default:v!==W&&$t(e,s,g,v,c,W)}s=B,r=D,c=ht,ut!=null?Mi(e,!!r,ut,!1):!!c!=!!r&&(s!=null?Mi(e,!!r,s,!0):Mi(e,!!r,r?[]:"",!1));return;case"textarea":ht=ut=null;for(B in r)if(g=r[B],r.hasOwnProperty(B)&&g!=null&&!c.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:$t(e,s,B,null,c,g)}for(D in c)if(g=c[D],v=r[D],c.hasOwnProperty(D)&&(g!=null||v!=null))switch(D){case"value":ut=g;break;case"defaultValue":ht=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&$t(e,s,D,g,c,v)}jl(e,ut,ht);return;case"option":for(var Mt in r)if(ut=r[Mt],r.hasOwnProperty(Mt)&&ut!=null&&!c.hasOwnProperty(Mt))switch(Mt){case"selected":e.selected=!1;break;default:$t(e,s,Mt,null,c,ut)}for(W in c)if(ut=c[W],ht=r[W],c.hasOwnProperty(W)&&ut!==ht&&(ut!=null||ht!=null))switch(W){case"selected":e.selected=ut&&typeof ut!="function"&&typeof ut!="symbol";break;default:$t(e,s,W,ut,c,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in r)ut=r[Ct],r.hasOwnProperty(Ct)&&ut!=null&&!c.hasOwnProperty(Ct)&&$t(e,s,Ct,null,c,ut);for(rt in c)if(ut=c[rt],ht=r[rt],c.hasOwnProperty(rt)&&ut!==ht&&(ut!=null||ht!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(i(137,s));break;default:$t(e,s,rt,ut,c,ht)}return;default:if(Tr(s)){for(var Yt in r)ut=r[Yt],r.hasOwnProperty(Yt)&&ut!==void 0&&!c.hasOwnProperty(Yt)&&ul(e,s,Yt,void 0,c,ut);for(ft in c)ut=c[ft],ht=r[ft],!c.hasOwnProperty(ft)||ut===ht||ut===void 0&&ht===void 0||ul(e,s,ft,ut,c,ht);return}}for(var et in r)ut=r[et],r.hasOwnProperty(et)&&ut!=null&&!c.hasOwnProperty(et)&&$t(e,s,et,null,c,ut);for(mt in c)ut=c[mt],ht=r[mt],!c.hasOwnProperty(mt)||ut===ht||ut==null&&ht==null||$t(e,s,mt,ut,c,ht)}var hl=null,dl=null;function nr(e){return e.nodeType===9?e:e.ownerDocument}function Bh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hh(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function fl(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pl=null;function Qf(){var e=window.event;return e&&e.type==="popstate"?e===pl?!1:(pl=e,!0):(pl=null,!1)}var zh=typeof setTimeout=="function"?setTimeout:void 0,Zf=typeof clearTimeout=="function"?clearTimeout:void 0,Gh=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Gh<"u"?function(e){return Gh.resolve(null).then(e).catch(tp)}:zh;function tp(e){setTimeout(function(){throw e})}function Wn(e){return e==="head"}function qh(e,s){var r=s,c=0,g=0;do{var v=r.nextSibling;if(e.removeChild(r),v&&v.nodeType===8)if(r=v.data,r==="/$"){if(0<c&&8>c){r=c;var D=e.ownerDocument;if(r&1&&Ws(D.documentElement),r&2&&Ws(D.body),r&4)for(r=D.head,Ws(r),D=r.firstChild;D;){var B=D.nextSibling,W=D.nodeName;D[us]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||r.removeChild(D),D=B}}if(g===0){e.removeChild(v),ia(s);return}g--}else r==="$"||r==="$?"||r==="$!"?g++:c=r.charCodeAt(0)-48;else c=0;r=v}while(r);ia(s)}function gl(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":gl(r),vr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function ep(e,s,r,c){for(;e.nodeType===1;){var g=r;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[us])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(v=e.getAttribute("rel"),v==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(v!==g.rel||e.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||e.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||e.getAttribute("title")!==(g.title==null?null:g.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(v=e.getAttribute("src"),(v!==(g.src==null?null:g.src)||e.getAttribute("type")!==(g.type==null?null:g.type)||e.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&e.getAttribute("name")===v)return e}else return e;if(e=tn(e.nextSibling),e===null)break}return null}function np(e,s,r){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=tn(e.nextSibling),e===null))return null;return e}function ml(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function ip(e,s){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function tn(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var bl=null;function Vh(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}function Xh(e,s,r){switch(s=nr(r),e){case"html":if(e=s.documentElement,!e)throw Error(i(452));return e;case"head":if(e=s.head,!e)throw Error(i(453));return e;case"body":if(e=s.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ws(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);vr(e)}var Qe=new Map,$h=new Set;function ir(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Rn=V.d;V.d={f:sp,r:ap,D:rp,C:op,L:lp,m:cp,X:hp,S:up,M:dp};function sp(){var e=Rn.f(),s=Ya();return e||s}function ap(e){var s=Ti(e);s!==null&&s.tag===5&&s.type==="form"?fu(s):Rn.r(e)}var as=typeof document>"u"?null:document;function Yh(e,s,r){var c=as;if(c&&typeof s=="string"&&s){var g=qe(s);g='link[rel="'+e+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),$h.has(g)||($h.add(g),e={rel:e,crossOrigin:r,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),Ee(s,"link",e),be(s),c.head.appendChild(s)))}}function rp(e){Rn.D(e),Yh("dns-prefetch",e,null)}function op(e,s){Rn.C(e,s),Yh("preconnect",e,s)}function lp(e,s,r){Rn.L(e,s,r);var c=as;if(c&&e&&s){var g='link[rel="preload"][as="'+qe(s)+'"]';s==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+qe(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+qe(r.imageSizes)+'"]')):g+='[href="'+qe(e)+'"]';var v=g;switch(s){case"style":v=rs(e);break;case"script":v=os(e)}Qe.has(v)||(e=f({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:e,as:s},r),Qe.set(v,e),c.querySelector(g)!==null||s==="style"&&c.querySelector(Ks(v))||s==="script"&&c.querySelector(Qs(v))||(s=c.createElement("link"),Ee(s,"link",e),be(s),c.head.appendChild(s)))}}function cp(e,s){Rn.m(e,s);var r=as;if(r&&e){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+qe(c)+'"][href="'+qe(e)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=os(e)}if(!Qe.has(v)&&(e=f({rel:"modulepreload",href:e},s),Qe.set(v,e),r.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Qs(v)))return}c=r.createElement("link"),Ee(c,"link",e),be(c),r.head.appendChild(c)}}}function up(e,s,r){Rn.S(e,s,r);var c=as;if(c&&e){var g=wi(c).hoistableStyles,v=rs(e);s=s||"default";var D=g.get(v);if(!D){var B={loading:0,preload:null};if(D=c.querySelector(Ks(v)))B.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":s},r),(r=Qe.get(v))&&yl(e,r);var W=D=c.createElement("link");be(W),Ee(W,"link",e),W._p=new Promise(function(rt,ft){W.onload=rt,W.onerror=ft}),W.addEventListener("load",function(){B.loading|=1}),W.addEventListener("error",function(){B.loading|=2}),B.loading|=4,sr(D,s,c)}D={type:"stylesheet",instance:D,count:1,state:B},g.set(v,D)}}}function hp(e,s){Rn.X(e,s);var r=as;if(r&&e){var c=wi(r).hoistableScripts,g=os(e),v=c.get(g);v||(v=r.querySelector(Qs(g)),v||(e=f({src:e,async:!0},s),(s=Qe.get(g))&&vl(e,s),v=r.createElement("script"),be(v),Ee(v,"link",e),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function dp(e,s){Rn.M(e,s);var r=as;if(r&&e){var c=wi(r).hoistableScripts,g=os(e),v=c.get(g);v||(v=r.querySelector(Qs(g)),v||(e=f({src:e,async:!0,type:"module"},s),(s=Qe.get(g))&&vl(e,s),v=r.createElement("script"),be(v),Ee(v,"link",e),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function Wh(e,s,r,c){var g=(g=F.current)?ir(g):null;if(!g)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=rs(r.href),r=wi(g).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=rs(r.href);var v=wi(g).hoistableStyles,D=v.get(e);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(e,D),(v=g.querySelector(Ks(e)))&&!v._p&&(D.instance=v,D.state.loading=5),Qe.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Qe.set(e,r),v||fp(g,e,r,D.state))),s&&c===null)throw Error(i(528,""));return D}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=os(r),r=wi(g).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function rs(e){return'href="'+qe(e)+'"'}function Ks(e){return'link[rel="stylesheet"]['+e+"]"}function Kh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function fp(e,s,r,c){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=e.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Ee(s,"link",r),be(s),e.head.appendChild(s))}function os(e){return'[src="'+qe(e)+'"]'}function Qs(e){return"script[async]"+e}function Qh(e,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=e.querySelector('style[data-href~="'+qe(r.href)+'"]');if(c)return s.instance=c,be(c),c;var g=f({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),be(c),Ee(c,"style",g),sr(c,r.precedence,e),s.instance=c;case"stylesheet":g=rs(r.href);var v=e.querySelector(Ks(g));if(v)return s.state.loading|=4,s.instance=v,be(v),v;c=Kh(r),(g=Qe.get(g))&&yl(c,g),v=(e.ownerDocument||e).createElement("link"),be(v);var D=v;return D._p=new Promise(function(B,W){D.onload=B,D.onerror=W}),Ee(v,"link",c),s.state.loading|=4,sr(v,r.precedence,e),s.instance=v;case"script":return v=os(r.src),(g=e.querySelector(Qs(v)))?(s.instance=g,be(g),g):(c=r,(g=Qe.get(v))&&(c=f({},r),vl(c,g)),e=e.ownerDocument||e,g=e.createElement("script"),be(g),Ee(g,"link",c),e.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,sr(c,r.precedence,e));return s.instance}function sr(e,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,D=0;D<c.length;D++){var B=c[D];if(B.dataset.precedence===s)v=B;else if(v!==g)break}v?v.parentNode.insertBefore(e,v.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(e,s.firstChild))}function yl(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function vl(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var ar=null;function Zh(e,s,r){if(ar===null){var c=new Map,g=ar=new Map;g.set(r,c)}else g=ar,c=g.get(r),c||(c=new Map,g.set(r,c));if(c.has(e))return c;for(c.set(e,null),r=r.getElementsByTagName(e),g=0;g<r.length;g++){var v=r[g];if(!(v[us]||v[Ht]||e==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var D=v.getAttribute(s)||"";D=e+D;var B=c.get(D);B?B.push(v):c.set(D,[v])}}return c}function Jh(e,s,r){e=e.ownerDocument||e,e.head.insertBefore(r,s==="title"?e.querySelector("head > title"):null)}function pp(e,s,r){if(r===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function td(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Zs=null;function gp(){}function mp(e,s,r){if(Zs===null)throw Error(i(475));var c=Zs;if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=rs(r.href),v=e.querySelector(Ks(g));if(v){e=v._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=rr.bind(c),e.then(c,c)),s.state.loading|=4,s.instance=v,be(v);return}v=e.ownerDocument||e,r=Kh(r),(g=Qe.get(g))&&yl(r,g),v=v.createElement("link"),be(v);var D=v;D._p=new Promise(function(B,W){D.onload=B,D.onerror=W}),Ee(v,"link",r),s.instance=v}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=rr.bind(c),e.addEventListener("load",s),e.addEventListener("error",s))}}function bp(){if(Zs===null)throw Error(i(475));var e=Zs;return e.stylesheets&&e.count===0&&Al(e,e.stylesheets),0<e.count?function(s){var r=setTimeout(function(){if(e.stylesheets&&Al(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(r)}}:null}function rr(){if(this.count--,this.count===0){if(this.stylesheets)Al(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var or=null;function Al(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,or=new Map,s.forEach(yp,e),or=null,rr.call(e))}function yp(e,s){if(!(s.state.loading&4)){var r=or.get(e);if(r)var c=r.get(null);else{r=new Map,or.set(e,r);for(var g=e.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var D=g[v];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(r.set(D.dataset.precedence,D),c=D)}c&&r.set(null,c)}g=s.instance,D=g.getAttribute("data-precedence"),v=r.get(D)||c,v===c&&r.set(null,g),r.set(D,g),this.count++,c=rr.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(g,e.firstChild)),s.state.loading|=4}}var Js={$$typeof:O,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function vp(e,s,r,c,g,v,D,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.hiddenUpdates=me(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function ed(e,s,r,c,g,v,D,B,W,rt,ft,mt){return e=new vp(e,s,r,D,B,W,rt,mt),s=1,v===!0&&(s|=24),v=Fe(3,null,null,s),e.current=v,v.stateNode=e,s=to(),s.refCount++,e.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:r,cache:s},so(v),e}function nd(e){return e?(e=ji,e):ji}function id(e,s,r,c,g,v){g=nd(g),c.context===null?c.context=g:c.pendingContext=g,c=Fn(s),c.payload={element:r},v=v===void 0?null:v,v!==null&&(c.callback=v),r=In(e,c,s),r!==null&&(He(r,e,s),Ms(r,e,s))}function sd(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function _l(e,s){sd(e,s),(e=e.alternate)&&sd(e,s)}function ad(e){if(e.tag===13){var s=Ii(e,67108864);s!==null&&He(s,e,67108864),_l(e,67108864)}}var lr=!0;function Ap(e,s,r,c){var g=I.T;I.T=null;var v=V.p;try{V.p=2,Sl(e,s,r,c)}finally{V.p=v,I.T=g}}function _p(e,s,r,c){var g=I.T;I.T=null;var v=V.p;try{V.p=8,Sl(e,s,r,c)}finally{V.p=v,I.T=g}}function Sl(e,s,r,c){if(lr){var g=El(c);if(g===null)cl(e,s,c,cr,r),od(e,c);else if(Ep(g,e,s,r,c))c.stopPropagation();else if(od(e,c),s&4&&-1<Sp.indexOf(e)){for(;g!==null;){var v=Ti(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var D=Ot(v.pendingLanes);if(D!==0){var B=v;for(B.pendingLanes|=2,B.entangledLanes|=2;D;){var W=1<<31-jt(D);B.entanglements[1]|=W,D&=~W}un(v),(qt&6)===0&&(Xa=At()+500,Xs(0))}}break;case 13:B=Ii(v,2),B!==null&&He(B,v,2),Ya(),_l(v,2)}if(v=El(c),v===null&&cl(e,s,c,cr,r),v===g)break;g=v}g!==null&&c.stopPropagation()}else cl(e,s,c,null,r)}}function El(e){return e=Cr(e),xl(e)}var cr=null;function xl(e){if(cr=null,e=xi(e),e!==null){var s=o(e);if(s===null)e=null;else{var r=s.tag;if(r===13){if(e=l(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return cr=e,null}function rd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case Tt:return 2;case _t:return 8;case It:case zt:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var Tl=!1,Kn=null,Qn=null,Zn=null,ta=new Map,ea=new Map,Jn=[],Sp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function od(e,s){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":ta.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(s.pointerId)}}function na(e,s,r,c,g,v){return e===null||e.nativeEvent!==v?(e={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Ti(s),s!==null&&ad(s)),e):(e.eventSystemFlags|=c,s=e.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),e)}function Ep(e,s,r,c,g){switch(s){case"focusin":return Kn=na(Kn,e,s,r,c,g),!0;case"dragenter":return Qn=na(Qn,e,s,r,c,g),!0;case"mouseover":return Zn=na(Zn,e,s,r,c,g),!0;case"pointerover":var v=g.pointerId;return ta.set(v,na(ta.get(v)||null,e,s,r,c,g)),!0;case"gotpointercapture":return v=g.pointerId,ea.set(v,na(ea.get(v)||null,e,s,r,c,g)),!0}return!1}function ld(e){var s=xi(e.target);if(s!==null){var r=o(s);if(r!==null){if(s=r.tag,s===13){if(s=l(r),s!==null){e.blockedOn=s,cs(e.priority,function(){if(r.tag===13){var c=Be();c=On(c);var g=Ii(r,c);g!==null&&He(g,r,c),_l(r,c)}});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ur(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=El(e.nativeEvent);if(r===null){r=e.nativeEvent;var c=new r.constructor(r.type,r);wr=c,r.target.dispatchEvent(c),wr=null}else return s=Ti(r),s!==null&&ad(s),e.blockedOn=r,!1;s.shift()}return!0}function cd(e,s,r){ur(e)&&r.delete(s)}function xp(){Tl=!1,Kn!==null&&ur(Kn)&&(Kn=null),Qn!==null&&ur(Qn)&&(Qn=null),Zn!==null&&ur(Zn)&&(Zn=null),ta.forEach(cd),ea.forEach(cd)}function hr(e,s){e.blockedOn===s&&(e.blockedOn=null,Tl||(Tl=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,xp)))}var dr=null;function ud(e){dr!==e&&(dr=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){dr===e&&(dr=null);for(var s=0;s<e.length;s+=3){var r=e[s],c=e[s+1],g=e[s+2];if(typeof c!="function"){if(xl(c||r)===null)continue;break}var v=Ti(r);v!==null&&(e.splice(s,3),s-=3,xo(v,{pending:!0,data:g,method:r.method,action:c},c,g))}}))}function ia(e){function s(W){return hr(W,e)}Kn!==null&&hr(Kn,e),Qn!==null&&hr(Qn,e),Zn!==null&&hr(Zn,e),ta.forEach(s),ea.forEach(s);for(var r=0;r<Jn.length;r++){var c=Jn[r];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Jn.length&&(r=Jn[0],r.blockedOn===null);)ld(r),r.blockedOn===null&&Jn.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var g=r[c],v=r[c+1],D=g[ue]||null;if(typeof v=="function")D||ud(r);else if(D){var B=null;if(v&&v.hasAttribute("formAction")){if(g=v,D=v[ue]||null)B=D.formAction;else if(xl(g)!==null)continue}else B=D.action;typeof B=="function"?r[c+1]=B:(r.splice(c,3),c-=3),ud(r)}}}function wl(e){this._internalRoot=e}fr.prototype.render=wl.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,c=Be();id(r,c,e,s,null,null)},fr.prototype.unmount=wl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;id(e.current,2,null,e,null,null),Ya(),s[an]=null}};function fr(e){this._internalRoot=e}fr.prototype.unstable_scheduleHydration=function(e){if(e){var s=Ei();e={blockedOn:null,target:e,priority:s};for(var r=0;r<Jn.length&&s!==0&&s<Jn[r].priority;r++);Jn.splice(r,0,e),r===0&&ld(e)}};var hd=t.version;if(hd!=="19.1.1")throw Error(i(527,hd,"19.1.1"));V.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(s),e=e!==null?d(e):null,e=e===null?null:e.stateNode,e};var Tp={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pr.isDisabled&&pr.supportsFiber)try{ge=pr.inject(Tp),Gt=pr}catch{}}return reactDomClient_production.createRoot=function(e,s){if(!a(e))throw Error(i(299));var r=!1,c="",g=Cu,v=Ru,D=Mu,B=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(B=s.unstable_transitionCallbacks)),s=ed(e,1,!1,null,null,r,c,g,v,D,B,null),e[an]=s.current,ll(e),new wl(s)},reactDomClient_production.hydrateRoot=function(e,s,r){if(!a(e))throw Error(i(299));var c=!1,g="",v=Cu,D=Ru,B=Mu,W=null,rt=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(D=r.onCaughtError),r.onRecoverableError!==void 0&&(B=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(W=r.unstable_transitionCallbacks),r.formState!==void 0&&(rt=r.formState)),s=ed(e,1,!0,s,r??null,c,g,v,D,B,W,rt),s.context=nd(null),r=s.current,c=Be(),c=On(c),g=Fn(c),g.callback=null,In(r,g,c),r=c,s.current.lanes=r,ze(s,r),un(s),e[an]=s.current,ll(e),new fr(s)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var propTypes$b={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=u,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var u=requireReactPropTypesSecret();function t(){}function n(){}return n.resetWarningCache=t,factoryWithThrowingShims=function(){function i(l,h,p,d,f,m){if(m!==u){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function a(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes$b.exports=requireFactoryWithThrowingShims()()),propTypes$b.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,(function(u){(function(){var t={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var h=arguments[l];h&&(o=a(o,i(h)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var h in o)t.call(o,h)&&o[h]&&(l=a(l,h));return l}function a(o,l){return l?o?o+" "+l:o+l:o}u.exports?(n.default=n,u.exports=n):window.classNames=n})()})(classnames)),classnames.exports}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs(classnamesExports);function _typeof$2(u){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(u)}var globalCssModule;function mapToCssModules(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalCssModule;return t?u.split(" ").map(function(n){return t[n]||n}).join(" "):u}var warned={};function warnOnce(u){warned[u]||(typeof console<"u"&&console.error(u),warned[u]=!0)}function deprecated$1(u,t){return function(i,a,o){i[a]!==null&&typeof i[a]<"u"&&warnOnce('"'.concat(a,'" property of "').concat(o,`" has been deprecated.
`).concat(t));for(var l=arguments.length,h=new Array(l>3?l-3:0),p=3;p<l;p++)h[p-3]=arguments[p];return u.apply(void 0,[i,a,o].concat(h))}}var Element=(typeof window>"u"?"undefined":_typeof$2(window))==="object"&&window.Element||function(){};function DOMElement(u,t,n){if(!(u[t]instanceof Element))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")}PropTypes.oneOfType([PropTypes.string,PropTypes.func,DOMElement,PropTypes.shape({current:PropTypes.any})]);var tagPropType=PropTypes.oneOfType([PropTypes.func,PropTypes.string,PropTypes.shape({$$typeof:PropTypes.symbol,render:PropTypes.func}),PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func,PropTypes.string,PropTypes.shape({$$typeof:PropTypes.symbol,render:PropTypes.func})]))]);function isObject(u){var t=_typeof$2(u);return u!=null&&(t==="object"||t==="function")}var _excluded$b=["className","cssModule","fluid","tag"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$b.apply(this,arguments)}function _objectWithoutProperties$b(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$b(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$b(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$a={tag:tagPropType,fluid:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),className:PropTypes.string,cssModule:PropTypes.object};function Container(u){var t=u.className,n=u.cssModule,i=u.fluid,a=u.tag,o=a===void 0?"div":a,l=_objectWithoutProperties$b(u,_excluded$b),h="container";i===!0?h="container-fluid":i&&(h="container-".concat(i));var p=mapToCssModules(classNames(t,h),n);return React.createElement(o,_extends$b({},l,{className:p}))}Container.propTypes=propTypes$a;var _excluded$a=["className","cssModule","noGutters","tag","widths"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$a.apply(this,arguments)}function _objectWithoutProperties$a(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$a(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$a(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var rowColWidths=["xs","sm","md","lg","xl","xxl"],rowColsPropType=PropTypes.oneOfType([PropTypes.number,PropTypes.string]),propTypes$9={tag:tagPropType,noGutters:deprecated$1(PropTypes.bool,"Please use Bootstrap 5 gutter utility classes. https://getbootstrap.com/docs/5.0/layout/gutters/"),className:PropTypes.string,cssModule:PropTypes.object,xs:rowColsPropType,sm:rowColsPropType,md:rowColsPropType,lg:rowColsPropType,xl:rowColsPropType,xxl:rowColsPropType,widths:PropTypes.array};function Row(u){var t=u.className,n=u.cssModule,i=u.noGutters,a=u.tag,o=a===void 0?"div":a,l=u.widths,h=l===void 0?rowColWidths:l,p=_objectWithoutProperties$a(u,_excluded$a),d=[];h.forEach(function(m,y){var b=u[m];if(delete p[m],!!b){var A=!y;d.push(A?"row-cols-".concat(b):"row-cols-".concat(m,"-").concat(b))}});var f=mapToCssModules(classNames(t,i?"gx-0":null,"row",d),n);return React.createElement(o,_extends$a({},p,{className:f}))}Row.propTypes=propTypes$9;var _excluded$9=["className","cssModule","widths","tag"];function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$9.apply(this,arguments)}function _objectWithoutProperties$9(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$9(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$9(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}function _defineProperty$3(u,t,n){return t in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}var colWidths=["xs","sm","md","lg","xl","xxl"],stringOrNumberProp=PropTypes.oneOfType([PropTypes.number,PropTypes.string]),columnProps=PropTypes.oneOfType([PropTypes.bool,PropTypes.number,PropTypes.string,PropTypes.shape({size:PropTypes.oneOfType([PropTypes.bool,PropTypes.number,PropTypes.string]),order:stringOrNumberProp,offset:stringOrNumberProp})]),propTypes$8={tag:tagPropType,xs:columnProps,sm:columnProps,md:columnProps,lg:columnProps,xl:columnProps,xxl:columnProps,className:PropTypes.string,cssModule:PropTypes.object,widths:PropTypes.array},getColumnSizeClass=function(t,n,i){return i===!0||i===""?t?"col":"col-".concat(n):i==="auto"?t?"col-auto":"col-".concat(n,"-auto"):t?"col-".concat(i):"col-".concat(n,"-").concat(i)},getColumnClasses=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:colWidths,a=t,o=[];return i.forEach(function(l,h){var p=a[l];if(delete a[l],!(!p&&p!=="")){var d=!h;if(isObject(p)){var f,m=d?"-":"-".concat(l,"-"),y=getColumnSizeClass(d,l,p.size);o.push(mapToCssModules(classNames((f={},_defineProperty$3(f,y,p.size||p.size===""),_defineProperty$3(f,"order".concat(m).concat(p.order),p.order||p.order===0),_defineProperty$3(f,"offset".concat(m).concat(p.offset),p.offset||p.offset===0),f)),n))}else{var b=getColumnSizeClass(d,l,p);o.push(b)}}}),{colClasses:o,modifiedAttributes:a}};function Col(u){var t=u.className,n=u.cssModule,i=u.widths,a=i===void 0?colWidths:i,o=u.tag,l=o===void 0?"div":o,h=_objectWithoutProperties$9(u,_excluded$9),p=getColumnClasses(h,n,a),d=p.modifiedAttributes,f=p.colClasses;f.length||f.push("col");var m=mapToCssModules(classNames(t,f),n);return React.createElement(l,_extends$9({},d,{className:m}))}Col.propTypes=propTypes$8;var _excluded$8=["expand","className","cssModule","light","dark","fixed","sticky","color","container","tag","children"];function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$8.apply(this,arguments)}function _defineProperty$2(u,t,n){return t in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}function _objectWithoutProperties$8(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$8(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$8(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$7={children:PropTypes.node,className:PropTypes.string,color:PropTypes.string,container:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),cssModule:PropTypes.object,dark:PropTypes.bool,expand:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),fixed:PropTypes.string,light:PropTypes.bool,role:PropTypes.string,sticky:PropTypes.string,tag:tagPropType},getExpandClass=function(t){return t===!1?!1:t===!0||t==="xs"?"navbar-expand":"navbar-expand-".concat(t)};function Navbar(u){var t,n=u.expand,i=n===void 0?!1:n,a=u.className,o=u.cssModule,l=u.light,h=u.dark,p=u.fixed,d=u.sticky,f=u.color,m=u.container,y=m===void 0?"fluid":m,b=u.tag,A=b===void 0?"nav":b,_=u.children,T=_objectWithoutProperties$8(u,_excluded$8),w=mapToCssModules(classNames(a,"navbar",getExpandClass(i),(t={"navbar-light":l,"navbar-dark":h},_defineProperty$2(t,"bg-".concat(f),f),_defineProperty$2(t,"fixed-".concat(p),p),_defineProperty$2(t,"sticky-".concat(d),d),t)),o),N=y&&y===!0?"container":"container-".concat(y);return React.createElement(A,_extends$8({},T,{className:w}),y?React.createElement("div",{className:N},_):_)}Navbar.propTypes=propTypes$7;var _excluded$7=["className","cssModule","tag"];function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$7.apply(this,arguments)}function _objectWithoutProperties$7(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$7(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$7(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$6={className:PropTypes.string,cssModule:PropTypes.object,tag:tagPropType};function NavbarBrand(u){var t=u.className,n=u.cssModule,i=u.tag,a=i===void 0?"a":i,o=_objectWithoutProperties$7(u,_excluded$7),l=mapToCssModules(classNames(t,"navbar-brand"),n);return React.createElement(a,_extends$7({},o,{className:l}))}NavbarBrand.propTypes=propTypes$6;var _excluded$6=["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$6.apply(this,arguments)}function _objectWithoutProperties$6(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$6(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$6(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$5={card:PropTypes.bool,className:PropTypes.string,cssModule:PropTypes.object,fill:PropTypes.bool,horizontal:PropTypes.oneOf(["center","end"]),justified:PropTypes.bool,navbar:PropTypes.bool,pills:PropTypes.bool,tabs:PropTypes.bool,tag:tagPropType,vertical:PropTypes.oneOfType([PropTypes.bool,PropTypes.string])},getVerticalClass=function(t){return t===!1?!1:t===!0||t==="xs"?"flex-column":"flex-".concat(t,"-column")};function Nav(u){var t=u.className,n=u.cssModule,i=u.tabs,a=u.pills,o=u.vertical,l=o===void 0?!1:o,h=u.horizontal,p=u.justified,d=u.fill,f=u.navbar,m=u.card,y=u.tag,b=y===void 0?"ul":y,A=_objectWithoutProperties$6(u,_excluded$6),_=mapToCssModules(classNames(t,f?"navbar-nav":"nav",h?"justify-content-".concat(h):!1,getVerticalClass(l),{"nav-tabs":i,"card-header-tabs":m&&i,"nav-pills":a,"card-header-pills":m&&a,"nav-justified":p,"nav-fill":d}),n);return React.createElement(b,_extends$6({},A,{className:_}))}Nav.propTypes=propTypes$5;var _excluded$5=["className","cssModule","active","tag"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$5.apply(this,arguments)}function _objectWithoutProperties$5(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$5(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$5(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$4={active:PropTypes.bool,className:PropTypes.string,cssModule:PropTypes.object,tag:tagPropType};function NavItem(u){var t=u.className,n=u.cssModule,i=u.active,a=u.tag,o=a===void 0?"li":a,l=_objectWithoutProperties$5(u,_excluded$5),h=mapToCssModules(classNames(t,"nav-item",i?"active":!1),n);return React.createElement(o,_extends$5({},l,{className:h}))}NavItem.propTypes=propTypes$4;function _typeof$1(u){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(u)}var _excluded$4=["className","cssModule","active","tag","innerRef"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$4.apply(this,arguments)}function _objectWithoutProperties$4(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$4(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$4(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}function _classCallCheck$1(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(u,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function _createClass$1(u,t,n){return t&&_defineProperties$1(u.prototype,t),Object.defineProperty(u,"prototype",{writable:!1}),u}function _inherits$1(u,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(t&&t.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),t&&_setPrototypeOf$1(u,t)}function _setPrototypeOf$1(u,t){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},_setPrototypeOf$1(u,t)}function _createSuper$1(u){var t=_isNativeReflectConstruct$1();return function(){var i=_getPrototypeOf$1(u),a;if(t){var o=_getPrototypeOf$1(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn$1(this,a)}}function _possibleConstructorReturn$1(u,t){if(t&&(_typeof$1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(u)}function _assertThisInitialized$1(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(u){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$1(u)}var propTypes$3={active:PropTypes.bool,className:PropTypes.string,cssModule:PropTypes.object,disabled:PropTypes.bool,href:PropTypes.any,innerRef:PropTypes.oneOfType([PropTypes.object,PropTypes.func,PropTypes.string]),onClick:PropTypes.func,tag:tagPropType},NavLink=(function(u){_inherits$1(n,u);var t=_createSuper$1(n);function n(i){var a;return _classCallCheck$1(this,n),a=t.call(this,i),a.onClick=a.onClick.bind(_assertThisInitialized$1(a)),a}return _createClass$1(n,[{key:"onClick",value:function(a){if(this.props.disabled){a.preventDefault();return}this.props.href==="#"&&a.preventDefault(),this.props.onClick&&this.props.onClick(a)}},{key:"render",value:function(){var a=this.props,o=a.className,l=a.cssModule,h=a.active,p=a.tag,d=p===void 0?"a":p,f=a.innerRef,m=_objectWithoutProperties$4(a,_excluded$4),y=mapToCssModules(classNames(o,"nav-link",{disabled:m.disabled,active:h}),l);return React.createElement(d,_extends$4({},m,{ref:f,onClick:this.onClick,className:y}))}}]),n})(React.Component);NavLink.propTypes=propTypes$3;var _excluded$3=["className","cssModule","variant","innerRef"];function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$3.apply(this,arguments)}function ownKeys$1(u,t){var n=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(u,a).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(u){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(u,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(n,i))})}return u}function _defineProperty$1(u,t,n){return t in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}function _objectWithoutProperties$3(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$3(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$3(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$2={active:PropTypes.bool,"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"]),className:PropTypes.string,cssModule:PropTypes.object,innerRef:PropTypes.oneOfType([PropTypes.object,PropTypes.string,PropTypes.func])};function CloseButton(u){var t=u.className;u.cssModule;var n=u.variant,i=u.innerRef,a=_objectWithoutProperties$3(u,_excluded$3),o=mapToCssModules(classNames(t,"btn-close",n&&"btn-close-".concat(n)));return React.createElement("button",_extends$3({ref:i,type:"button",className:o},_objectSpread$1({"aria-label":"close"},a)))}CloseButton.propTypes=propTypes$2;var _excluded$2=["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"];function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$2.apply(this,arguments)}function _objectWithoutProperties$2(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$2(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$2(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}var propTypes$1={active:PropTypes.bool,"aria-label":PropTypes.string,block:PropTypes.bool,children:PropTypes.node,className:PropTypes.string,cssModule:PropTypes.object,close:PropTypes.bool,color:PropTypes.string,disabled:PropTypes.bool,innerRef:PropTypes.oneOfType([PropTypes.object,PropTypes.func,PropTypes.string]),onClick:PropTypes.func,outline:PropTypes.bool,size:PropTypes.string,tag:tagPropType};function Button(u){var t=reactExports.useCallback(function(N){if(u.disabled){N.preventDefault();return}if(u.onClick)return u.onClick(N)},[u.onClick,u.disabled]),n=u.active,i=u["aria-label"],a=u.block,o=u.className,l=u.close,h=u.cssModule,p=u.color,d=p===void 0?"secondary":p,f=u.outline,m=u.size,y=u.tag,b=y===void 0?"button":y,A=u.innerRef,_=_objectWithoutProperties$2(u,_excluded$2);if(l)return React.createElement(CloseButton,_);var T="btn".concat(f?"-outline":"","-").concat(d),w=mapToCssModules(classNames(o,"btn",T,m?"btn-".concat(m):!1,a?"d-block w-100":!1,{active:n,disabled:u.disabled}),h);return _.href&&b==="button"&&(b="a"),React.createElement(b,_extends$2({type:b==="button"&&_.onClick?"button":void 0},_,{className:w,ref:A,onClick:t,"aria-label":i}))}Button.propTypes=propTypes$1;function _typeof(u){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(u)}var _excluded$1=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"];function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends$1.apply(this,arguments)}function _objectWithoutProperties$1(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose$1(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose$1(u,t){if(u==null)return{};var n={},i=Object.keys(u),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=u[a]);return n}function _classCallCheck(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(u,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function _createClass(u,t,n){return t&&_defineProperties(u.prototype,t),Object.defineProperty(u,"prototype",{writable:!1}),u}function _inherits(u,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(t&&t.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),t&&_setPrototypeOf(u,t)}function _setPrototypeOf(u,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},_setPrototypeOf(u,t)}function _createSuper(u){var t=_isNativeReflectConstruct();return function(){var i=_getPrototypeOf(u),a;if(t){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(u,t){if(t&&(_typeof(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(u)}function _assertThisInitialized(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(u){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(u)}var propTypes={children:PropTypes.node,type:PropTypes.string,size:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),bsSize:PropTypes.string,valid:PropTypes.bool,invalid:PropTypes.bool,tag:tagPropType,innerRef:PropTypes.oneOfType([PropTypes.object,PropTypes.func,PropTypes.string]),plaintext:PropTypes.bool,addon:PropTypes.bool,className:PropTypes.string,cssModule:PropTypes.object},Input=(function(u){_inherits(n,u);var t=_createSuper(n);function n(i){var a;return _classCallCheck(this,n),a=t.call(this,i),a.getRef=a.getRef.bind(_assertThisInitialized(a)),a.focus=a.focus.bind(_assertThisInitialized(a)),a}return _createClass(n,[{key:"getRef",value:function(a){this.props.innerRef&&this.props.innerRef(a),this.ref=a}},{key:"focus",value:function(){this.ref&&this.ref.focus()}},{key:"render",value:function(){var a=this.props,o=a.className,l=a.cssModule,h=a.type,p=h===void 0?"text":h,d=a.bsSize,f=a.valid,m=a.invalid,y=a.tag,b=a.addon,A=a.plaintext,_=a.innerRef,T=_objectWithoutProperties$1(a,_excluded$1),w=["switch","radio","checkbox"].indexOf(p)>-1,N=/\D/g,O=p==="textarea",P=p==="select",E=p==="range",C=y||(P||O?p:"input"),L="form-control";A?(L="".concat(L,"-plaintext"),C=y||"input"):E?L="form-range":P?L="form-select":w&&(b?L=null:L="form-check-input"),T.size&&N.test(T.size)&&(warnOnce(`Please use the prop "bsSize" instead of the "size" to bootstrap's input sizing.`),d=T.size,delete T.size);var X=mapToCssModules(classNames(o,m&&"is-invalid",f&&"is-valid",d?P?"form-select-".concat(d):"form-control-".concat(d):!1,L),l);return(C==="input"||y&&typeof y=="function")&&(T.type=p==="switch"?"checkbox":p),T.children&&!(A||p==="select"||typeof C!="string"||C==="select")&&(warnOnce('Input with a type of "'.concat(p,'" cannot have children. Please use "value"/"defaultValue" instead.')),delete T.children),React.createElement(C,_extends$1({},T,{ref:_,className:X,"aria-invalid":m}))}}]),n})(React.Component);Input.propTypes=propTypes;var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(u,t){if(u==null)return{};var n=_objectWithoutPropertiesLoose(u,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(u);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(n[i]=u[i])}return n}function _objectWithoutPropertiesLoose(u,t){if(u==null)return{};var n={};for(var i in u)if(Object.prototype.hasOwnProperty.call(u,i)){if(t.indexOf(i)>=0)continue;n[i]=u[i]}return n}function _extends(){return _extends=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},_extends.apply(this,arguments)}function ownKeys(u,t){var n=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(u,a).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(u){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(i){_defineProperty(u,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(n,i))})}return u}function _defineProperty(u,t,n){return t=_toPropertyKey(t),t in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}function _toPropertyKey(u){var t=_toPrimitive(u,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive(u,t){if(typeof u!="object"||!u)return u;var n=u[Symbol.toPrimitive];if(n!==void 0){var i=n.call(u,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(u)}function Tree2Element(u){return u&&u.map((t,n)=>React.createElement(t.tag,_objectSpread({key:n},t.attr),Tree2Element(t.child)))}function GenIcon(u){return t=>React.createElement(IconBase,_extends({attr:_objectSpread({},u.attr)},t),Tree2Element(u.child))}function IconBase(u){var t=n=>{var{attr:i,size:a,title:o}=u,l=_objectWithoutProperties(u,_excluded),h=a||n.size||"1em",p;return n.className&&(p=n.className),u.className&&(p=(p?p+" ":"")+u.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,l,{className:p,style:_objectSpread(_objectSpread({color:u.color||n.color},n.style),u.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&React.createElement("title",null,o),u.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,n=>t(n)):t(DefaultContext)}function FaInstagram(u){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(u)}function FaTwitter(u){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(u)}function FaYoutube(u){return GenIcon({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(u)}function FaArrowUp(u){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(u)}function FaBold(u){return GenIcon({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M333.49 238a122 122 0 0 0 27-65.21C367.87 96.49 308 32 233.42 32H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h31.87v288H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h209.32c70.8 0 134.14-51.75 141-122.4 4.74-48.45-16.39-92.06-50.83-119.6zM145.66 112h87.76a48 48 0 0 1 0 96h-87.76zm87.76 288h-87.76V288h87.76a56 56 0 0 1 0 112z"},child:[]}]})(u)}function FaItalic(u){return GenIcon({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M320 48v32a16 16 0 0 1-16 16h-62.76l-80 320H208a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h62.76l80-320H112a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16z"},child:[]}]})(u)}function FaListUl(u){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(u)}function FaMoon(u){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(u)}function FaRedo(u){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(u)}function FaSun(u){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(u)}function FaUnderline(u){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 64h32v160c0 88.22 71.78 160 160 160s160-71.78 160-160V64h32a16 16 0 0 0 16-16V16a16 16 0 0 0-16-16H272a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h32v160a80 80 0 0 1-160 0V64h32a16 16 0 0 0 16-16V16a16 16 0 0 0-16-16H32a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm400 384H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(u)}function FaUndo(u){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(u)}const LanguageContext=reactExports.createContext();function useLanguage(){const u=reactExports.useContext(LanguageContext);if(!u)throw new Error("useLanguage must be used within LanguageProvider");return u}function Header({darkMode:u,setDarkMode:t}){const{language:n,t:i,changeLanguage:a}=useLanguage();return jsxRuntimeExports.jsxs(Navbar,{color:u?"dark":"light",dark:u,light:!u,expand:"md",fixed:"top",className:`header-navbar ${u?"bg-dark":"bg-white shadow-sm"}`,children:[jsxRuntimeExports.jsx(NavbarBrand,{href:"/",className:"mr-auto brand-logo",children:i("header-title")}),jsxRuntimeExports.jsxs(Nav,{navbar:!0,className:"mx-auto main-navigation",children:[jsxRuntimeExports.jsx(NavItem,{children:jsxRuntimeExports.jsx(NavLink,{href:"#tools",className:`nav-link ${u?"text-light":"text-dark"}`,children:i("nav-tools")})}),jsxRuntimeExports.jsx(NavItem,{children:jsxRuntimeExports.jsx(NavLink,{href:"#about",className:`nav-link ${u?"text-light":"text-dark"}`,children:i("nav-about")})}),jsxRuntimeExports.jsx(NavItem,{children:jsxRuntimeExports.jsx(NavLink,{href:"#contact",className:`nav-link ${u?"text-light":"text-dark"}`,children:i("nav-contact")})})]}),jsxRuntimeExports.jsxs("div",{className:"d-flex align-items-center header-controls",children:[jsxRuntimeExports.jsxs(Input,{type:"select",value:n,onChange:o=>a(o.target.value),className:`mr-2 language-selector ${u?"bg-dark text-light":"bg-white text-dark"}`,children:[jsxRuntimeExports.jsx("option",{value:"hi",children:""}),jsxRuntimeExports.jsx("option",{value:"en",children:"English"})]}),jsxRuntimeExports.jsx(Button,{color:"link",onClick:()=>t(!u),className:`dark-mode-toggle ${u?"text-warning":"text-dark"}`,children:u?jsxRuntimeExports.jsx(FaSun,{}):jsxRuntimeExports.jsx(FaMoon,{})})]})]})}function Footer(){const{t:u}=useLanguage();return jsxRuntimeExports.jsx("footer",{className:"site-footer",children:jsxRuntimeExports.jsx("div",{className:"footer-container",children:jsxRuntimeExports.jsxs("p",{className:"footer-text",children:[" ",new Date().getFullYear()," ",u("footer-text")]})})})}function BackToTop(){const[u,t]=reactExports.useState(!1);reactExports.useEffect(()=>{const i=()=>{window.pageYOffset>300?t(!0):t(!1)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsx(Button,{color:"primary",className:`fixed-bottom me-3 mb-3 rounded-circle ${u?"":"invisible"}`,style:{right:0,width:"50px",height:"50px"},onClick:n,children:jsxRuntimeExports.jsx(FaArrowUp,{size:20})})}const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(u){Number.isInteger(u)&&(verbosity=u)}function getVerbosityLevel(){return verbosity}function info(u){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${u}`)}function warn(u){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${u}`)}function unreachable(u){throw new Error(u)}function assert(u,t){u||unreachable(t)}function _isValidProtocol(u){switch(u?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(u,t=null,n=null){if(!u)return null;if(n&&typeof u=="string"&&(n.addDefaultProtocol&&u.startsWith("www.")&&u.match(/\./g)?.length>=2&&(u=`http://${u}`),n.tryConvertEncoding))try{u=stringToUTF8String(u)}catch{}const i=t?URL.parse(u,t):URL.parse(u);return _isValidProtocol(i)?i:null}function updateUrlHash(u,t,n=!1){const i=URL.parse(u);return i?(i.hash=t,i.href):n&&createValidAbsoluteUrl(u,"http://example.com")?u.split("#",1)[0]+`${t?`#${t}`:""}`:""}function shadow(u,t,n,i=!1){return Object.defineProperty(u,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const BaseException=(function(){function t(n,i){this.message=n,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class PasswordException extends BaseException{constructor(t,n){super(t,"PasswordException"),this.code=n}}class UnknownErrorException extends BaseException{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class InvalidPDFException extends BaseException{constructor(t){super(t,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(t,n,i){super(t,"ResponseException"),this.status=n,this.missing=i}}class FormatError extends BaseException{constructor(t){super(t,"FormatError")}}class AbortException extends BaseException{constructor(t){super(t,"AbortException")}}function bytesToString(u){(typeof u!="object"||u?.length===void 0)&&unreachable("Invalid argument for bytesToString");const t=u.length,n=8192;if(t<n)return String.fromCharCode.apply(null,u);const i=[];for(let a=0;a<t;a+=n){const o=Math.min(a+n,t),l=u.subarray(a,o);i.push(String.fromCharCode.apply(null,l))}return i.join("")}function stringToBytes(u){typeof u!="string"&&unreachable("Invalid argument for stringToBytes");const t=u.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=u.charCodeAt(i)&255;return n}function string32(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function isLittleEndian(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:n}=navigator;return shadow(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));class Util{static makeHexColor(t,n,i){return`#${hexNumbers[t]}${hexNumbers[n]}${hexNumbers[i]}`}static scaleMinMax(t,n){let i;t[0]?(t[0]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=t[3],n[3]*=t[3]):(i=n[0],n[0]=n[1],n[1]=i,i=n[2],n[2]=n[3],n[3]=i,t[1]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static applyTransform(t,n,i=0){const a=t[i],o=t[i+1];t[i]=a*n[0]+o*n[2]+n[4],t[i+1]=a*n[1]+o*n[3]+n[5]}static applyTransformToBezier(t,n,i=0){const a=n[0],o=n[1],l=n[2],h=n[3],p=n[4],d=n[5];for(let f=0;f<6;f+=2){const m=t[i+f],y=t[i+f+1];t[i+f]=m*a+y*l+p,t[i+f+1]=m*o+y*h+d}}static applyInverseTransform(t,n){const i=t[0],a=t[1],o=n[0]*n[3]-n[1]*n[2];t[0]=(i*n[3]-a*n[2]+n[2]*n[5]-n[4]*n[3])/o,t[1]=(-i*n[1]+a*n[0]+n[4]*n[1]-n[5]*n[0])/o}static axialAlignedBoundingBox(t,n,i){const a=n[0],o=n[1],l=n[2],h=n[3],p=n[4],d=n[5],f=t[0],m=t[1],y=t[2],b=t[3];let A=a*f+p,_=A,T=a*y+p,w=T,N=h*m+d,O=N,P=h*b+d,E=P;if(o!==0||l!==0){const C=o*f,L=o*y,X=l*m,q=l*b;A+=X,w+=X,T+=q,_+=q,N+=C,E+=C,P+=L,O+=L}i[0]=Math.min(i[0],A,T,_,w),i[1]=Math.min(i[1],N,P,O,E),i[2]=Math.max(i[2],A,T,_,w),i[3]=Math.max(i[3],N,P,O,E)}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t,n){const i=t[0],a=t[1],o=t[2],l=t[3],h=i**2+a**2,p=i*o+a*l,d=o**2+l**2,f=(h+d)/2,m=Math.sqrt(f**2-(h*d-p**2));n[0]=Math.sqrt(f+m||1),n[1]=Math.sqrt(f-m||1)}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const i=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(i>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>l?null:[i,o,a,l]}static pointBoundingBox(t,n,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],n),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],n)}static rectBoundingBox(t,n,i,a,o){o[0]=Math.min(o[0],t,i),o[1]=Math.min(o[1],n,a),o[2]=Math.max(o[2],t,i),o[3]=Math.max(o[3],n,a)}static#t(t,n,i,a,o,l,h,p,d,f){if(d<=0||d>=1)return;const m=1-d,y=d*d,b=y*d,A=m*(m*(m*t+3*d*n)+3*y*i)+b*a,_=m*(m*(m*o+3*d*l)+3*y*h)+b*p;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],_),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],_)}static#e(t,n,i,a,o,l,h,p,d,f,m,y){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,n,i,a,o,l,h,p,-m/f,y);return}const b=f**2-4*m*d;if(b<0)return;const A=Math.sqrt(b),_=2*d;this.#t(t,n,i,a,o,l,h,p,(-f+A)/_,y),this.#t(t,n,i,a,o,l,h,p,(-f-A)/_,y)}static bezierBoundingBox(t,n,i,a,o,l,h,p,d){d[0]=Math.min(d[0],t,h),d[1]=Math.min(d[1],n,p),d[2]=Math.max(d[2],t,h),d[3]=Math.max(d[3],n,p),this.#e(t,i,o,h,n,a,l,p,3*(-t+3*(i-o)+h),6*(t-2*i+o),3*(i-t),d),this.#e(t,i,o,h,n,a,l,p,3*(-n+3*(a-l)+p),6*(n-2*a+l),3*(a-n),d)}}function stringToUTF8String(u){return decodeURIComponent(escape(u))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(u){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),u.replaceAll(NormalizeRegex,(t,n,i)=>n?n.normalize("NFKC"):NormalizationMap.get(i))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const u=new Uint8Array(32);return crypto.getRandomValues(u),bytesToString(u)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(u,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,a,...o]=n;if(!u(i)&&!Number.isInteger(i)||!t(a))return!1;const l=o.length;let h=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;h=!1;break;default:return!1}for(const p of o)if(!(typeof p=="number"||h&&p===null))return!1;return!0}function MathClamp(u,t,n){return Math.min(Math.max(u,t),n)}function toBase64Util(u){return Uint8Array.prototype.toBase64?u.toBase64():btoa(bytesToString(u))}function fromBase64Util(u){return Uint8Array.fromBase64?Uint8Array.fromBase64(u):stringToBytes(atob(u))}typeof Promise.try!="function"&&(Promise.try=function(u,...t){return new Promise(n=>{n(u(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(u){return u.reduce((t,n)=>t+n,0)});const SVG_NS="http://www.w3.org/2000/svg";class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fetchData(u,t="text"){if(isValidFetchUrl(u,document.baseURI)){const n=await fetch(u);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const a=new XMLHttpRequest;a.open("GET",u,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(a.response);return}n(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class PageViewport{constructor({viewBox:t,userUnit:n,scale:i,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=l,i*=n;const p=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,m,y,b;switch(a%=360,a<0&&(a+=360),a){case 180:f=-1,m=0,y=0,b=1;break;case 90:f=0,m=1,y=1,b=0;break;case 270:f=0,m=-1,y=-1,b=0;break;case 0:f=1,m=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(y=-y,b=-b);let A,_,T,w;f===0?(A=Math.abs(d-t[1])*i+o,_=Math.abs(p-t[0])*i+l,T=(t[3]-t[1])*i,w=(t[2]-t[0])*i):(A=Math.abs(p-t[0])*i+o,_=Math.abs(d-t[1])*i+l,T=(t[2]-t[0])*i,w=(t[3]-t[1])*i),this.transform=[f*i,m*i,y*i,b*i,A-f*i*p-y*i*d,_-m*i*p-b*i*d],this.width=T,this.height=w}get rawDims(){const t=this.viewBox;return shadow(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(t,n){const i=[t,n];return Util.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const n=[t[0],t[1]];Util.applyTransform(n,this.transform);const i=[t[2],t[3]];return Util.applyTransform(i,this.transform),[n[0],n[1],i[0],i[1]]}convertToPdfPoint(t,n){const i=[t,n];return Util.applyInverseTransform(i,this.transform),i}}class RenderingCancelledException extends BaseException{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function isDataScheme(u){const t=u.length;let n=0;for(;n<t&&u[n].trim()==="";)n++;return u.substring(n,n+5).toLowerCase()==="data:"}function isPdfFile(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function getFilenameFromUrl(u){return[u]=u.split(/[#?]/,1),u.substring(u.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(u,t="document.pdf"){if(typeof u!="string")return t;if(isDataScheme(u))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=n.exec(u);let o=i.exec(a[1])||i.exec(a[2])||i.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||t}class StatTimer{started=Object.create(null);times=[];time(t){t in this.started&&warn(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||warn(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:i}of this.times)n=Math.max(i.length,n);for(const{name:i,start:a,end:o}of this.times)t.push(`${i.padEnd(n)} ${o-a}ms
`);return t.join("")}}function isValidFetchUrl(u,t){const n=t?URL.parse(u,t):URL.parse(u);return n?.protocol==="http:"||n?.protocol==="https:"}function noContextMenu(u){u.preventDefault()}function stopEvent(u){u.preventDefault(),u.stopPropagation()}function deprecated(u){console.log("Deprecated API usage: "+u)}class PDFDateString{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const i=parseInt(n[1],10);let a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(n[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(n[5],10);h=h>=0&&h<=59?h:0;let p=parseInt(n[6],10);p=p>=0&&p<=59?p:0;const d=n[7]||"Z";let f=parseInt(n[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(n[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(l+=f,h+=m):d==="+"&&(l-=f,h-=m),new Date(Date.UTC(i,a,o,l,h,p))}}function getXfaPageViewport(u,{scale:t=1,rotation:n=0}){const{width:i,height:a}=u.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new PageViewport({viewBox:o,userUnit:1,scale:t,rotation:n})}function getRGB(u){if(u.startsWith("#")){const t=parseInt(u.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(t=>parseInt(t)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(warn(`Not a valid color format: "${u}"`),[0,0,0])}function getColorValues(u){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of u.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;u.set(n,getRGB(i))}t.remove()}function getCurrentTransform(u){const{a:t,b:n,c:i,d:a,e:o,f:l}=u.getTransform();return[t,n,i,a,o,l]}function getCurrentTransformInverse(u){const{a:t,b:n,c:i,d:a,e:o,f:l}=u.getTransform().invertSelf();return[t,n,i,a,o,l]}function setLayerDimensions(u,t,n=!1,i=!0){if(t instanceof PageViewport){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=u,h=util_FeatureTest.isCSSRoundSupported,p=`var(--total-scale-factor) * ${a}px`,d=`var(--total-scale-factor) * ${o}px`,f=h?`round(down, ${p}, var(--scale-round-x))`:`calc(${p})`,m=h?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!n||t.rotation%180===0?(l.width=f,l.height=m):(l.width=m,l.height=f)}i&&u.setAttribute("data-main-rotation",t.rotation)}class OutputScale{constructor(){const{pixelRatio:t}=OutputScale;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,i,a,o=-1){let l=1/0,h=1/0,p=1/0;i=OutputScale.capPixels(i,o),i>0&&(l=Math.sqrt(i/(t*n))),a!==-1&&(h=a/t,p=a/n);const d=Math.min(l,h,p);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,n){if(n>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return t>0?Math.min(t,i):i}return t}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class EditorToolbar{#t=null;#e=null;#n;#i=null;#a=null;#s=null;static#o=null;constructor(t){this.#n=t,EditorToolbar.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#n._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:n}),t.addEventListener("pointerdown",EditorToolbar.#r,{signal:n});const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const a=this.#n.toolbarPosition;if(a){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),t}get div(){return this.#t}static#r(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,stopEvent(t)}#u(t){this.#n._focusEventsAllowed=!0,stopEvent(t)}#f(t){const n=this.#n._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",noContextMenu,{signal:n})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#h(){const{editorType:t,_uiManager:n}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",EditorToolbar.#o[t]),this.#f(i),i.addEventListener("click",a=>{n.delete()},{signal:n._signal}),this.#i.append(i)}get#d(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#f(n),this.#i.prepend(n,this.#d),this.#a=t}addColorPicker(t){this.#e=t;const n=t.renderButton();this.#f(n),this.#i.prepend(n,this.#d)}async addEditSignatureButton(t){const n=this.#s=await t.renderEditButton(this.#n);this.#f(n),this.#i.prepend(n,this.#d)}updateEditSignatureButton(t){this.#s&&(this.#s.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class HighlightToolbar{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",noContextMenu,{signal:this.#n._signal});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#s(),t}#a(t,n){let i=0,a=0;for(const o of t){const l=o.y+o.height;if(l<i)continue;const h=o.x+(n?o.width:0);if(l>i){a=h,i=l;continue}n?h>a&&(a=h):h<a&&(a=h)}return[n?1-a:a,i]}show(t,n,i){const[a,o]=this.#a(n,i),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");t.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;t.addEventListener("contextmenu",noContextMenu,{signal:i}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}}function bindEvents(u,t,n){for(const i of n)t.addEventListener(i,u[i].bind(u))}class IdManager{#t=0;get id(){return`${AnnotationEditorPrefix}${this.#t++}`}}class ImageManager{#t=getUuid();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",o)}async#i(t,n){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof n=="string"?(i.url=n,a=await fetchData(n,"blob")):n instanceof File?a=i.file=n:n instanceof Blob&&(a=n),a.type==="image/svg+xml"){const o=ImageManager._isSVGFittingCanvas,l=new FileReader,h=new Image,p=new Promise((d,f)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,d()},l.onload=async()=>{const m=i.svgUrl=l.result;h.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},h.onerror=l.onerror=f});l.readAsDataURL(a),await p}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){warn(a),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:n,name:i,size:a,type:o}=t;return this.#i(`${n}_${i}_${a}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,n){const i=await n;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const n=this.#n.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:i}=n;return delete n.blobPromise,this.getFromBlob(n.id,i)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(n.width,n.height);return a.getContext("2d").drawImage(n,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const n=this.#n.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#n||=new Map;const n=this.#n.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:i}=n;if(!n.url&&!n.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=a.convertToBlob()}i.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class CommandManager{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:n,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const p={cmd:t,undo:n,post:i,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(p);return}if(l&&this.#t[this.#i].type===o){h&&(p.undo=this.#t[this.#i].undo),this.#t[this.#i]=p;return}const d=this.#i+1;d===this.#n?this.#t.splice(0,1):(this.#i=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(p)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#i];t(),n?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#i];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let n=this.#i;n>=0;n--)if(this.#t[n].type!==t){this.#t.splice(n+1,this.#i-n),this.#i=n;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class KeyboardManager{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=util_FeatureTest.platform;for(const[i,a,o={}]of t)for(const l of i){const h=l.startsWith("mac+");n&&h?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!n&&!h&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const i=this.callbacks.get(this.#t(n));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:h=null}}=i;h&&!h(t,n)||(a.bind(t,...l,n)(),o||stopEvent(n))}}class ColorManager{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(t),shadow(this,"_colors",t)}convert(t){const n=getRGB(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[i,a]of this._colors)if(a.every((o,l)=>o===n[l]))return ColorManager._colorsMapping.get(i);return n}getHexCode(t){const n=this._colors.get(t);return n?Util.makeHexColor(...n):t}}class AnnotationEditorUIManager{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#a=null;#s=null;#o=null;#r=new CommandManager;#c=null;#u=null;#f=0;#h=new Set;#d=null;#l=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#b=!1;#y=null;#A=null;#E=null;#w=null;#_=!1;#P=null;#R=new IdManager;#x=!1;#C=!1;#S=null;#M=null;#O=null;#D=null;#L=null;#T=AnnotationEditorType.NONE;#v=new Set;#F=null;#k=null;#I=null;#q=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#j=null;#U=null;#G=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=AnnotationEditorUIManager.prototype,n=l=>l.#U.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),i=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:p}=h;return p!=="text"&&p!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#U.contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#U.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,i,a,o,l,h,p,d,f,m,y,b,A){const _=this._signal=this.#t.signal;this.#U=t,this.#G=n,this.#a=i,this.#k=a,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:_}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),o._on("setpreference",this.onSetPreference.bind(this),{signal:_}),o._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:_}),this.#it(),this.#ot(),this.#K(),this.#s=l.annotationStorage,this.#y=l.filterFactory,this.#I=h,this.#w=p||null,this.#m=d,this.#g=f,this.#b=m,this.#L=y||null,this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=A!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#D?.clear(),this.#e=null,this.#v.clear(),this.#r.destroy(),this.#a?.destroy(),this.#k?.destroy(),this.#P?.hide(),this.#P=null,this.#O?.destroy(),this.#O=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#j&&(clearTimeout(this.#j),this.#j=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#L}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return shadow(this,"hcmFilter",this.#I?this.#y.addHCMFilter(this.#I.foreground,this.#I.background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(this.#U).direction)}get highlightColors(){return shadow(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#O=t}editAltText(t,n=!1){this.#a?.editAltText(this,t,n)}getSignature(t){this.#k?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#k}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=n;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#U.focus()}findParent(t,n){for(const i of this.#i.values()){const{x:a,y:o,width:l,height:h}=i.div.getBoundingClientRect();if(t>=a&&t<=a+l&&n>=o&&n<=o+h)return i}return null}disableUserSelect(t=!1){this.#G.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*PixelsPerInch.PDF_TO_CSS_UNITS;for(const n of this.#p)n.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#$({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#W(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const i of this.#i.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:o,focusOffset:l}=n,h=n.toString(),d=this.#$(n).closest(".textLayer"),f=this.getSelectionBoxes(d);if(!f)return;n.empty();const m=this.#W(d),y=this.#T===AnnotationEditorType.NONE,b=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:i,anchorOffset:a,focusNode:o,focusOffset:l,text:h}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(AnnotationEditorType.HIGHLIGHT,b);return}b()}#et(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#$(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#P||=new HighlightToolbar(this),this.#P.show(i,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#nt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#F&&(this.#P?.hide(),this.#F=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#F)return;const a=this.#$(t).closest(".textLayer");if(!a){this.#F&&(this.#P?.hide(),this.#F=null,this.#N({hasSelectedText:!1}));return}if(this.#P?.hide(),this.#F=n,this.#N({hasSelectedText:!0}),!(this.#T!==AnnotationEditorType.HIGHLIGHT&&this.#T!==AnnotationEditorType.NONE)&&(this.#T===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#_=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===AnnotationEditorType.HIGHLIGHT?this.#W(a):null;o?.toggleDrawing();const l=new AbortController,h=this.combinedSignal(l),p=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),o?.toggleDrawing(!0),d.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",p,{signal:h}),window.addEventListener("blur",p,{signal:h})}}#Y(t=""){this.#T===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#et()}#it(){document.addEventListener("selectionchange",this.#nt.bind(this),{signal:this._signal})}#st(){if(this.#E)return;this.#E=new AbortController;const t=this.combinedSignal(this.#E);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#at(){this.#E?.abort(),this.#E=null}blur(){if(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#v)if(n.div.contains(t)){this.#M=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[t,n]=this.#M;this.#M=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#K(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#rt(){this.#S?.abort(),this.#S=null}#Q(){if(this.#c)return;this.#c=new AbortController;const t=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Z(){this.#c?.abort(),this.#c=null}#ot(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#K(),this.#Q()}removeEditListeners(){this.#rt(),this.#Z()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const i of this.#l)if(i.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const i of this.#l)if(i.isHandlingMimeForPasting(n.type)){i.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of this.#v){const a=i.serialize(!0);a&&n.push(a)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const l of this.#l)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let i=n.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){warn(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const p of i){const d=await a.deserialize(p);if(!d)return;o.push(d)}const l=()=>{for(const p of o)this.#J(p);this.#tt(o)},h=()=>{for(const p of o)p.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){warn(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&AnnotationEditorUIManager._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#Y("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#N(t){Object.entries(t).some(([i,a])=>this.#V[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#T===AnnotationEditorType.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#st(),this.#Q(),this.#N({isEditing:this.#T!==AnnotationEditorType.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#at(),this.#Z(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#l){this.#l=t;for(const n of this.#l)this.#H(n.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#i.get(this.#f)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#i.set(t.pageIndex,t),this.#x?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,n=null,i=!1){if(this.#T!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#T=t,t===AnnotationEditorType.NONE){this.setEditingState(!1),this.#ct(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===AnnotationEditorType.SIGNATURE&&await this.#k?.loadSignatures(),this.setEditingState(!0),await this.#lt(),this.unselectAll();for(const a of this.#i.values())a.updateMode(t);if(!n){i&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const a of this.#n.values())a.annotationElementId===n||a.id===n?(this.setSelected(a),a.enterInEditMode()):a.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,n){if(this.#l){switch(t){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(n);return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#O?.updateColor(n);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(const i of this.#v)i.updateParams(t,n);for(const i of this.#l)i.updateDefaultParams(t,n)}}showAllEditors(t,n,i=!1){for(const o of this.#n.values())o.editorType===t&&o.show(n);(this.#q?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#H([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#C!==t){this.#C=t;for(const n of this.#i.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#lt(){if(!this.#x){this.#x=!0;const t=[];for(const n of this.#i.values())t.push(n.enable());await Promise.all(t);for(const n of this.#n.values())n.enable()}}#ct(){if(this.unselectAll(),this.#x){this.#x=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const n=[];for(const i of this.#n.values())i.pageIndex===t&&n.push(i);return n}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#D?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#J(t){const n=this.#i.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#ut(){let t=null;for(t of this.#v);return t}updateUI(t){this.#ut===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#v.has(t)){this.#v.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#v.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.#u?.commitOrRemove();for(const n of this.#v)n!==t&&n.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#N({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#r.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#r.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...this.#v],i=()=>{this._editorUndoBar?.show(a,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},a=()=>{for(const o of n)this.#J(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#tt(t){for(const n of this.#v)n.unselect();this.#v.clear();for(const n of t)n.isEmpty()||(this.#v.add(n),n.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#v)t.commit();this.#tt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==AnnotationEditorType.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#v)t.unselect();this.#v.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=t,this.#z[1]+=n;const[a,o]=this.#z,l=[...this.#v],h=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const p of l)this.#n.has(p.id)&&(p.translateInPage(a,o),p.translationDone())},undo:()=>{for(const p of l)this.#n.has(p.id)&&(p.translateInPage(-a,-o),p.translationDone())},mustExec:!1})},h);for(const p of l)p.translateInPage(t,n),p.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#d=new Map;for(const t of this.#v)this.#d.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#d)return!1;this.disableUserSelect(!1);const t=this.#d;this.#d=null;let n=!1;for(const[{x:a,y:o,pageIndex:l},h]of t)h.newX=a,h.newY=o,h.newPageIndex=l,n||=a!==h.savedX||o!==h.savedY||l!==h.savedPageIndex;if(!n)return!1;const i=(a,o,l,h)=>{if(this.#n.has(a.id)){const p=this.#i.get(h);p?a._setParentAndPosition(p,o,l):(a.pageIndex=h,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:h}]of t)i(a,o,l,h)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:h}]of t)i(a,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#d)for(const i of this.#d.keys())i.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let d=0,f=n.rangeCount;d<f;d++)if(!t.contains(n.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:l}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(d,f,m,y)=>({x:(f-a)/l,y:1-(d+m-i)/o,width:y/l,height:m/o});break;case"180":h=(d,f,m,y)=>({x:1-(d+m-i)/o,y:1-(f+y-a)/l,width:m/o,height:y/l});break;case"270":h=(d,f,m,y)=>({x:1-(f+y-a)/l,y:(d-i)/o,width:y/l,height:m/o});break;default:h=(d,f,m,y)=>({x:(d-i)/o,y:(f-a)/l,width:m/o,height:y/l});break}const p=[];for(let d=0,f=n.rangeCount;d<f;d++){const m=n.getRangeAt(d);if(!m.collapsed)for(const{x:y,y:b,width:A,height:_}of m.getClientRects())A===0||_===0||p.push(h(y,b,A,_))}return p.length===0?null:p}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const i=this.#s.getRawValue(n);i&&(this.#T===AnnotationEditorType.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,n,i){const a=this.#D?.get(t);a&&(a.setCanvas(n,i),this.#D.delete(t))}addMissingCanvas(t,n){(this.#D||=new Map).set(t,n)}}class AltText{#t=null;#e=!1;#n=null;#i=null;#a=null;#s=null;#o=!1;#r=null;#c=null;#u=null;#f=null;#h=!1;static#d=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,AltText.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){AltText._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#i=document.createElement("span");t.append(n),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",AltText.#d.missing),n.setAttribute("data-l10n-id",AltText.#d["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#l}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#o=!0,a(o))},{signal:i}),await this.#p(),t}get#l(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#u:this.isEmpty()}get guessedText(){return this.#u}async setGuessedText(t){this.#t===null&&(this.#u=t,this.#f=await AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#r?.remove(),this.#r=null;return}if(!this.#r){const n=this.#r=document.createElement("div");n.className="noAltTextBadge",this.#c.div.append(n)}this.#r.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#u===n&&(n=this.#f),{altText:n,decorative:this.#e,guessedText:this.#u,textWithDisclaimer:this.#f}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#u=i,this.#f=a),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#l}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#r?.remove(),this.#r=null}async#p(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",AltText.#d[this.#l]),this.#i?.setAttribute("data-l10n-id",AltText.#d[`${this.#l}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#c.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class TouchManager{#t;#e=!1;#n=null;#i;#a;#s;#o;#r=null;#c;#u=null;#f;#h=null;constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){this.#t=t,this.#n=i,this.#i=n,this.#a=a,this.#s=o,this.#o=l,this.#f=new AbortController,this.#c=AbortSignal.any([h,this.#f.signal]),t.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}#d(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#r)return;const a=this.#r=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,h={capture:!0,signal:o,passive:!1},p=d=>{d.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};l.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(stopEvent(d),p(d))},h),l.addEventListener("pointerup",p,h),l.addEventListener("pointercancel",p,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#l.bind(this),l);const h=this.#p.bind(this);o.addEventListener("touchend",h,l),o.addEventListener("touchcancel",h,l),l.capture=!0,o.addEventListener("pointerdown",stopEvent,l),o.addEventListener("pointermove",stopEvent,l),o.addEventListener("pointercancel",stopEvent,l),o.addEventListener("pointerup",stopEvent,l),this.#a?.()}if(stopEvent(t),t.touches.length!==2||this.#n?.()){this.#u=null;return}let[n,i]=t.touches;n.identifier>i.identifier&&([n,i]=[i,n]),this.#u={touch0X:n.screenX,touch0Y:n.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#l(t){if(!this.#u||t.touches.length!==2)return;stopEvent(t);let[n,i]=t.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:a,screenY:o}=n,{screenX:l,screenY:h}=i,p=this.#u,{touch0X:d,touch0Y:f,touch1X:m,touch1Y:y}=p,b=m-d,A=y-f,_=l-a,T=h-o,w=Math.hypot(_,T)||1,N=Math.hypot(b,A)||1;if(!this.#e&&Math.abs(N-w)<=TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(p.touch0X=a,p.touch0Y=o,p.touch1X=l,p.touch1Y=h,!this.#e){this.#e=!0;return}const O=[(a+l)/2,(o+h)/2];this.#s?.(O,N,w)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#o?.()),this.#u&&(stopEvent(t),this.#u=null,this.#e=!1))}destroy(){this.#f?.abort(),this.#f=null,this.#r?.abort(),this.#r=null}}class AnnotationEditor{#t=null;#e=null;#n=null;#i=!1;#a=null;#s="";#o=!1;#r=null;#c=null;#u=null;#f=null;#h="";#d=!1;#l=null;#p=!1;#m=!1;#g=!1;#b=null;#y=0;#A=0;#E=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#_=!1;#P=AnnotationEditor._zIndex++;static _borderLineWidth=-1;static _colorManager=new ColorManager;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=AnnotationEditor.prototype._resizeWithKeyboard,n=AnnotationEditorUIManager.TRANSLATE_SMALL,i=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,l];const[h,p]=this.parentDimensions;this.x=t.x/h,this.y=t.y/p,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new FakeEditor({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(AnnotationEditor._l10n??=t,AnnotationEditor._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),AnnotationEditor._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#_}set _isDraggable(t){this.#_=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#P}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#G(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#d?this.#d=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,i,a){const[o,l]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/o,this.y=(n+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[i,a]=this.parentDimensions;this.setAt(t*i,n*a,this.width*i,this.height*a),this._onTranslated()}#R([t,n],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,n){this.#R(this.parentDimensions,t,n)}translateInPage(t,n){this.#l||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){this.#l||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=n/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[p,d]=this.getBaseTranslation();l+=p,h+=d;const{style:f}=i;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!this.#l&&(this.#l[0]!==this.x||this.#l[1]!==this.y)}get _hasBeenResized(){return!!this.#l&&(this.#l[2]!==this.width||this.#l[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:i}=AnnotationEditor,a=i/t,o=i/n;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[i,a]}=this;let{x:o,y:l,width:h,height:p}=this;if(h*=i,p*=a,o*=i,l*=a,this._mustFixPosition)switch(t){case 0:o=MathClamp(o,0,i-h),l=MathClamp(l,0,a-p);break;case 90:o=MathClamp(o,0,i-p),l=MathClamp(l,h,a);break;case 180:o=MathClamp(o,h,i),l=MathClamp(l,p,a);break;case 270:o=MathClamp(o,p,i),l=MathClamp(l,0,a-h);break}this.x=o/=i,this.y=l/=a;const[d,f]=this.getBaseTranslation();o+=d,l+=f,n.left=`${(100*o).toFixed(2)}%`,n.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#x(t,n,i){switch(i){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return AnnotationEditor.#x(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return AnnotationEditor.#x(t,n,360-this.parentRotation)}#C(t){switch(t){case 90:{const[n,i]=this.pageDimensions;return[0,-n/i,i/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,i]=this.pageDimensions;return[0,n/i,-i/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,i]}=this;return[n*t,i*t]}setDims(t,n){const[i,a]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/i).toFixed(2)}%`,this.#o||(o.height=`${(100*n/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:n,width:i}=t,a=i.endsWith("%"),o=!this.#o&&n.endsWith("%");if(a&&o)return;const[l,h]=this.parentDimensions;a||(t.width=`${(100*parseFloat(i)/l).toFixed(2)}%`),!this.#o&&!o&&(t.height=`${(100*parseFloat(n)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#S(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#r.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#M.bind(this,i),{signal:n}),a.addEventListener("contextmenu",noContextMenu,{signal:n}),a.tabIndex=-1}this.div.prepend(this.#r)}#M(t,n){n.preventDefault();const{isMac:i}=util_FeatureTest.platform;if(n.button!==0||n.ctrlKey&&i)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#c=[n.screenX,n.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:l}),window.addEventListener("contextmenu",noContextMenu,{signal:l}),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const d=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=p,this.#D()};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}#O(t,n,i,a){this.width=i,this.height=a,this.x=t,this.y=n;const[o,l]=this.parentDimensions;this.setDims(o*i,l*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#D(){if(!this.#u)return;const{savedX:t,savedY:n,savedWidth:i,savedHeight:a}=this.#u;this.#u=null;const o=this.x,l=this.y,h=this.width,p=this.height;o===t&&l===n&&h===i&&p===a||this.addCommands({cmd:this.#O.bind(this,o,l,h,p),undo:this.#O.bind(this,t,n,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,n){const[i,a]=this.parentDimensions,o=this.x,l=this.y,h=this.width,p=this.height,d=AnnotationEditor.MIN_SIZE/i,f=AnnotationEditor.MIN_SIZE/a,m=this.#C(this.rotation),y=(I,V)=>[m[0]*I+m[2]*V,m[1]*I+m[3]*V],b=this.#C(360-this.rotation),A=(I,V)=>[b[0]*I+b[2]*V,b[1]*I+b[3]*V];let _,T,w=!1,N=!1;switch(t){case"topLeft":w=!0,_=(I,V)=>[0,0],T=(I,V)=>[I,V];break;case"topMiddle":_=(I,V)=>[I/2,0],T=(I,V)=>[I/2,V];break;case"topRight":w=!0,_=(I,V)=>[I,0],T=(I,V)=>[0,V];break;case"middleRight":N=!0,_=(I,V)=>[I,V/2],T=(I,V)=>[0,V/2];break;case"bottomRight":w=!0,_=(I,V)=>[I,V],T=(I,V)=>[0,0];break;case"bottomMiddle":_=(I,V)=>[I/2,V],T=(I,V)=>[I/2,0];break;case"bottomLeft":w=!0,_=(I,V)=>[0,V],T=(I,V)=>[I,0];break;case"middleLeft":N=!0,_=(I,V)=>[0,V/2],T=(I,V)=>[I,V/2];break}const O=_(h,p),P=T(h,p);let E=y(...P);const C=AnnotationEditor._round(o+E[0]),L=AnnotationEditor._round(l+E[1]);let X=1,q=1,Q,K;if(n.fromKeyboard)({deltaX:Q,deltaY:K}=n);else{const{screenX:I,screenY:V}=n,[j,M]=this.#c;[Q,K]=this.screenToPageTranslation(I-j,V-M),this.#c[0]=I,this.#c[1]=V}if([Q,K]=A(Q/i,K/a),w){const I=Math.hypot(h,p);X=q=Math.max(Math.min(Math.hypot(P[0]-O[0]-Q,P[1]-O[1]-K)/I,1/h,1/p),d/h,f/p)}else N?X=MathClamp(Math.abs(P[0]-O[0]-Q),d,1)/h:q=MathClamp(Math.abs(P[1]-O[1]-K),f,1)/p;const tt=AnnotationEditor._round(h*X),gt=AnnotationEditor._round(p*q);E=y(...T(tt,gt));const ct=C-E[0],J=L-E[1];this.#l||=[this.x,this.y,this.width,this.height],this.width=tt,this.height=gt,this.x=ct,this.y=J,this.setDims(i*tt,a*gt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(AltText.initialize(AnnotationEditor._l10n),this.#n=new AltText(this),this.#t&&(this.#n.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#q();const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),bindEvents(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new TouchManager({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#T.bind(this),onPinching:this.#v.bind(this),onPinchEnd:this.#F.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#T(){this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#v(t,n,i){let o=.7*(i/n)+1-.7;if(o===1)return;const l=this.#C(this.rotation),h=(C,L)=>[l[0]*C+l[2]*L,l[1]*C+l[3]*L],[p,d]=this.parentDimensions,f=this.x,m=this.y,y=this.width,b=this.height,A=AnnotationEditor.MIN_SIZE/p,_=AnnotationEditor.MIN_SIZE/d;o=Math.max(Math.min(o,1/y,1/b),A/y,_/b);const T=AnnotationEditor._round(y*o),w=AnnotationEditor._round(b*o);if(T===y&&w===b)return;this.#l||=[f,m,y,b];const N=h(y/2,b/2),O=AnnotationEditor._round(f+N[0]),P=AnnotationEditor._round(m+N[1]),E=h(T/2,w/2);this.x=O-E[0],this.y=P-E[1],this.width=T,this.height=w,this.setDims(p*T,d*w),this.fixAndSetPosition(),this._onResizing()}#F(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#D()}pointerdown(t){const{isMac:n}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#d=!0,this._isDraggable){this.#I(t);return}this.#k(t)}#k(t){const{isMac:n}=util_FeatureTest.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},h=d=>{a.abort(),this.#a=null,this.#d=!1,this._uiManager.endDragSession()||this.#k(d),i&&this._onStopDragging()};n&&(this.#y=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",d=>{i||(i=!0,this._onStartDragging());const{clientX:f,clientY:m,pointerId:y}=d;if(y!==this.#a){stopEvent(d);return}const[b,A]=this.screenToPageTranslation(f-this.#y,m-this.#A);this.#y=f,this.#A=m,this._uiManager.dragSelectedEditors(b,A)},l),window.addEventListener("touchmove",stopEvent,l),window.addEventListener("pointerdown",d=>{d.pointerType===this.#s&&(this.#w||d.isPrimary)&&h(d),stopEvent(d)},l));const p=d=>{if(!this.#a||this.#a===d.pointerId){h(d);return}stopEvent(d)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,i){t.changeParent(this),this.x=n,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,i=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[h,p]=this.pageTranslation,d=t/a,f=n/a,m=this.x*o,y=this.y*l,b=this.width*o,A=this.height*l;switch(i){case 0:return[m+d+h,l-y-f-A+p,m+d+b+h,l-y-f+p];case 90:return[m+f+h,l-y+d+p,m+f+A+h,l-y+d+b+p];case 180:return[m-d-b+h,l-y+f+p,m-d+h,l-y+f+A+p];case 270:return[m-f-A+h,l-y-d-b+p,m-f+h,l-y-d+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[i,a,o,l]=t,h=o-i,p=l-a;switch(this.rotation){case 0:return[i,n-l,h,p];case 90:return[i,n-a,p,h];case 180:return[o,n-a,h,p];case 270:return[o,n-l,p,h];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return n<l&&a>0&&t<o&&i>0}#q(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#q()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){unreachable("An editor must be serializable")}static async deserialize(t,n,i){const a=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:i});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[h,p,d,f]=a.getRectInCurrentCoords(t.rect,l);return a.x=h/o,a.y=p/l,a.width=d/o,a.height=f/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#G(),this.removeEditToolbar(),this.#E){for(const t of this.#E.values())clearTimeout(t);this.#E=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#S(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#r.children;if(!this.#e){this.#e=Array.from(n);const l=this.#V.bind(this),h=this.#z.bind(this),p=this._uiManager._signal;for(const d of this.#e){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:p}),d.addEventListener("blur",h,{signal:p}),d.addEventListener("focus",this.#j.bind(this,f),{signal:p}),d.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[f])}}const i=this.#e[0];let a=0;for(const l of n){if(l===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)this.#r.append(this.#r.firstChild);else if(o>a)for(let h=0;h<o-a;h++)this.#r.firstChild.before(this.#r.lastChild);let l=0;for(const h of n){const d=this.#e[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[d])}}this.#U(0),this.#g=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){AnnotationEditor._resizerKeyboardManager.exec(this,t)}#z(t){this.#g&&t.relatedTarget?.parentNode!==this.#r&&this.#G()}#j(t){this.#h=this.#g?t:""}#U(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#g&&this.#L(this.#h,{deltaX:t,deltaY:n,fromKeyboard:!0})}#G(){this.#g=!1,this.#U(-1),this.#D()}_stopResizingWithKeyboard(){this.#G(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,n){this.#o=!0;const i=t/n,{style:a}=this.div;a.aspectRatio=i,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#E||=new Map;const{action:i}=t;let a=this.#E.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#E.delete(i),this.#E.size===0&&(this.#E=null)},AnnotationEditor._telemetryTimeout),this.#E.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const i=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),i.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class FakeEditor extends AnnotationEditor{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(t){this.h1=t?t&4294967295:SEED,this.h2=t?t&4294967295:SEED}update(t){let n,i;if(typeof t=="string"){n=new Uint8Array(t.length*2),i=0;for(let _=0,T=t.length;_<T;_++){const w=t.charCodeAt(_);w<=255?n[i++]=w:(n[i++]=w>>>8,n[i++]=w&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),i=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,l=new Uint32Array(n.buffer,0,a);let h=0,p=0,d=this.h1,f=this.h2;const m=3432918353,y=461845907,b=m&MASK_LOW,A=y&MASK_LOW;for(let _=0;_<a;_++)_&1?(h=l[_],h=h*m&MASK_HIGH|h*b&MASK_LOW,h=h<<15|h>>>17,h=h*y&MASK_HIGH|h*A&MASK_LOW,d^=h,d=d<<13|d>>>19,d=d*5+3864292196):(p=l[_],p=p*m&MASK_HIGH|p*b&MASK_LOW,p=p<<15|p>>>17,p=p*y&MASK_HIGH|p*A&MASK_LOW,f^=p,f=f<<13|f>>>19,f=f*5+3864292196);switch(h=0,o){case 3:h^=n[a*4+2]<<16;case 2:h^=n[a*4+1]<<8;case 1:h^=n[a*4],h=h*m&MASK_HIGH|h*b&MASK_LOW,h=h<<15|h>>>17,h=h*y&MASK_HIGH|h*A&MASK_LOW,a&1?d^=h:f^=h}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&MASK_HIGH|t*36045&MASK_LOW,n=n*4283543511&MASK_HIGH|((n<<16|t>>>16)*2950163797&MASK_HIGH)>>>16,t^=n>>>1,t=t*444984403&MASK_HIGH|t*60499&MASK_LOW,n=n*3301882366&MASK_HIGH|((n<<16|t>>>16)*3120437893&MASK_HIGH)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});class AnnotationStorage{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const i=this.#n.get(t);return i===void 0?n:Object.assign(n,i)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of this.#n.values())if(n instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,n){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[o,l]of Object.entries(n))i[o]!==l&&(a=!0,i[o]=l);else a=!0,this.#n.set(t,n);a&&this.#i(),n instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this.#n.size===0)return SerializableEmpty;const t=new Map,n=new MurmurHash3_64,i=[],a=Object.create(null);let o=!1;for(const[l,h]of this.#n){const p=h instanceof AnnotationEditor?h.serialize(!1,a):h;p&&(t.set(l,p),n.update(`${l}:${JSON.stringify(p)}`),o||=!!p.bitmap)}if(o)for(const l of t.values())l.bitmap&&i.push(l.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:i}:SerializableEmpty}get editorStats(){let t=null;const n=new Map;for(const i of this.#n.values()){if(!(i instanceof AnnotationEditor))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:o}=a;n.has(o)||n.set(o,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const l=t[o]||=new Map;for(const[h,p]of Object.entries(a)){if(h==="type")continue;let d=l.get(h);d||(d=new Map,l.set(h,d));const f=d.get(p)??0;d.set(p,f+1)}}for(const[i,a]of n)t[i]=a.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const n of this.#n.values())!(n instanceof AnnotationEditor)||!n.annotationElementId||!n.serialize()||t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class PrintAnnotationStorage extends AnnotationStorage{#t;constructor(t){super();const{map:n,hash:i,transfer:a}=t.serializable,o=structuredClone(n,a?{transfer:a}:null);this.#t={map:o,hash:i,transfer:a}}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}class FontLoader{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(assert(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,h=new FontFace(a,o,l);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),i?.(t)}catch{warn(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw warn(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return shadow(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(assert(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:n,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function i(P,E){return P.charCodeAt(E)<<24|P.charCodeAt(E+1)<<16|P.charCodeAt(E+2)<<8|P.charCodeAt(E+3)&255}function a(P,E,C,L){const X=P.substring(0,E),q=P.substring(E+C);return X+L+q}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const p=h.getContext("2d");let d=0;function f(P,E){if(++d>30){warn("Load test font never loaded."),E();return}if(p.font="30px "+P,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(f.bind(null,P,E))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,m.length,m);const A=16,_=1482184792;let T=i(y,A);for(o=0,l=m.length-3;o<l;o+=4)T=T-_+i(m,o)|0;o<m.length&&(T=T-_+i(m+"XXX",o)|0),y=a(y,A,4,string32(T));const w=`url(data:font/opentype;base64,${btoa(y)});`,N=`@font-face {font-family:"${m}";src:${w}}`;this.insertRule(N);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const P of[t.loadedName,m]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=P,O.append(E)}this._document.body.append(O),f(m,()=>{O.remove(),n.complete()})}}class FontFaceObject{constructor(t,n=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const i=this.loadedName+"_path_"+n;let a;try{a=t.get(i)}catch(l){warn(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[n]=o}}function getUrlProp(u){if(u instanceof URL)return u.href;if(typeof u=="string"){if(isNodeJS)return u;const t=URL.parse(u,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(u){if(isNodeJS&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return stringToBytes(u);if(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="object"&&!isNaN(u?.length))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(u){if(typeof u!="string")return null;if(u.endsWith("/"))return u;throw new Error(`Invalid factory url: "${u}" must include trailing slash.`)}const isRefProxy=u=>typeof u=="object"&&Number.isInteger(u?.num)&&u.num>=0&&Number.isInteger(u?.gen)&&u.gen>=0,isNameProxy=u=>typeof u=="object"&&typeof u?.name=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);class LoopbackPort{#t=new Map;#e=Promise.resolve();postMessage(t,n){const i={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,n,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,n);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(n,a)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(u){if(u instanceof AbortException||u instanceof InvalidPDFException||u instanceof PasswordException||u instanceof ResponseException||u instanceof UnknownErrorException)return u;switch(u instanceof Error||typeof u=="object"&&u!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new AbortException(u.message);case"InvalidPDFException":return new InvalidPDFException(u.message);case"PasswordException":return new PasswordException(u.message,u.code);case"ResponseException":return new ResponseException(u.message,u.status,u.missing);case"UnknownErrorException":return new UnknownErrorException(u.message,u.details)}return new UnknownErrorException(u.message,u.toString())}class MessageHandler{#t=new AbortController;constructor(t,n,i){this.sourceName=t,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===CallbackKind.DATA)a.resolve(t.data);else if(t.callback===CallbackKind.ERROR)a.reject(wrapReason(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(n,t.data).then(function(l){o.postMessage({sourceName:i,targetName:a,callback:CallbackKind.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:i,targetName:a,callback:CallbackKind.ERROR,callbackId:t.callbackId,reason:wrapReason(l)})});return}if(t.streamId){this.#n(t);return}n(t.data)}on(t,n){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=n}send(t,n,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},i)}sendWithPromise(t,n,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},i)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,n,i,a){const o=this.streamId++,l=this.sourceName,h=this.targetName,p=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[o]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:l,targetName:h,action:t,streamId:o,data:n,desiredSize:d.desiredSize},a),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,p.postMessage({sourceName:l,targetName:h,stream:StreamKind.PULL,streamId:o,desiredSize:d.desiredSize}),f.promise},cancel:d=>{assert(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,p.postMessage({sourceName:l,targetName:h,stream:StreamKind.CANCEL,streamId:o,reason:wrapReason(d)}),f.promise}},i)}#n(t){const n=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this,h=this.actionHandler[t.action],p={enqueue(d,f=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:StreamKind.ENQUEUE,streamId:n,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:StreamKind.CLOSE,streamId:n}),delete l.streamSinks[n])},error(d){assert(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:StreamKind.ERROR,streamId:n,reason:wrapReason(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[n]=p,Promise.try(h,t.data,p).then(function(){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.START_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.START_COMPLETE,streamId:n,reason:wrapReason(d)})})}#i(t){const n=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[n],h=this.streamSinks[n];switch(t.stream){case StreamKind.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(wrapReason(t.reason));break;case StreamKind.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(wrapReason(t.reason));break;case StreamKind.PULL:if(!h){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.PULL_COMPLETE,streamId:n,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||onFn).then(function(){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.PULL_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.PULL_COMPLETE,streamId:n,reason:wrapReason(d)})});break;case StreamKind.ENQUEUE:if(assert(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case StreamKind.CLOSE:if(assert(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,n);break;case StreamKind.ERROR:assert(l,"error should have stream controller"),l.controller.error(wrapReason(t.reason)),this.#a(l,n);break;case StreamKind.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(wrapReason(t.reason)),this.#a(l,n);break;case StreamKind.CANCEL:if(!h)break;const p=wrapReason(t.reason);Promise.try(h.onCancel||onFn,p).then(function(){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.CANCEL_COMPLETE,streamId:n,reason:wrapReason(d)})}),h.sinkCapability.reject(p),h.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class BaseCanvasFactory{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,n);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,i){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){unreachable("Abstract method `_createCanvas` called.")}}class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const i=this._document.createElement("canvas");return i.width=t,i.height=n,i}}class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){const n=await fetchData(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):stringToBytes(n)}}class BaseFilterFactory{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,i,a,o){return"none"}destroy(t=!1){}}class DOMFilterFactory extends BaseFilterFactory{#t;#e;#n;#i;#a;#s;#o=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#i=t,this.#a=n}get#r(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#u(){if(!this.#n){const t=this.#a.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=this.#a.createElementNS(SVG_NS,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#a.createElementNS(SVG_NS,"defs"),t.append(i),i.append(this.#n),this.#a.body.append(t)}return this.#n}#f(t){if(t.length===1){const p=t[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=p[m]/255;const f=d.join(",");return[f,f,f]}const[n,i,a]=t,o=new Array(256),l=new Array(256),h=new Array(256);for(let p=0;p<256;p++)o[p]=n[p]/255,l[p]=i[p]/255,h[p]=a[p]/255;return[o.join(","),l.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const n=this.#a.URL;n!==this.#a.baseURI&&(isDataScheme(n)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=updateUrlHash(n,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#r.get(t);if(n)return n;const[i,a,o]=this.#f(t),l=t.length===1?i:`${i}${a}${o}`;if(n=this.#r.get(l),n)return this.#r.set(t,n),n;const h=`g_${this.#i}_transfer_map_${this.#o++}`,p=this.#h(h);this.#r.set(t,p),this.#r.set(l,p);const d=this.#p(h);return this.#g(i,a,o,d),p}addHCMFilter(t,n){const i=`${t}-${n}`,a="base";let o=this.#c.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#c.set(a,o)),!t||!n))return o.url;const l=this.#y(t);t=Util.makeHexColor(...l);const h=this.#y(n);if(n=Util.makeHexColor(...h),this.#u.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const p=new Array(256);for(let b=0;b<=255;b++){const A=b/255;p[b]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const d=p.join(","),f=`g_${this.#i}_hcm_filter`,m=o.filter=this.#p(f);this.#g(d,d,d,m),this.#l(m);const y=(b,A)=>{const _=l[b]/255,T=h[b]/255,w=new Array(A+1);for(let N=0;N<=A;N++)w[N]=_+N/A*(T-_);return w.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),m),o.url=this.#h(f),o.url}addAlphaFilter(t){let n=this.#r.get(t);if(n)return n;const[i]=this.#f([t]),a=`alpha_${i}`;if(n=this.#r.get(a),n)return this.#r.set(t,n),n;const o=`g_${this.#i}_alpha_map_${this.#o++}`,l=this.#h(o);this.#r.set(t,l),this.#r.set(a,l);const h=this.#p(o);return this.#b(i,h),l}addLuminosityFilter(t){let n=this.#r.get(t||"luminosity");if(n)return n;let i,a;if(t?([i]=this.#f([t]),a=`luminosity_${i}`):a="luminosity",n=this.#r.get(a),n)return this.#r.set(t,n),n;const o=`g_${this.#i}_luminosity_map_${this.#o++}`,l=this.#h(o);this.#r.set(t,l),this.#r.set(a,l);const h=this.#p(o);return this.#d(h),t&&this.#b(i,h),l}addHighlightHCMFilter(t,n,i,a,o){const l=`${n}-${i}-${a}-${o}`;let h=this.#c.get(t);if(h?.key===l||(h?(h.filter?.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},this.#c.set(t,h)),!n||!i))return h.url;const[p,d]=[n,i].map(this.#y.bind(this));let f=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,b]=[a,o].map(this.#y.bind(this));m<f&&([f,m,y,b]=[m,f,b,y]),this.#u.style.color="";const A=(w,N,O)=>{const P=new Array(256),E=(m-f)/O,C=w/255,L=(N-w)/(255*O);let X=0;for(let q=0;q<=O;q++){const Q=Math.round(f+q*E),K=C+q*L;for(let tt=X;tt<=Q;tt++)P[tt]=K;X=Q+1}for(let q=X;q<256;q++)P[q]=P[X-1];return P.join(",")},_=`g_${this.#i}_hcm_${t}_filter`,T=h.filter=this.#p(_);return this.#l(T),this.#g(A(y[0],b[0],5),A(y[1],b[1],5),A(y[2],b[2],5),T),h.url=this.#h(_),h.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#d(t){const n=this.#a.createElementNS(SVG_NS,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#l(t){const n=this.#a.createElementNS(SVG_NS,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#p(t){const n=this.#a.createElementNS(SVG_NS,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#u.append(n),n}#m(t,n,i){const a=this.#a.createElementNS(SVG_NS,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#g(t,n,i,a){const o=this.#a.createElementNS(SVG_NS,"feComponentTransfer");a.append(o),this.#m(o,"feFuncR",t),this.#m(o,"feFuncG",n),this.#m(o,"feFuncB",i)}#b(t,n){const i=this.#a.createElementNS(SVG_NS,"feComponentTransfer");n.append(i),this.#m(i,"feFuncA",t)}#y(t){return this.#u.style.color=t,getRGB(getComputedStyle(this.#u).getPropertyValue("color"))}}class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){const n=await fetchData(t,"arraybuffer");return new Uint8Array(n)}}class BaseWasmFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(t){const n=await fetchData(t,"arraybuffer");return new Uint8Array(n)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(u){const n=await process.getBuiltinModule("fs").promises.readFile(u);return new Uint8Array(n)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(t){return node_utils_fetchData(t)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(u,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,i),u.clip(a)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)n.addColorStop(i[0],i[1]);return n}getPattern(t,n,i,a){let o;if(a===PathType.STROKE||a===PathType.FILL){const l=n.current.getClippedPathBoundingBox(a,getCurrentTransform(t))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,p=Math.ceil(l[3]-l[1])||1,d=n.cachedCanvases.getCanvas("pattern",h,p),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),i=Util.transform(i,[1,0,0,1,l[0],l[1]]),f.transform(...n.baseTransform),this.matrix&&f.transform(...this.matrix),applyBoundingBox(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=t.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(i);o.setTransform(m)}else applyBoundingBox(t,this._bbox),o=this._createGradient(t);return o}}function drawTriangle(u,t,n,i,a,o,l,h){const p=t.coords,d=t.colors,f=u.data,m=u.width*4;let y;p[n+1]>p[i+1]&&(y=n,n=i,i=y,y=o,o=l,l=y),p[i+1]>p[a+1]&&(y=i,i=a,a=y,y=l,l=h,h=y),p[n+1]>p[i+1]&&(y=n,n=i,i=y,y=o,o=l,l=y);const b=(p[n]+t.offsetX)*t.scaleX,A=(p[n+1]+t.offsetY)*t.scaleY,_=(p[i]+t.offsetX)*t.scaleX,T=(p[i+1]+t.offsetY)*t.scaleY,w=(p[a]+t.offsetX)*t.scaleX,N=(p[a+1]+t.offsetY)*t.scaleY;if(A>=N)return;const O=d[o],P=d[o+1],E=d[o+2],C=d[l],L=d[l+1],X=d[l+2],q=d[h],Q=d[h+1],K=d[h+2],tt=Math.round(A),gt=Math.round(N);let ct,J,I,V,j,M,S,k;for(let H=tt;H<=gt;H++){if(H<T){const G=H<A?0:(A-H)/(A-T);ct=b-(b-_)*G,J=O-(O-C)*G,I=P-(P-L)*G,V=E-(E-X)*G}else{let G;H>N?G=1:T===N?G=0:G=(T-H)/(T-N),ct=_-(_-w)*G,J=C-(C-q)*G,I=L-(L-Q)*G,V=X-(X-K)*G}let U;H<A?U=0:H>N?U=1:U=(A-H)/(A-N),j=b-(b-w)*U,M=O-(O-q)*U,S=P-(P-Q)*U,k=E-(E-K)*U;const x=Math.round(Math.min(ct,j)),R=Math.round(Math.max(ct,j));let F=m*H+x*4;for(let G=x;G<=R;G++)U=(ct-G)/(ct-j),U<0?U=0:U>1&&(U=1),f[F++]=J-(J-M)*U|0,f[F++]=I-(I-S)*U|0,f[F++]=V-(V-k)*U|0,f[F++]=255}}function drawFigure(u,t,n){const i=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const h=t.verticesPerRow,p=Math.floor(i.length/h)-1,d=h-1;for(o=0;o<p;o++){let f=o*h;for(let m=0;m<d;m++,f++)drawTriangle(u,n,i[f],i[f+1],i[f+h],a[f],a[f+1],a[f+h]),drawTriangle(u,n,i[f+h+1],i[f+1],i[f+h],a[f+h+1],a[f+1],a[f+h])}break;case"triangles":for(o=0,l=i.length;o<l;o+=3)drawTriangle(u,n,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,i){const h=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-h,f=Math.ceil(this._bounds[3])-p,m=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),b=d/m,A=f/y,_={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-p,scaleX:1/b,scaleY:1/A},T=m+4,w=y+4,N=i.getCanvas("mesh",T,w),O=N.context,P=O.createImageData(m,y);if(n){const C=P.data;for(let L=0,X=C.length;L<X;L+=4)C[L]=n[0],C[L+1]=n[1],C[L+2]=n[2],C[L+3]=255}for(const C of this._figures)drawFigure(P,C,_);return O.putImageData(P,2,2),{canvas:N.canvas,offsetX:h-2*b,offsetY:p-2*A,scaleX:b,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,n,i,a){applyBoundingBox(t,this._bbox);const o=new Float32Array(2);if(a===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(t),o);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,o);const[h,p]=o;Util.singularValueDecompose2dScale(n.baseTransform,o),o[0]*=h,o[1]*=p}else Util.singularValueDecompose2dScale(n.baseTransform,o);const l=this._createMeshCanvas(o,a===PathType.SHADING?null:this._background,n.cachedCanvases);return a!==PathType.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(u){switch(u[0]){case"RadialAxial":return new RadialAxialShadingPattern(u);case"Mesh":return new MeshShadingPattern(u);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${u[0]}`)}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{static MAX_PATTERN_SIZE=3e3;constructor(t,n,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t){const{bbox:n,operatorList:i,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:h}=this;let{xstep:p,ystep:d}=this;p=Math.abs(p),d=Math.abs(d),info("TilingType: "+o);const f=n[0],m=n[1],y=n[2],b=n[3],A=y-f,_=b-m,T=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,T);const[w,N]=T;Util.singularValueDecompose2dScale(this.baseTransform,T);const O=w*T[0],P=N*T[1];let E=A,C=_,L=!1,X=!1;const q=Math.ceil(p*O),Q=Math.ceil(d*P),K=Math.ceil(A*O),tt=Math.ceil(_*P);q>=K?E=p:L=!0,Q>=tt?C=d:X=!0;const gt=this.getSizeAndScale(E,this.ctx.canvas.width,O),ct=this.getSizeAndScale(C,this.ctx.canvas.height,P),J=t.cachedCanvases.getCanvas("pattern",gt.size,ct.size),I=J.context,V=h.createCanvasGraphics(I);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,a,l),I.translate(-gt.scale*f,-ct.scale*m),V.transform(gt.scale,0,0,ct.scale,0,0),I.save(),this.clipBbox(V,f,m,y,b),V.baseTransform=getCurrentTransform(V.ctx),V.executeOperatorList(i),V.endDrawing(),I.restore(),L||X){const j=J.canvas;L&&(E=p),X&&(C=d);const M=this.getSizeAndScale(E,this.ctx.canvas.width,O),S=this.getSizeAndScale(C,this.ctx.canvas.height,P),k=M.size,H=S.size,U=t.cachedCanvases.getCanvas("pattern-workaround",k,H),x=U.context,R=L?Math.floor(A/p):0,F=X?Math.floor(_/d):0;for(let G=0;G<=R;G++)for(let z=0;z<=F;z++)x.drawImage(j,k*G,H*z,k,H,0,0,k,H);return{canvas:U.canvas,scaleX:M.scale,scaleY:S.scale,offsetX:f,offsetY:m}}return{canvas:J.canvas,scaleX:gt.scale,scaleY:ct.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,n,i){const a=Math.max(TilingPattern.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*i);return o>=a?o=a:i=o/t,{scale:i,size:o}}clipBbox(t,n,i,a,o){const l=a-n,h=o-i;t.ctx.rect(n,i,l,h),Util.axialAlignedBoundingBox([n,i,a,o],getCurrentTransform(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,i){const a=t.ctx,o=t.current;switch(n){case PaintType.COLORED:const{fillStyle:l,strokeStyle:h}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=h;break;case PaintType.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new FormatError(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,i,a){let o=i;a!==PathType.SHADING&&(o=Util.transform(o,n.baseTransform),this.matrix&&(o=Util.transform(o,this.matrix)));const l=this.createPatternCanvas(n);let h=new DOMMatrix(o);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const p=t.createPattern(l.canvas,"repeat");return p.setTransform(h),p}}function convertBlackAndWhiteToRGBA({src:u,srcPos:t=0,dest:n,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=util_FeatureTest.isLittleEndian?4278190080:255,[p,d]=l?[o,h]:[h,o],f=i>>3,m=i&7,y=u.length;n=new Uint32Array(n.buffer);let b=0;for(let A=0;A<a;A++){for(const T=t+f;t<T;t++){const w=t<y?u[t]:255;n[b++]=w&128?d:p,n[b++]=w&64?d:p,n[b++]=w&32?d:p,n[b++]=w&16?d:p,n[b++]=w&8?d:p,n[b++]=w&4?d:p,n[b++]=w&2?d:p,n[b++]=w&1?d:p}if(m===0)continue;const _=t<y?u[t++]:255;for(let T=0;T<m;T++)n[b++]=_&1<<7-T?d:p}return{srcPos:t,destPos:b}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(u,t){if(u._removeMirroring)throw new Error("Context is already forwarding operations.");u.__originalSave=u.save,u.__originalRestore=u.restore,u.__originalRotate=u.rotate,u.__originalScale=u.scale,u.__originalTranslate=u.translate,u.__originalTransform=u.transform,u.__originalSetTransform=u.setTransform,u.__originalResetTransform=u.resetTransform,u.__originalClip=u.clip,u.__originalMoveTo=u.moveTo,u.__originalLineTo=u.lineTo,u.__originalBezierCurveTo=u.bezierCurveTo,u.__originalRect=u.rect,u.__originalClosePath=u.closePath,u.__originalBeginPath=u.beginPath,u._removeMirroring=()=>{u.save=u.__originalSave,u.restore=u.__originalRestore,u.rotate=u.__originalRotate,u.scale=u.__originalScale,u.translate=u.__originalTranslate,u.transform=u.__originalTransform,u.setTransform=u.__originalSetTransform,u.resetTransform=u.__originalResetTransform,u.clip=u.__originalClip,u.moveTo=u.__originalMoveTo,u.lineTo=u.__originalLineTo,u.bezierCurveTo=u.__originalBezierCurveTo,u.rect=u.__originalRect,u.closePath=u.__originalClosePath,u.beginPath=u.__originalBeginPath,delete u._removeMirroring},u.save=function(){t.save(),this.__originalSave()},u.restore=function(){t.restore(),this.__originalRestore()},u.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},u.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},u.transform=function(n,i,a,o,l,h){t.transform(n,i,a,o,l,h),this.__originalTransform(n,i,a,o,l,h)},u.setTransform=function(n,i,a,o,l,h){t.setTransform(n,i,a,o,l,h),this.__originalSetTransform(n,i,a,o,l,h)},u.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},u.rotate=function(n){t.rotate(n),this.__originalRotate(n)},u.clip=function(n){t.clip(n),this.__originalClip(n)},u.moveTo=function(n,i){t.moveTo(n,i),this.__originalMoveTo(n,i)},u.lineTo=function(n,i){t.lineTo(n,i),this.__originalLineTo(n,i)},u.bezierCurveTo=function(n,i,a,o,l,h){t.bezierCurveTo(n,i,a,o,l,h),this.__originalBezierCurveTo(n,i,a,o,l,h)},u.rect=function(n,i,a,o){t.rect(n,i,a,o),this.__originalRect(n,i,a,o)},u.closePath=function(){t.closePath(),this.__originalClosePath()},u.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,n,i)):(a=this.canvasFactory.create(n,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function drawImageAtIntegerCoords(u,t,n,i,a,o,l,h,p,d){const[f,m,y,b,A,_]=getCurrentTransform(u);if(m===0&&y===0){const N=l*f+A,O=Math.round(N),P=h*b+_,E=Math.round(P),C=(l+p)*f+A,L=Math.abs(Math.round(C)-O)||1,X=(h+d)*b+_,q=Math.abs(Math.round(X)-E)||1;return u.setTransform(Math.sign(f),0,0,Math.sign(b),O,E),u.drawImage(t,n,i,a,o,0,0,L,q),u.setTransform(f,m,y,b,A,_),[L,q]}if(f===0&&b===0){const N=h*y+A,O=Math.round(N),P=l*m+_,E=Math.round(P),C=(h+d)*y+A,L=Math.abs(Math.round(C)-O)||1,X=(l+p)*m+_,q=Math.abs(Math.round(X)-E)||1;return u.setTransform(0,Math.sign(m),Math.sign(y),0,O,E),u.drawImage(t,n,i,a,o,0,0,q,L),u.setTransform(f,m,y,b,A,_),[q,L]}u.drawImage(t,n,i,a,o,l,h,p,d);const T=Math.hypot(f,m),w=Math.hypot(y,b);return[T*p,w*d]}class CanvasExtraState{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=FONT_IDENTITY_MATRIX;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=TextRenderingMode.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,n){this.clipBox=new Float32Array([0,0,t,n]),this.minMax=MIN_MAX_INIT.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=PathType.FILL,n=null){const i=this.minMax.slice();if(t===PathType.STROKE){n||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(n,XY);const a=XY[0]*this.lineWidth/2,o=XY[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const t=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(t=PathType.FILL,n=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function putBinaryImageData(u,t){if(t instanceof ImageData){u.putImageData(t,0,0);return}const n=t.height,i=t.width,a=n%FULL_CHUNK_HEIGHT,o=(n-a)/FULL_CHUNK_HEIGHT,l=a===0?o:o+1,h=u.createImageData(i,FULL_CHUNK_HEIGHT);let p=0,d;const f=t.data,m=h.data;let y,b,A,_;if(t.kind===util_ImageKind.GRAYSCALE_1BPP){const T=f.byteLength,w=new Uint32Array(m.buffer,0,m.byteLength>>2),N=w.length,O=i+7>>3,P=4294967295,E=util_FeatureTest.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<o?FULL_CHUNK_HEIGHT:a,d=0,b=0;b<A;b++){const C=T-p;let L=0;const X=C>O?i:C*8-7,q=X&-8;let Q=0,K=0;for(;L<q;L+=8)K=f[p++],w[d++]=K&128?P:E,w[d++]=K&64?P:E,w[d++]=K&32?P:E,w[d++]=K&16?P:E,w[d++]=K&8?P:E,w[d++]=K&4?P:E,w[d++]=K&2?P:E,w[d++]=K&1?P:E;for(;L<X;L++)Q===0&&(K=f[p++],Q=128),w[d++]=K&Q?P:E,Q>>=1}for(;d<N;)w[d++]=0;u.putImageData(h,0,y*FULL_CHUNK_HEIGHT)}}else if(t.kind===util_ImageKind.RGBA_32BPP){for(b=0,_=i*FULL_CHUNK_HEIGHT*4,y=0;y<o;y++)m.set(f.subarray(p,p+_)),p+=_,u.putImageData(h,0,b),b+=FULL_CHUNK_HEIGHT;y<l&&(_=i*a*4,m.set(f.subarray(p,p+_)),u.putImageData(h,0,b))}else if(t.kind===util_ImageKind.RGB_24BPP)for(A=FULL_CHUNK_HEIGHT,_=i*A,y=0;y<l;y++){for(y>=o&&(A=a,_=i*A),d=0,b=_;b--;)m[d++]=f[p++],m[d++]=f[p++],m[d++]=f[p++],m[d++]=255;u.putImageData(h,0,y*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${t.kind}`)}function putBinaryImageMask(u,t){if(t.bitmap){u.drawImage(t.bitmap,0,0);return}const n=t.height,i=t.width,a=n%FULL_CHUNK_HEIGHT,o=(n-a)/FULL_CHUNK_HEIGHT,l=a===0?o:o+1,h=u.createImageData(i,FULL_CHUNK_HEIGHT);let p=0;const d=t.data,f=h.data;for(let m=0;m<l;m++){const y=m<o?FULL_CHUNK_HEIGHT:a;({srcPos:p}=convertBlackAndWhiteToRGBA({src:d,srcPos:p,dest:f,width:i,height:y,nonBlackColor:0})),u.putImageData(h,0,m*FULL_CHUNK_HEIGHT)}}function copyCtxState(u,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)u[i]!==void 0&&(t[i]=u[i]);u.setLineDash!==void 0&&(t.setLineDash(u.getLineDash()),t.lineDashOffset=u.lineDashOffset)}function resetCtxToDefault(u){u.strokeStyle=u.fillStyle="#000000",u.fillRule="nonzero",u.globalAlpha=1,u.lineWidth=1,u.lineCap="butt",u.lineJoin="miter",u.miterLimit=10,u.globalCompositeOperation="source-over",u.font="10px sans-serif",u.setLineDash!==void 0&&(u.setLineDash([]),u.lineDashOffset=0);const{filter:t}=u;t!=="none"&&t!==""&&(u.filter="none")}function getImageSmoothingEnabled(u,t){if(t)return!0;Util.singularValueDecompose2dScale(u,XY);const n=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=n&&XY[1]<=n}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};class CanvasGraphics{constructor(t,n,i,a,o,{optionalContentConfig:l,markedContentStack:h=null},p,d){this.ctx=t,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,n=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}beginDrawing({transform:t,viewport:n,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,i){const p=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(t,n,i,a){const o=t.argsArray,l=t.fnArray;let h=n||0;const p=o.length;if(p===h)return h;const d=p-h>EXECUTION_STEPS&&typeof i=="function",f=d?Date.now()+EXECUTION_TIME:0;let m=0;const y=this.commonObjs,b=this.objs;let A;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,i),h;if(A=l[h],A!==OPS.dependency)this[A].apply(this,o[h]);else for(const _ of o[h]){const T=_.startsWith("g_")?y:b;if(!T.has(_))return T.get(_,i),h}if(h++,h===p)return h;if(d&&++m>EXECUTION_STEPS){if(Date.now()>f)return i(),h;m=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),l=Math.max(Math.hypot(n[2],n[3]),1),h=i,p=a,d="prescale1",f,m;for(;o>2&&h>1||l>2&&p>1;){let y=h,b=p;o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/y),l>2&&p>1&&(b=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,l/=p/b),f=this.cachedCanvases.getCanvas(d,y,b),m=f.context,m.clearRect(0,0,y,b),m.drawImage(t,0,0,h,p,0,0,y,b),t=f.canvas,h=y,p=b,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:p}}_createMaskCanvas(t){const n=this.ctx,{width:i,height:a}=t,o=this.current.fillColor,l=this.current.patternFill,h=getCurrentTransform(n);let p,d,f,m;if((t.bitmap||t.data)&&t.count>1){const q=t.bitmap||t.data.buffer;d=JSON.stringify(l?h:[h.slice(0,4),o]),p=this._cachedBitmapsMap.get(q),p||(p=new Map,this._cachedBitmapsMap.set(q,p));const Q=p.get(d);if(Q&&!l){const K=Math.round(Math.min(h[0],h[2])+h[4]),tt=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:Q,offsetX:K,offsetY:tt}}f=Q}f||(m=this.cachedCanvases.getCanvas("maskCanvas",i,a),putBinaryImageMask(m.context,t));let y=Util.transform(h,[1/i,0,0,-1/a,0,0]);y=Util.transform(y,[1,0,0,1,0,-a]);const b=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,i,a],y,b);const[A,_,T,w]=b,N=Math.round(T-A)||1,O=Math.round(w-_)||1,P=this.cachedCanvases.getCanvas("fillCanvas",N,O),E=P.context,C=A,L=_;E.translate(-C,-L),E.transform(...y),f||(f=this._scaleImage(m.canvas,getCurrentTransformInverse(E)),f=f.img,p&&l&&p.set(d,f)),E.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(E),t.interpolate),drawImageAtIntegerCoords(E,f,0,0,f.width,f.height,0,0,i,a),E.globalCompositeOperation="source-in";const X=Util.transform(getCurrentTransformInverse(E),[1,0,0,1,-C,-L]);return E.fillStyle=l?o.getPattern(n,this,X,PathType.FILL):o,E.fillRect(0,0,i,a),p&&!l&&(this.cachedCanvases.delete("fillCanvas"),p.set(d,P.canvas)),{canvas:P.canvas,offsetX:Math.round(C),offsetY:Math.round(L)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=LINE_CAP_STYLES[t]}setLineJoin(t){this.ctx.lineJoin=LINE_JOIN_STYLES[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,n){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,i]of t)switch(n){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,o),mirrorContextOperations(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,i,a){const o=a[0],l=a[1],h=a[2]-o,p=a[3]-l;h===0||p===0||(this.genericComposeSMask(n.context,i,h,p,n.subtype,n.backdrop,n.transferMap,o,l,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,n,i,a,o,l,h,p,d,f,m){let y=t.canvas,b=p-f,A=d-m;if(l)if(b<0||A<0||b+i>y.width||A+a>y.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,a),w=T.context;w.drawImage(y,-b,-A),w.globalCompositeOperation="destination-atop",w.fillStyle=l,w.fillRect(0,0,i,a),w.globalCompositeOperation="source-over",y=T.canvas,b=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(b,A,i,a),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(b,A,i,a),t.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?n.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(h));const _=new Path2D;_.rect(p,d,i,a),n.clip(_),n.globalCompositeOperation="destination-in",n.drawImage(y,b,A,i,a,p,d,i,a),n.restore()}save(){this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,i,a,o,l){this.ctx.transform(t,n,i,a,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,i){let[a]=n;if(!i){a||=n[0]=new Path2D,this[t](a);return}if(!(a instanceof Path2D)){const o=n[0]=new Path2D;for(let l=0,h=a.length;l<h;)switch(a[l++]){case DrawOPS.moveTo:o.moveTo(a[l++],a[l++]);break;case DrawOPS.lineTo:o.lineTo(a[l++],a[l++]);break;case DrawOPS.curveTo:o.bezierCurveTo(a[l++],a[l++],a[l++],a[l++],a[l++],a[l++]);break;case DrawOPS.closePath:o.closePath();break;default:warn(`Unrecognized drawing path operator: ${a[l-1]}`);break}a=o}Util.axialAlignedBoundingBox(i,getCurrentTransform(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,n=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,getCurrentTransformInverse(i),PathType.STROKE),o){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);n&&this.consumePath(t,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,n=!0){const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const p=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=a.getPattern(i,this,getCurrentTransformInverse(i),PathType.FILL),p){const d=new Path2D;d.addPath(t,i.getTransform().invertSelf().multiplySelf(p)),t=d}l=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),l&&i.restore(),n&&this.consumePath(t,h)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,n=this.ctx;if(t===void 0)return;const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:o,x:l,y:h,fontSize:p,path:d}of t)i.addPath(d,new DOMMatrix(o).preMultiplySelf(a).translate(l,h).scale(p,-p));n.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,n){const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||FONT_IDENTITY_MATRIX,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const o=i.loadedName||"sans-serif",l=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const p=i.italic?"italic":"normal";let d=n;n<MIN_FONT_SIZE?d=MIN_FONT_SIZE:n>MAX_FONT_SIZE&&(d=MAX_FONT_SIZE),this.current.fontSizeScale=n/d,this.ctx.font=`${p} ${h} ${d}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}setTextMatrix(t){const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,n,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(n)),a}paintChar(t,n,i,a,o){const l=this.ctx,h=this.current,p=h.font,d=h.textRenderingMode,f=h.fontSize/h.fontSizeScale,m=d&TextRenderingMode.FILL_STROKE_MASK,y=!!(d&TextRenderingMode.ADD_TO_PATH_FLAG),b=h.patternFill&&!p.missingFile,A=h.patternStroke&&!p.missingFile;let _;if((p.disableFontFace||y||b||A)&&(_=p.getPathGenerator(this.commonObjs,t)),p.disableFontFace||b||A){l.save(),l.translate(n,i),l.scale(f,-f);let T;if((m===TextRenderingMode.FILL||m===TextRenderingMode.FILL_STROKE)&&(a?(T=l.getTransform(),l.setTransform(...a),l.fill(this.#n(_,T,a))):l.fill(_)),m===TextRenderingMode.STROKE||m===TextRenderingMode.FILL_STROKE)if(o){T||=l.getTransform(),l.setTransform(...o);const{a:w,b:N,c:O,d:P}=T,E=Util.inverseTransform(o),C=Util.transform([w,N,O,P,0,0],E);Util.singularValueDecompose2dScale(C,XY),l.lineWidth*=Math.max(XY[0],XY[1])/f,l.stroke(this.#n(_,T,o))}else l.lineWidth/=f,l.stroke(_);l.restore()}else(m===TextRenderingMode.FILL||m===TextRenderingMode.FILL_STROKE)&&l.fillText(t,n,i),(m===TextRenderingMode.STROKE||m===TextRenderingMode.FILL_STROKE)&&l.strokeText(t,n,i);y&&(this.pendingTextPaths||=[]).push({transform:getCurrentTransform(l),x:n,y:i,fontSize:f,path:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<n.length;a+=4)if(n[a]>0&&n[a]<255){i=!0;break}return shadow(this,"isFontSubpixelAAEnabled",i)}showText(t){const n=this.current,i=n.font;if(i.isType3Font)return this.showType3Text(t);const a=n.fontSize;if(a===0)return;const o=this.ctx,l=n.fontSizeScale,h=n.charSpacing,p=n.wordSpacing,d=n.fontDirection,f=n.textHScale*d,m=t.length,y=i.vertical,b=y?1:-1,A=i.defaultVMetrics,_=a*n.fontMatrix[0],T=n.textRenderingMode===TextRenderingMode.FILL&&!i.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),d>0?o.scale(f,-1):o.scale(f,1);let w,N;if(n.patternFill){o.save();const L=n.fillColor.getPattern(o,this,getCurrentTransformInverse(o),PathType.FILL);w=getCurrentTransform(o),o.restore(),o.fillStyle=L}if(n.patternStroke){o.save();const L=n.strokeColor.getPattern(o,this,getCurrentTransformInverse(o),PathType.STROKE);N=getCurrentTransform(o),o.restore(),o.strokeStyle=L}let O=n.lineWidth;const P=n.textMatrixScale;if(P===0||O===0){const L=n.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(L===TextRenderingMode.STROKE||L===TextRenderingMode.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=P;if(l!==1&&(o.scale(l,l),O/=l),o.lineWidth=O,i.isInvalidPDFjsFont){const L=[];let X=0;for(const q of t)L.push(q.unicode),X+=q.width;o.fillText(L.join(""),0,0),n.x+=X*_*f,o.restore(),this.compose();return}let E=0,C;for(C=0;C<m;++C){const L=t[C];if(typeof L=="number"){E+=b*L*a/1e3;continue}let X=!1;const q=(L.isSpace?p:0)+h,Q=L.fontChar,K=L.accent;let tt,gt,ct=L.width;if(y){const I=L.vmetric||A,V=-(L.vmetric?I[1]:ct*.5)*_,j=I[2]*_;ct=I?-I[0]:ct,tt=V/l,gt=(E+j)/l}else tt=E/l,gt=0;if(i.remeasure&&ct>0){const I=o.measureText(Q).width*1e3/a*l;if(ct<I&&this.isFontSubpixelAAEnabled){const V=ct/I;X=!0,o.save(),o.scale(V,1),tt/=V}else ct!==I&&(tt+=(ct-I)/2e3*a/l)}if(this.contentVisible&&(L.isInFont||i.missingFile)){if(T&&!K)o.fillText(Q,tt,gt);else if(this.paintChar(Q,tt,gt,w,N),K){const I=tt+a*K.offset.x/l,V=gt-a*K.offset.y/l;this.paintChar(K.fontChar,I,V,w,N)}}const J=y?ct*_-q*d:ct*_+q*d;E+=J,X&&o.restore()}y?n.y-=E:n.x+=E*f,o.restore(),this.compose()}showType3Text(t){const n=this.ctx,i=this.current,a=i.font,o=i.fontSize,l=i.fontDirection,h=a.vertical?1:-1,p=i.charSpacing,d=i.wordSpacing,f=i.textHScale*l,m=i.fontMatrix||FONT_IDENTITY_MATRIX,y=t.length,b=i.textRenderingMode===TextRenderingMode.INVISIBLE;let A,_,T,w;if(!(b||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(f,l),A=0;A<y;++A){if(_=t[A],typeof _=="number"){w=h*_*o/1e3,this.ctx.translate(w,0),i.x+=w*f;continue}const N=(_.isSpace?d:0)+p,O=a.charProcOperatorList[_.operatorListId];O?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...m),this.executeOperatorList(O),this.restore()):warn(`Type3 character "${_.operatorListId}" is not available.`);const P=[_.width,0];Util.applyTransform(P,m),T=P[0]*o+N,n.translate(T,0),i.x+=T*f}n.restore()}}setCharWidth(t,n){}setCharWidthAndBounds(t,n,i,a,o,l){const h=new Path2D;h.rect(i,a,o-i,l-a),this.ctx.clip(h),this.endPath()}getColorN_Pattern(t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||getCurrentTransform(this.ctx),a={createCanvasGraphics:o=>new CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new TilingPattern(t,this.ctx,a,i)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=getShadingPattern(this.getObject(t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(t){if(!this.contentVisible)return;const n=this.ctx;this.save();const i=this._getPattern(t);n.fillStyle=i.getPattern(n,this,getCurrentTransformInverse(n),PathType.SHADING);const a=getCurrentTransformInverse(n);if(a){const{width:o,height:l}=n.canvas,h=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,o,l],a,h);const[p,d,f,m]=h;this.ctx.fillRect(p,d,f-p,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(t,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=getCurrentTransform(this.ctx),n)){Util.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,o,l]=n,h=new Path2D;h.rect(i,a,o-i,l-a),this.ctx.clip(h),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||info("TODO: Support non-isolated groups."),t.knockout&&warn("Knockout groups not supported.");const i=getCurrentTransform(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(t.bbox,getCurrentTransform(n),a);const o=[0,0,n.canvas.width,n.canvas.height];a=Util.intersect(a,o)||[0,0,0,0];const l=Math.floor(a[0]),h=Math.floor(a[1]),p=Math.max(Math.ceil(a[2])-l,1),d=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,d]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(f,p,d),y=m.context;y.translate(-l,-h),y.transform(...i);let b=new Path2D;const[A,_,T,w]=t.bbox;if(b.rect(A,_,T-A,w-_),t.matrix){const N=new Path2D;N.addPath(b,new DOMMatrix(t.matrix)),b=N}y.clip(b),t.smask?this.smaskStack.push({canvas:m.canvas,context:y,offsetX:l,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(l,h),n.save()),copyCtxState(n,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,n,i,a,o){if(this.#t(),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],h=n[3]-n[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=h,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:p}=this,d=Math.ceil(l*this.outputScaleX*p),f=Math.ceil(h*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,h*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath();const p=new Path2D;p.rect(n[0],n[1],l,h),this.ctx.clip(p)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(t.data,t),t.count=n;const i=this.ctx,a=this._createMaskCanvas(t),o=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,i=0,a=0,o,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const p=getCurrentTransform(h);h.transform(n,i,a,o,0,0);const d=this._createMaskCanvas(t);h.setTransform(1,0,0,1,d.offsetX-p[4],d.offsetY-p[5]);for(let f=0,m=l.length;f<m;f+=2){const y=Util.transform(p,[n,i,a,o,l[f],l[f+1]]);h.drawImage(d.canvas,y[4],y[5])}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:l,width:h,height:p,transform:d}=o,f=this.cachedCanvases.getCanvas("maskCanvas",h,p),m=f.context;m.save();const y=this.getObject(l,o);putBinaryImageMask(m,y),m.globalCompositeOperation="source-in",m.fillStyle=a?i.getPattern(m,this,getCurrentTransformInverse(n),PathType.FILL):i,m.fillRect(0,0,h,p),m.restore(),n.save(),n.transform(...d),n.scale(1,-1),drawImageAtIntegerCoords(n,f.canvas,0,0,h,p,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(t,n,i,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){warn("Dependent image isn't ready yet");return}const l=o.width,h=o.height,p=[];for(let d=0,f=a.length;d<f;d+=2)p.push({transform:[n,0,0,i,a[d],a[d+1]],x:0,y:0,w:l,h});this.paintInlineImageXObjectGroup(o,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:i,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(n,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const n=t.width,i=t.height,a=this.ctx;this.save();const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/n,-1/i);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,i).context;putBinaryImageData(d,t),l=this.applyTransferMapsToCanvas(d)}const h=this._scaleImage(l,getCurrentTransformInverse(a));a.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(a),t.interpolate),drawImageAtIntegerCoords(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,n,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,n){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,l=t.height,p=this.cachedCanvases.getCanvas("inlineImage",o,l).context;putBinaryImageData(p,t),a=this.applyTransferMapsToCanvas(p)}for(const o of n)i.save(),i.transform(...o.transform),i.scale(1,-1),drawImageAtIntegerCoords(i,a,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,n){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip&&(i||(this.pendingClip===EO_CLIP?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=getCurrentTransform(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:i,c:a,d:o}=this.ctx.getTransform();let l,h;if(i===0&&a===0){const p=Math.abs(n),d=Math.abs(o);if(p===d)if(t===0)l=h=1/p;else{const f=p*t;l=h=f<1?1/f:1}else if(t===0)l=1/p,h=1/d;else{const f=p*t,m=d*t;l=f<1?1/f:1,h=m<1?1/m:1}}else{const p=Math.abs(n*o-i*a),d=Math.hypot(n,i),f=Math.hypot(a,o);if(t===0)l=f/p,h=d/p;else{const m=t*p;l=f>m?f/m:1,h=d>m?d/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:i,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){i.lineWidth=(a||1)*o,i.stroke(t);return}const h=i.getLineDash();n&&i.save(),i.scale(o,l),SCALE_MATRIX.a=1/o,SCALE_MATRIX.d=1/l;const p=new Path2D;if(p.addPath(t,SCALE_MATRIX),h.length>0){const d=Math.max(o,l);i.setLineDash(h.map(f=>f/d)),i.lineDashOffset/=d}i.lineWidth=a||1,i.stroke(p),n&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const u in OPS)CanvasGraphics.prototype[u]!==void 0&&(CanvasGraphics.prototype[OPS[u]]=CanvasGraphics.prototype[u]);class GlobalWorkerOptions{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Metadata{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const INTERNAL=Symbol("INTERNAL");class OptionalContentGroup{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:n,intent:i,usage:a,rbGroups:o}){this.#t=!!(t&RenderingIntentFlag.DISPLAY),this.#e=!!(t&RenderingIntentFlag.PRINT),this.name=n,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,i=!1){t!==INTERNAL&&unreachable("Internal method `_setVisible` called."),this.#n=i,this.#i=n}}class OptionalContentConfig{#t=null;#e=new Map;#n=null;#i=null;constructor(t,n=RenderingIntentFlag.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new OptionalContentGroup(n,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(INTERNAL,!1);for(const i of t.on)this.#e.get(i)._setVisible(INTERNAL,!0);for(const i of t.off)this.#e.get(i)._setVisible(INTERNAL,!1);this.#n=this.getHash()}}#a(t){const n=t.length;if(n<2)return!0;const i=t[0];for(let a=1;a<n;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return warn(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return info("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(warn(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return warn(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return warn(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return warn(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return warn(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return warn(`Unknown optional content policy ${t.policy}.`),!0}return warn(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,i=!0){const a=this.#e.get(t);if(!a){warn(`Optional content group not found: ${t}`);return}if(i&&n&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(INTERNAL,!1,!0);a._setVisible(INTERNAL,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#e.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,n);break;case"OFF":this.setVisibility(a,!1,n);break;case"Toggle":this.setVisibility(a,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new MurmurHash3_64;for(const[n,i]of this.#e)t.update(`${n}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class PDFDataTransportStream{constructor(t,{disableRange:n=!1,disableStream:i=!1}){assert(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,o?.length>0){const p=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((p,d)=>{this._onReceiveData({begin:p,chunk:d})}),t.addProgressListener((p,d)=>{this._onProgress({loaded:p,total:d})}),t.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});assert(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const i=new PDFDataTransportStreamRangeReader(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(t,n,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=isPdfFile(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,n,i){this._stream=t,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(u){let t=!0,n=i("filename\\*","i").exec(u);if(n){n=n[1];let f=h(n);return f=unescape(f),f=p(f),f=d(f),o(f)}if(n=l(u),n){const f=d(n);return o(f)}if(n=i("filename","i").exec(u),n){n=n[1];let f=h(n);return f=d(f),o(f)}function i(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(f,{fatal:!0}),b=stringToBytes(m);m=y.decode(b),t=!1}catch{}}return m}function o(f){return t&&/[\x80-\xff]/.test(f)&&(f=a("utf-8",f),t&&(f=a("iso-8859-1",f))),f}function l(f){const m=[];let y;const b=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(f))!==null;){let[,_,T,w]=y;if(_=parseInt(_,10),_ in m){if(_===0)break;continue}m[_]=[T,w]}const A=[];for(let _=0;_<m.length&&_ in m;++_){let[T,w]=m[_];w=h(w),T&&(w=unescape(w),_===0&&(w=p(w))),A.push(w)}return A.join("")}function h(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let y=0;y<m.length;++y){const b=m[y].indexOf('"');b!==-1&&(m[y]=m[y].slice(0,b),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function p(f){const m=f.indexOf("'");if(m===-1)return f;const y=f.slice(0,m),A=f.slice(m+1).replace(/^[^']*'/,"");return a(y,A)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,T){return String.fromCharCode(parseInt(T,16))}),a(y,A);try{A=atob(A)}catch{}return a(y,A)})}return""}function createHeaders(u,t){const n=new Headers;if(!u||!t||typeof t!="object")return n;for(const i in t){const a=t[i];a!==void 0&&n.append(i,a)}return n}function getResponseOrigin(u){return URL.parse(u)?.origin??null}function validateRangeRequestCapabilities({responseHeaders:u,isHttp:t,rangeChunkSize:n,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(u.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*n)||i||!t||u.get("Accept-Ranges")!=="bytes"||(u.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function extractFilenameFromHeader(u){const t=u.get("Content-Disposition");if(t){let n=getFilenameFromContentDispositionHeader(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(isPdfFile(n))return n}return null}function createResponseError(u,t){return new ResponseException(`Unexpected server response (${u}) while retrieving PDF "${t}".`,u,u===404||u===0&&t.startsWith("file:"))}function validateResponseStatus(u){return u===200||u===206}function createFetchOptions(u,t,n){return{method:"GET",headers:u,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:(warn(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class PDFFetchStream{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const i=new PDFFetchStreamRangeReader(this,t,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class PDFFetchStreamReader{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const i=new Headers(t.headers),a=n.url;fetch(a,createFetchOptions(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=getResponseOrigin(o.url),!validateResponseStatus(o.status))throw createResponseError(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:p}=validateRangeRequestCapabilities({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=p||this._contentLength,this._filename=extractFilenameFromHeader(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,n,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${i-1}`);const l=a.url;fetch(l,createFetchOptions(o,this._withCredentials,this._abortController)).then(h=>{const p=getResponseOrigin(h.url);if(p!==t._responseOrigin)throw new Error(`Expected range response-origin "${p}" to match "${t._responseOrigin}".`);if(!validateResponseStatus(h.status))throw createResponseError(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:getArrayBuffer(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(u){const t=u.response;return typeof t!="string"?t:stringToBytes(t).buffer}class NetworkManager{_responseOrigin=null;constructor({url:t,httpHeaders:n,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=createHeaders(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,l]of this.headers)n.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=PARTIAL_CONTENT_RESPONSE):a.expectedStatus=OK_RESPONSE,n.responseType="arraybuffer",assert(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,i),n.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,n.send(null),i}onProgress(t,n){const i=this.pendingRequests[t];i&&i.onProgress?.(n)}onStateChange(t,n){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const o=a.status||OK_RESPONSE;if(!(o===OK_RESPONSE&&i.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&o!==i.expectedStatus){i.onError(a.status);return}const h=network_getArrayBuffer(a);if(o===PARTIAL_CONTENT_RESPONSE){const p=a.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);d?i.onDone({begin:parseInt(d[1],10),chunk:h}):(warn('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class PDFNetworkStream{constructor(t){this._source=t,this._manager=new NetworkManager(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const i=new PDFNetworkStreamRangeRequestReader(this._manager,t,n);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class PDFNetworkStreamFullRequestReader{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=getResponseOrigin(n.responseURL);const i=n.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[p,...d]=h.split(": ");return[p,d.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=validateRangeRequestCapabilities({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=extractFilenameFromHeader(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=createResponseError(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,n,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=createResponseError(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(u){if(urlRegex.test(u))return new URL(u);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(u))}class PDFNodeStream{constructor(t){this.source=t,this.url=parseUrlOrPath(t.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const i=new PDFNodeStreamFsRangeReader(this,t,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class PDFNodeStreamFsFullReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=createResponseError(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(t,n,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:n,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");class PDFObjects{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:INITIAL_DATA}}get(t,n=null){if(n){const a=this.#e(t);return a.promise.then(()=>n(a.data)),null}const i=this.#t[t];if(!i||i.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const n=this.#t[t];return!!n&&n.data!==INITIAL_DATA}delete(t){const n=this.#t[t];return!n||n.data===INITIAL_DATA?!1:(delete this.#t[t],!0)}resolve(t,n=null){const i=this.#e(t);i.data=n,i.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==INITIAL_DATA&&(yield[t,n])}}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;class TextLayer{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#o=0;#r=0;#c=null;#u=null;#f=0;#h=0;#d=Object.create(null);#l=[];#p=null;#m=[];#g=new WeakMap;#b=null;static#y=new Map;static#A=new Map;static#E=new WeakMap;static#w=null;static#_=new Set;constructor({textContentSource:t,container:n,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(p){p.enqueue(t),p.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#u=n,this.#h=i.scale*OutputScale.pixelRatio,this.#f=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:h}=i.rawDims;this.#b=[1,0,0,-1,-l,h+o],this.#r=a,this.#o=o,TextLayer.#M(),setLayerDimensions(n,i),this.#t.promise.finally(()=>{TextLayer.#_.delete(this),this.#s=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:n,done:i})=>{if(i){this.#t.resolve();return}this.#a??=n.lang,Object.assign(this.#d,n.styles),this.#P(n.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),TextLayer.#_.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const i=t.scale*OutputScale.pixelRatio,a=t.rotation;if(a!==this.#f&&(n?.(),this.#f=a,setLayerDimensions(this.#u,{rotation:a})),i!==this.#h){n?.(),this.#h=i;const o={div:null,properties:null,ctx:TextLayer.#C(this.#a)};for(const l of this.#m)o.properties=this.#g.get(l),o.div=l,this.#x(o)}}cancel(){const t=new AbortException("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#l}#P(t){if(this.#n)return;this.#s.ctx??=TextLayer.#C(this.#a);const n=this.#m,i=this.#l;for(const a of t){if(n.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id!==null&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#R(a)}}#R(t){const n=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(n);const a=Util.transform(this.#b,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#d[t.fontName];l.vertical&&(o+=Math.PI/2);let h=this.#i&&l.fontSubstitution||l.fontFamily;h=TextLayer.fontFamilyMap.get(h)||h;const p=Math.hypot(a[2],a[3]),d=p*TextLayer.#O(h,l,this.#a);let f,m;o===0?(f=a[4],m=a[5]-d):(f=a[4]+d*Math.sin(o),m=a[5]-d*Math.cos(o));const y="calc(var(--total-scale-factor) *",b=n.style;this.#e===this.#u?(b.left=`${(100*f/this.#r).toFixed(2)}%`,b.top=`${(100*m/this.#o).toFixed(2)}%`):(b.left=`${y}${f.toFixed(2)}px)`,b.top=`${y}${m.toFixed(2)}px)`),b.fontSize=`${y}${(TextLayer.#w*p).toFixed(2)}px)`,b.fontFamily=h,i.fontSize=p,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#i&&(n.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);_!==T&&Math.max(_,T)/Math.min(_,T)>1.5&&(A=!0)}if(A&&(i.canvasWidth=l.vertical?t.height:t.width),this.#g.set(n,i),this.#s.div=n,this.#s.properties=i,this.#x(this.#s),i.hasText&&this.#e.append(n),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#x(t){const{div:n,properties:i,ctx:a}=t,{style:o}=n;let l="";if(TextLayer.#w>1&&(l=`scale(${1/TextLayer.#w})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:h}=o,{canvasWidth:p,fontSize:d}=i;TextLayer.#S(a,d*this.#h,h);const{width:f}=a.measureText(n.textContent);f>0&&(l=`scaleX(${p*this.#h/f}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#_.size>0)){this.#y.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#C(t=null){let n=this.#A.get(t||="");if(!n){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),n=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,n),this.#E.set(n,{size:0,family:""})}return n}static#S(t,n,i){const a=this.#E.get(t);n===a.size&&i===a.family||(t.font=`${n}px ${i}`,a.size=n,a.family=i)}static#M(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#O(t,n,i){const a=this.#y.get(t);if(a)return a;const o=this.#C(i);o.canvas.width=o.canvas.height=DEFAULT_FONT_SIZE,this.#S(o,DEFAULT_FONT_SIZE,t);const l=o.measureText(""),h=l.fontBoundingBoxAscent,p=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let d=.8;return h?d=h/(h+p):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?d=n.ascent:n.descent&&(d=1+n.descent)),this.#y.set(t,d),d}}class XfaText{static textContent(t){const n=[],i={items:n,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if(XfaText.shouldBuildText(h))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&n.push({str:l}),!!o.children)for(const p of o.children)a(p)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(u={}){typeof u=="string"||u instanceof URL?u={url:u}:(u instanceof ArrayBuffer||ArrayBuffer.isView(u))&&(u={data:u});const t=new PDFDocumentLoadingTask,{docId:n}=t,i=u.url?getUrlProp(u.url):null,a=u.data?getDataProp(u.data):null,o=u.httpHeaders||null,l=u.withCredentials===!0,h=u.password??null,p=u.range instanceof PDFDataRangeTransport?u.range:null,d=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:2**16;let f=u.worker instanceof PDFWorker?u.worker:null;const m=u.verbosity,y=typeof u.docBaseUrl=="string"&&!isDataScheme(u.docBaseUrl)?u.docBaseUrl:null,b=getFactoryUrlProp(u.cMapUrl),A=u.cMapPacked!==!1,_=u.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),T=getFactoryUrlProp(u.iccUrl),w=getFactoryUrlProp(u.standardFontDataUrl),N=u.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),O=getFactoryUrlProp(u.wasmUrl),P=u.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),E=u.stopAtErrors!==!0,C=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,L=u.isEvalSupported!==!1,X=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!isNodeJS,q=typeof u.isImageDecoderSupported=="boolean"?u.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,K=typeof u.disableFontFace=="boolean"?u.disableFontFace:isNodeJS,tt=u.fontExtraProperties===!0,gt=u.enableXfa===!0,ct=u.ownerDocument||globalThis.document,J=u.disableRange===!0,I=u.disableStream===!0,V=u.disableAutoFetch===!0,j=u.pdfBug===!0,M=u.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),S=u.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),k=u.enableHWA===!0,H=u.useWasm!==!1,U=p?p.length:u.length??NaN,x=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!isNodeJS&&!K,R=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:!!(_===DOMCMapReaderFactory&&N===DOMStandardFontDataFactory&&P===DOMWasmFactory&&b&&w&&O&&isValidFetchUrl(b,document.baseURI)&&isValidFetchUrl(w,document.baseURI)&&isValidFetchUrl(O,document.baseURI)),F=null;setVerbosityLevel(m);const G={canvasFactory:new M({ownerDocument:ct,enableHWA:k}),filterFactory:new S({docId:n,ownerDocument:ct}),cMapReaderFactory:R?null:new _({baseUrl:b,isCompressed:A}),standardFontDataFactory:R?null:new N({baseUrl:w}),wasmFactory:R?null:new P({baseUrl:O})};f||(f=PDFWorker.create({verbosity:m,port:GlobalWorkerOptions.workerPort}),t._worker=f);const z={docId:n,apiVersion:"5.3.31",data:a,password:h,disableAutoFetch:V,rangeChunkSize:d,length:U,docBaseUrl:y,enableXfa:gt,evaluatorOptions:{maxImageSize:C,disableFontFace:K,ignoreErrors:E,isEvalSupported:L,isOffscreenCanvasSupported:X,isImageDecoderSupported:q,canvasMaxAreaInBytes:Q,fontExtraProperties:tt,useSystemFonts:x,useWasm:H,useWorkerFetch:R,cMapUrl:b,iccUrl:T,standardFontDataUrl:w,wasmUrl:O}},Y={ownerDocument:ct,pdfBug:j,styleElement:F,loadingParams:{disableAutoFetch:V,enableXfa:gt}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const $=f.messageHandler.sendWithPromise("GetDocRequest",z,a?[a.buffer]:null);let at;if(p)at=new PDFDataTransportStream(p,{disableRange:J,disableStream:I});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const st=isValidFetchUrl(i)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;at=new st({url:i,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:d,disableRange:J,disableStream:I})}return $.then(st=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ot=new MessageHandler(n,st,f.port),bt=new WorkerTransport(ot,t,at,Y,G);t._transport=bt,ot.send("Ready",null)})}).catch(t._capability.reject),t}class PDFDocumentLoadingTask{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${PDFDocumentLoadingTask.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class PDFDataRangeTransport{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,n,i=!1,a=null){this.length=t,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,n){for(const i of this.#a)i(t,n)}onDataProgress(t,n){this.#t.promise.then(()=>{for(const i of this.#i)i(t,n)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const n of this.#n)n(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,n){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class PDFDocumentProxy{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class PDFPageProxy{#t=!1;constructor(t,n,i,a=!1){this._pageIndex=t,this._pageInfo=n,this._transport=i,this._stats=a?new StatTimer:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:i="display",annotationMode:a=AnnotationMode.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:m=!1}){this._stats?.time("Overall");const y=this._transport.getRenderingIntent(i,a,f,m),{renderingIntent:b,cacheKey:A}=y;this.#t=!1,h||=this._transport.getOptionalContentConfig(b);let _=this._intentStates.get(A);_||(_=Object.create(null),this._intentStates.set(A,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const T=!!(b&RenderingIntentFlag.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(y));const w=P=>{_.renderTasks.delete(N),T&&(this.#t=!0),this.#e(),P?(N.capability.reject(P),this._abortOperatorList({intentState:_,reason:P instanceof Error?P:new Error(P)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new InternalRenderTask({callback:w,params:{canvasContext:t,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:d});(_.renderTasks||=new Set).add(N);const O=N.task;return Promise.all([_.displayReadyCapability.promise,h]).then(([P,E])=>{if(this.destroyed){w();return}if(this._stats?.time("Rendering"),!(E.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:P,optionalContentConfig:E}),N.operatorListChanged()}).catch(w),O}getOperatorList({intent:t="display",annotationMode:n=AnnotationMode.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(p))}const l=this._transport.getRenderingIntent(t,n,i,a,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let p;return h.opListReadCapability||(p=Object.create(null),p.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(p),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>XfaText.textContent(i));const n=this.streamTextContent(t);return new Promise(function(i,a){function o(){l.read().then(function({value:p,done:d}){if(d){i(h);return}h.lang??=p.lang,Object.assign(h.styles,p.styles),h.items.push(...p.items),o()},a)}const l=n.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#e();return t&&n&&(this._stats&&=new StatTimer),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,n){const i=this._intentStates.get(n);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let i=0,a=t.length;i<a;i++)n.operatorList.fnArray.push(t.fnArray[i]),n.operatorList.argsArray.push(t.argsArray[i]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:l}=i,p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:a},l).getReader(),d=this._intentStates.get(n);d.streamReader=p;const f=()=>{p.read().then(({value:m,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),f())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:t,reason:n,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},a);return}}if(t.streamReader.cancel(new AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var ei,en,Mn,Ai,br,_i,Si,Re,gr,pd,gd,sa,ls,mr;const Jt=class Jt{constructor({name:t=null,port:n=null,verbosity:i=getVerbosityLevel()}={}){hn(this,Re);hn(this,ei,Promise.withResolvers());hn(this,en,null);hn(this,Mn,null);hn(this,Ai,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,n){if(Zt(Jt,Si).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Zt(Jt,Si).set(n,this),dn(this,Re,pd).call(this,n)}else dn(this,Re,gd).call(this)}get promise(){return Zt(this,ei).promise}get port(){return Zt(this,Mn)}get messageHandler(){return Zt(this,en)}destroy(){this.destroyed=!0,Zt(this,Ai)?.terminate(),Ne(this,Ai,null),Zt(Jt,Si).delete(Zt(this,Mn)),Ne(this,Mn,null),Zt(this,en)?.destroy(),Ne(this,en,null)}static create(t){const n=Zt(this,Si).get(t?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Jt(t)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>Zt(this,ls,mr)?Zt(this,ls,mr):(await import(this.workerSrc)).WorkerMessageHandler)())}};ei=new WeakMap,en=new WeakMap,Mn=new WeakMap,Ai=new WeakMap,br=new WeakMap,_i=new WeakMap,Si=new WeakMap,Re=new WeakSet,gr=function(){Zt(this,ei).resolve(),Zt(this,en).send("configure",{verbosity:this.verbosity})},pd=function(t){Ne(this,Mn,t),Ne(this,en,new MessageHandler("main","worker",t)),Zt(this,en).on("ready",()=>{}),dn(this,Re,gr).call(this)},gd=function(){if(Zt(Jt,_i)||Zt(Jt,ls,mr)){dn(this,Re,sa).call(this);return}let{workerSrc:t}=Jt;try{Jt._isSameOrigin(window.location,t)||(t=Jt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),i=new MessageHandler("main","worker",n),a=()=>{o.abort(),i.destroy(),n.terminate(),this.destroyed?Zt(this,ei).reject(new Error("Worker was destroyed")):dn(this,Re,sa).call(this)},o=new AbortController;n.addEventListener("error",()=>{Zt(this,Ai)||a()},{signal:o.signal}),i.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}Ne(this,en,i),Ne(this,Mn,n),Ne(this,Ai,n),dn(this,Re,gr).call(this)}),i.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{dn(this,Re,sa).call(this)}});const l=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};l();return}catch{info("The worker has been disabled.")}dn(this,Re,sa).call(this)},sa=function(){Zt(Jt,_i)||(warn("Setting up fake worker."),Ne(Jt,_i,!0)),Jt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Zt(this,ei).reject(new Error("Worker was destroyed"));return}const n=new LoopbackPort;Ne(this,Mn,n);const i=`fake${fd(Jt,br)._++}`,a=new MessageHandler(i+"_worker",i,n);t.setup(a,n),Ne(this,en,new MessageHandler(i,i+"_worker",n)),dn(this,Re,gr).call(this)}).catch(t=>{Zt(this,ei).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ls=new WeakSet,mr=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},hn(Jt,ls),hn(Jt,br,0),hn(Jt,_i,!1),hn(Jt,Si,new WeakMap),isNodeJS&&(Ne(Jt,_i,!0),GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),Jt._isSameOrigin=(t,n)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(n,i);return i.origin===a.origin},Jt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Jt.fromPort=t=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt.create(t)};let PDFWorker=Jt;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,n,i,a,o){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,n=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,a),a}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(t,n=AnnotationMode.ENABLE,i=null,a=!1,o=!1){let l=RenderingIntentFlag.DISPLAY,h=SerializableEmpty;switch(t){case"any":l=RenderingIntentFlag.ANY;break;case"display":break;case"print":l=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${t}`)}const p=l&RenderingIntentFlag.PRINT&&i instanceof PrintAnnotationStorage?i:this.annotationStorage;switch(n){case AnnotationMode.DISABLE:l+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:l+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:l+=RenderingIntentFlag.ANNOTATIONS_STORAGE,h=p.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${n}`)}a&&(l+=RenderingIntentFlag.IS_EDITING),o&&(l+=RenderingIntentFlag.OPLIST);const{ids:d,hash:f}=p.modifiedIds,m=[l,h.hash,f];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:h,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),TextLayer.cleanup(),this._networkStream?.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(i,a)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}assert(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{n.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(i,a)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){a.close();return}assert(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(i,this))}),t.on("DocException",i=>{n._capability.reject(wrapReason(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!n.onPassword)throw wrapReason(i);const a=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};n.onPassword(a,i.code)}catch(a){this.#a.reject(a)}return this.#a.promise}),t.on("DataLoaded",i=>{n.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const d=o.error;warn(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,h=new FontFaceObject(o,l);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:p}=o;assert(p,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,f]of d.objs)if(f?.ref===p)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,o,l])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i)){if(h._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{this.destroyed||n.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,i=this.#n.get(n);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const l=new PDFPageProxy(n,o,this,this._params.pdfBug);return this.#e.set(n,l),l});return this.#n.set(n,a),a}getPageIndex(t){return isRefProxy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(n=>new OptionalContentConfig(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),TextLayer.cleanup()}}cachedPageNumber(t){if(!isRefProxy(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(n)??null}}class RenderTask{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class InternalRenderTask{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:p,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:y=null}){this.callback=t,this.params=n,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=p,this.filterFactory=d,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:a,transform:o,background:l}=this.params;this.gfx=new CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),InternalRenderTask.#e.delete(this._canvas),t||=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="5.3.31",build="47ad820d9";function makeColorComp(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}function scaleAndClamp(u){return Math.max(0,Math.min(255,255*u))}class ColorConverters{static CMYK_G([t,n,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*n+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=scaleAndClamp(t),[t,t,t]}static G_HTML([t]){const n=makeColorComp(t);return`#${n}${n}${n}`}static RGB_G([t,n,i]){return["G",.3*t+.59*n+.11*i]}static RGB_rgb(t){return t.map(scaleAndClamp)}static RGB_HTML(t){return`#${t.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,n+a)]}static CMYK_rgb([t,n,i,a]){return[scaleAndClamp(1-Math.min(1,t+a)),scaleAndClamp(1-Math.min(1,i+a)),scaleAndClamp(1-Math.min(1,n+a))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,i]){const a=1-t,o=1-n,l=1-i,h=Math.min(a,o,l);return["CMYK",a,o,l,h]}}class BaseSVGFactory{create(t,n,i=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${n}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${n}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(t){return document.createElementNS(SVG_NS,t)}}class XfaLayer{static setupStorage(t,n,i,a,o){const l=a.getValue(n,{value:null});switch(i.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(l.value===i.attributes.xfaOn?t.setAttribute("checked",!0):l.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(n,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const h of i.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const p=h.target.options,d=p.selectedIndex===-1?"":p[p.selectedIndex].value;a.setValue(n,{value:d})});break}}static setAttributes({html:t,element:n,storage:i=null,intent:a,linkService:o}){const{attributes:l}=n,h=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[p,d]of Object.entries(l))if(d!=null)switch(p){case"class":d.length&&t.setAttribute(p,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!h||p!=="href"&&p!=="newWindow")&&t.setAttribute(p,d)}h&&o.addLinkAttributes(t,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(t,l.dataId,n,i)}static render(t){const n=t.annotationStorage,i=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:i});const h=o!=="richText",p=t.div;if(p.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;p.style.transform=m}h&&p.setAttribute("class","xfaLayer xfaFont");const d=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);l.append(m),h&&XfaText.shouldBuildText(a.name)&&d.push(m)}return{textDivs:d}}const f=[[a,-1,l]];for(;f.length>0;){const[m,y,b]=f.at(-1);if(y+1===m.children.length){f.pop();continue}const A=m.children[++f.at(-1)[1]];if(A===null)continue;const{name:_}=A;if(_==="#text"){const w=document.createTextNode(A.value);d.push(w),b.append(w);continue}const T=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,_):document.createElement(_);if(b.append(T),A.attributes&&this.setAttributes({html:T,element:A,storage:n,intent:o,linkService:i}),A.children?.length>0)f.push([A,-1,T]);else if(A.value){const w=document.createTextNode(A.value);h&&XfaText.shouldBuildText(_)&&d.push(w),T.append(w)}}for(const m of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(t);case AnnotationType.TEXT:return new TextAnnotationElement(t);case AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t);case"Sig":return new SignatureWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case AnnotationType.POPUP:return new PopupAnnotationElement(t);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case AnnotationType.LINE:return new LineAnnotationElement(t);case AnnotationType.SQUARE:return new SquareAnnotationElement(t);case AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case AnnotationType.CARET:return new CaretAnnotationElement(t);case AnnotationType.INK:return new InkAnnotationElement(t);case AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case AnnotationType.STAMP:return new StampAnnotationElement(t);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}class AnnotationElement{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:n=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:n,richText:i}){return!!(t?.str||n?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AnnotationElement._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:n}=t;n&&this.#i(n),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:n},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:p}}}}=this;i?.splice(0,4,...t),n.left=`${100*(t[0]-h)/o}%`,n.top=`${100*(l-t[3]+p)/l}%`,a===0?(n.width=`${100*(t[2]-t[0])/o}%`,n.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:n,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),this instanceof WidgetAnnotationElement||(o.tabIndex=DEFAULT_TAB_INDEX);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof PopupAnnotationElement){const{rotation:_}=n;return!n.hasOwnCanvas&&_!==0&&this.setRotation(_,o),o}const{width:h,height:p}=this;if(!t&&n.borderStyle.width>0){l.borderWidth=`${n.borderStyle.width}px`;const _=n.borderStyle.horizontalCornerRadius,T=n.borderStyle.verticalCornerRadius;if(_>0||T>0){const N=`calc(${_}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;l.borderRadius=N}else if(this instanceof RadioButtonWidgetAnnotationElement){const N=`calc(${h}px * var(--total-scale-factor)) / calc(${p}px * var(--total-scale-factor))`;l.borderRadius=N}switch(n.borderStyle.style){case AnnotationBorderStyleType.SOLID:l.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:l.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:l.borderBottomStyle="solid";break}const w=n.borderColor||null;w?(this.#e=!0,l.borderColor=Util.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):l.borderWidth=0}const d=Util.normalizeRect([n.rect[0],i.view[3]-n.rect[1]+i.view[1],n.rect[2],i.view[3]-n.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:m,pageX:y,pageY:b}=a.rawDims;l.left=`${100*(d[0]-y)/f}%`,l.top=`${100*(d[1]-b)/m}%`;const{rotation:A}=n;return n.hasOwnCanvas||A===0?(l.width=`${100*h/f}%`,l.height=`${100*p/m}%`):this.setRotation(A,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),n.style.width=`${100*o/i}%`,n.style.height=`${100*l/a}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,i,a)=>{const o=a.detail[n],l=o[0],h=o.slice(1);a.target.style[i]=ColorConverters[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:ColorConverters[`${l}_rgb`](h)})};return shadow(this,"_commonActions",{display:n=>{const{display:i}=n.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:i}=n.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const i=n.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,n){const i=this._commonActions;for(const a of Object.keys(n.detail))(t[a]||i[a])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const i=this._commonActions;for(const[a,o]of Object.entries(n)){const l=i[a];if(l){const h={detail:{[a]:o},target:t};l(h),delete n[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,i,a,o]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,T,w,N]=t.subarray(2,6);if(a===_&&o===T&&n===w&&i===N)return}const{style:l}=this.container;let h;if(this.#e){const{borderColor:_,borderWidth:T}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const p=a-n,d=o-i,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const y=f.createElement("defs");m.append(y);const b=f.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let _=2,T=t.length;_<T;_+=8){const w=t[_],N=t[_+1],O=t[_+2],P=t[_+3],E=f.createElement("rect"),C=(O-n)/p,L=(o-N)/d,X=(w-O)/p,q=(N-P)/d;E.setAttribute("x",C),E.setAttribute("y",L),E.setAttribute("width",X),E.setAttribute("height",q),b.append(E),h?.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${L}" width="${X}" height="${q}"/>`)}this.#e&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:t}=this,n=this.#n=new PopupAnnotationElement({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:h}of a){if(o===-1||l===n)continue;const p=typeof h=="string"?h:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!GetElementsByNameSet.has(d)){warn(`_getElementsByName - element not allowed: ${l}`);continue}i.push({id:l,exportValue:p,domElement:d})}return i}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==n&&GetElementsByNameSet.has(a)&&i.push({id:l,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class LinkAnnotationElement extends AnnotationElement{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action),a=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(this.#n(i,t.setOCGState),a=!0):t.dest?(this._bindLink(i,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t()}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),this.#t()}#e(t,n,i=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,i),!1),this.#t()}#n(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const o=i.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:o,include:l}=n,h=[];if(a.length!==0||o.length!==0){const f=new Set(o);for(const m of a){const y=this._fieldObjects[m]||[];for(const{id:b}of y)f.add(b)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===l&&h.push(y)}else for(const f of Object.values(this._fieldObjects))h.push(...f);const p=this.annotationStorage,d=[];for(const f of h){const{id:m}=f;switch(d.push(m),f.type){case"text":{const b=f.defaultValue||"";p.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;p.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";p.setValue(m,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!GetElementsByNameSet.has(y)){warn(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return util_FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,i,a,o){i.includes("mouse")?t.addEventListener(i,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(i,l=>{if(i==="blur"){if(!n.focused||!l.relatedTarget)return;n.focused=!1}else if(i==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,n,i,a){for(const[o,l]of i)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":Util.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,o=t.style;let l;const h=2,p=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-h),f=Math.round(d/(LINE_FACTOR*a))||1,m=d/f;l=Math.min(a,p(m/LINE_FACTOR))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(a,p(d/LINE_FACTOR))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=Util.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,i,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[n]=i),o.setValue(l.id,{[a]:i})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const p={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),GetElementsByNameSet.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",f=>{t.setValue(n,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),p.formattedValue=null}),i.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue??"";i.value=p.userValue=m,p.formattedValue=null});let d=f=>{const{formattedValue:m}=p;m!=null&&(f.target.value=m),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{if(p.focused)return;const{target:y}=m;p.userValue&&(y.value=p.userValue),p.lastCommittedValue=y.value,p.commitKey=1,this.data.actions?.Focus||(p.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(b){p.userValue=b.detail.value??"",t.setValue(n,{value:p.userValue.toString()}),b.target.value=p.userValue},formattedValue(b){const{formattedValue:A}=b.detail;p.formattedValue=A,A!=null&&b.target!==document.activeElement&&(b.target.value=A),t.setValue(n,{formattedValue:A})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:A}=b.detail,{target:_}=b;if(A===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",A);let T=p.userValue;!T||T.length<=A||(T=T.slice(0,A),_.value=p.userValue=T,t.setValue(n,{value:T}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),i.addEventListener("keydown",m=>{p.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(p.commitKey=3),y===-1)return;const{value:b}=m.target;p.lastCommittedValue!==b&&(p.lastCommittedValue=b,p.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",m=>{if(!p.focused||!m.relatedTarget)return;this.data.actions?.Blur||(p.focused=!1);const{value:y}=m.target;p.userValue=y,p.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:y,willCommit:!0,commitKey:p.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}),f(m)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",m=>{p.lastCommittedValue=null;const{data:y,target:b}=m,{value:A,selectionStart:_,selectionEnd:T}=b;let w=_,N=T;switch(m.inputType){case"deleteWordBackward":{const O=A.substring(0,_).match(/\w*[^\w]*$/);O&&(w-=O[0].length);break}case"deleteWordForward":{const O=A.substring(_).match(/^[^\w]*\w*/);O&&(N+=O[0].length);break}case"deleteContentBackward":_===T&&(w-=1);break;case"deleteContentForward":_===T&&(N+=1);break}m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:A,change:y||"",willCommit:!1,selStart:w,selEnd:N}})}),this._setEventListeners(i,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,i=n.id;let a=t.getValue(i,{value:n.exportValue===n.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return GetElementsByNameSet.add(o),o.setAttribute("data-element-id",i),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=DEFAULT_TAB_INDEX,o.addEventListener("change",l=>{const{name:h,checked:p}=l.target;for(const d of this._getElementsByName(h,i)){const f=p&&d.exportValue===n.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(i,{value:p})}),o.addEventListener("resetform",l=>{const h=n.defaultFieldValue||"Off";l.target.checked=h===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(p){p.target.checked=p.detail.value!=="Off",t.setValue(i,{value:p.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,i=n.id;let a=t.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if(typeof a=="string"&&(a=a!==n.buttonValue,t.setValue(i,{value:a})),a)for(const l of this._getElementsByName(n.fieldName,i))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(GetElementsByNameSet.add(o),o.setAttribute("data-element-id",i),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=DEFAULT_TAB_INDEX,o.addEventListener("change",l=>{const{name:h,checked:p}=l.target;for(const d of this._getElementsByName(h,i))t.setValue(d.id,{value:!1});t.setValue(i,{value:p})}),o.addEventListener("resetform",l=>{const h=n.defaultFieldValue;l.target.checked=h!=null&&h===n.buttonValue}),this.enableScripting&&this.hasJSActions){const l=n.buttonValue;o.addEventListener("updatefromsandbox",h=>{const p={value:d=>{const f=l===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const y=f&&m.id===i;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(p,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,i=t.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");GetElementsByNameSet.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=DEFAULT_TAB_INDEX;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,i.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),o=!1),a.append(m)}let l=null;if(o){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),a.prepend(f),l=()=>{f.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const h=f=>{const m=f?"value":"textContent",{options:y,multiple:b}=a;return b?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let p=h(!1);const d=f=>{const m=f.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",f=>{const m={value(y){l?.();const b=y.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const _ of a.options)_.selected=A.has(_.value);t.setValue(n,{value:h(!0)}),p=h(!1)},multipleSelection(y){a.multiple=!0},remove(y){const b=a.options,A=y.detail.remove;b[A].selected=!1,a.remove(A),b.length>0&&Array.prototype.findIndex.call(b,T=>T.selected)===-1&&(b[0].selected=!0),t.setValue(n,{value:h(!0),items:d(y)}),p=h(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(n,{value:null,items:[]}),p=h(!1)},insert(y){const{index:b,displayValue:A,exportValue:_}=y.detail.insert,T=a.children[b],w=document.createElement("option");w.textContent=A,w.value=_,T?T.before(w):a.append(w),t.setValue(n,{value:h(!0),items:d(y)}),p=h(!1)},items(y){const{items:b}=y.detail;for(;a.length!==0;)a.remove(0);for(const A of b){const{displayValue:_,exportValue:T}=A,w=document.createElement("option");w.textContent=_,w.value=T,a.append(w)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(n,{value:h(!0),items:d(y)}),p=h(!1)},indices(y){const b=new Set(y.detail.indices);for(const A of y.target.options)A.selected=b.has(A.index);t.setValue(n,{value:h(!0)}),p=h(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,f)}),a.addEventListener("input",f=>{const m=h(!0),y=h(!1);t.setValue(n,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:p,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):a.addEventListener("input",function(f){t.setValue(n,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){const{data:n,elements:i}=t;super(t,{isRenderable:AnnotationElement._hasPopupData(n)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${AnnotationPrefix}${i}`).join(",")),this.container}}class PopupElement{#t=this.#P.bind(this);#e=this.#S.bind(this);#n=this.#C.bind(this);#i=this.#x.bind(this);#a=null;#s=null;#o=null;#r=null;#c=null;#u=null;#f=null;#h=!1;#d=null;#l=null;#p=null;#m=null;#g=null;#b=null;#y=!1;constructor({container:t,color:n,elements:i,titleObj:a,modificationDate:o,contentsObj:l,richText:h,parent:p,rect:d,parentRect:f,open:m}){this.#s=t,this.#g=a,this.#o=l,this.#m=h,this.#u=p,this.#a=n,this.#p=d,this.#f=f,this.#c=i,this.#r=PDFDateString.toDateObject(o),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",this.#i),y.addEventListener("mouseenter",this.#n),y.addEventListener("mouseleave",this.#e),y.classList.add("popupTriggerArea");for(const y of i)y.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,m&&this.#x()}render(){if(this.#d)return;const t=this.#d=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=Util.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const n=document.createElement("span");n.className="header";const i=document.createElement("h1");if(n.append(i),{dir:i.dir,str:i.textContent}=this.#g,t.append(n),this.#r){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),n.append(o)}const a=this.#A;if(a)XfaLayer.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#o);t.append(o)}this.#s.append(t)}get#A(){const t=this.#m,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#m.html||null}get#E(){return this.#A?.attributes?.style?.fontSize||0}get#w(){return this.#A?.attributes?.style?.color||null}#_(t){const n=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:this.#w,fontSize:this.#E?`calc(${this.#E}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:a});return i}_formatContents({str:t,dir:n}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const h=a[o];i.append(document.createTextNode(h)),o<l-1&&i.append(document.createElement("br"))}return i}#P(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#h)&&this.#x()}updateEdited({rect:t,popupContent:n}){this.#b||={contentsObj:this.#o,richText:this.#m},t&&(this.#l=null),n&&(this.#m=this.#_(n),this.#o=null),this.#d?.remove(),this.#d=null}resetEdited(){this.#b&&({contentsObj:this.#o,richText:this.#m}=this.#b,this.#b=null,this.#d?.remove(),this.#d=null,this.#l=null)}#R(){if(this.#l!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:o}}}=this.#u;let l=!!this.#f,h=l?this.#f:this.#p;for(const A of this.#c)if(!h||Util.intersect(A.data.rect,h)!==null){h=A.data.rect,l=!0;break}const p=Util.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),f=l?h[2]-h[0]+5:0,m=p[0]+f,y=p[1];this.#l=[100*(m-a)/n,100*(y-o)/i];const{style:b}=this.#s;b.left=`${this.#l[0]}%`,b.top=`${this.#l[1]}%`}#x(){this.#h=!this.#h,this.#h?(this.#C(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#S(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#C(){this.#d||this.render(),this.isVisible?this.#h&&this.#s.classList.add("focused"):(this.#R(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#s.hidden=!0)}maybeShow(){this.#y&&(this.#d||this.#C(),this.#y=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const i=document.createElement("span");i.textContent=n,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class LineAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class SquareAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class CircleAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolylineAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:a},width:o,height:l}=this;if(!n)return this.container;const h=this.svgFactory.create(o,l,!0);let p=[];for(let f=0,m=n.length;f<m;f+=2){const y=n[f]-t[0],b=t[3]-n[f+1];p.push(`${y},${b}`)}p=p.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",p),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),h.append(d),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class InkAnnotationElement extends AnnotationElement{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}#n(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:l,width:h,height:p}=this.#n(n,t),d=this.svgFactory.create(h,p,!0),f=this.#t=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",a.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,y=i.length;m<y;m++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",i[m].join(",")),f.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:a}=t,o=this.#t;if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let l=0,h=this.#e.length;l<h;l++)this.#e[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:h,height:p}=this.#n(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${p}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=util_FeatureTest.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class AnnotationLayer{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:h}){this.div=t,this.#t=n,this.#e=i,this.#i=h||null,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}async#a(t,n){const i=t.firstChild||t,a=i.id=`${AnnotationPrefix}${n}`,o=await this.#i?.getAriaAttributes(a);if(o)for(const[l,h]of o)i.setAttribute(l,h);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:n}=t,i=this.div;setLayerDimensions(i,this.viewport);const a=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:t.annotationStorage||new AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const h=l.annotationType===AnnotationType.POPUP;if(h){const f=a.get(l.id);if(!f)continue;o.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const p=AnnotationElementFactory.create(o);if(!p.isRenderable)continue;if(!h&&l.popupRef){const f=a.get(l.popupRef);f?f.push(p):a.set(l.popupRef,[p])}const d=p.render();l.hidden&&(d.style.visibility="hidden"),await this.#a(d,l.id),p._isEditable&&(this.#n.set(p.data.id,p),this._annotationEditorUIManager?.renderAnnotationElement(p))}this.#s()}async addLinkAnnotations(t,n){const i={data:null,layer:this.div,linkService:n,svgFactory:new DOMSVGFactory,parent:this};for(const a of t){a.borderStyle||=AnnotationLayer._defaultBorderStyle,i.data=a;const o=AnnotationElementFactory.create(i);if(!o.isRenderable)continue;const l=o.render();await this.#a(l,a.id)}}update({viewport:t}){const n=this.div;this.viewport=t,setLayerDimensions(n,{rotation:t.rotation}),this.#s(),n.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[n,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const l=this.#n.get(n);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const EOL_PATTERN=/\r\n?|\n/g;class FreeTextEditor extends AnnotationEditor{#t;#e="";#n=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=FreeTextEditor.prototype,n=o=>o.isEmpty(),i=AnnotationEditorUIManager.TRANSLATE_SMALL,a=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static _type="freetext";static _editorType=AnnotationEditorType.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor,this.#a=t.fontSize||FreeTextEditor._defaultFontSize}static initialize(t,n){AnnotationEditor.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=n;break;case AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=n;break}}updateParams(t,n){switch(t){case AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(n);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this.#o(n);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this.#a],[AnnotationEditorParamsType.FREETEXT_COLOR,this.#t]]}#s(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#a)*this.parentScale),this.#a=a,this.#c()},i=this.#a;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const n=a=>{this.#t=this.editorDiv.style.color=a},i=this.#t;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-FreeTextEditor._internalPadding*t,-(FreeTextEditor._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(FreeTextEditor.#u(i)),n=i);return t.join(`
`)}#c(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,n=this.#e=this.#r().trimEnd();if(t===n)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#f(),this._uiManager.rebuild(this),this.#c()};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),this.#c()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,p]=this.getInitialTranslation();[h,p]=this.pageTranslationToScreen(h,p);const[d,f]=this.pageDimensions,[m,y]=this.pageTranslation;let b,A;switch(this.rotation){case 0:b=t+(l[0]-m)/d,A=n+this.height-(l[1]-y)/f;break;case 90:b=t+(l[0]-m)/d,A=n-(l[1]-y)/f,[h,p]=[p,-h];break;case 180:b=t-this.width+(l[0]-m)/d,A=n-(l[1]-y)/f,[h,p]=[-h,-p];break;case 270:b=t+(l[0]-m-this.height*f)/d,A=n+(l[1]-y-this.width*d)/f,[h,p]=[-p,h];break}this.setAt(b*a,A*o,h,p)}else this._moveAfterPaste(t,n);this.#f(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(EOL_PATTERN,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=FreeTextEditor.#d(n.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:p}=l,d=[],f=[];if(h.nodeType===Node.TEXT_NODE){const b=h.parentElement;if(f.push(h.nodeValue.slice(p).replaceAll(EOL_PATTERN,"")),b!==this.editorDiv){let A=d;for(const _ of this.editorDiv.childNodes){if(_===b){A=f;continue}A.push(FreeTextEditor.#u(_))}}d.push(h.nodeValue.slice(0,p).replaceAll(EOL_PATTERN,""))}else if(h===this.editorDiv){let b=d,A=0;for(const _ of this.editorDiv.childNodes)A++===p&&(b=f),b.push(FreeTextEditor.#u(_))}this.#e=`${d.join(`
`)}${a}${f.join(`
`)}`,this.#f();const m=new Range;let y=Math.sumPrecise(d.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const A=b.nodeValue.length;if(y<=A){m.setStart(b,y),m.setEnd(b,y);break}y-=A}o.removeAllRanges(),o.addRange(m)}#f(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#h(){return this.#e.replaceAll(""," ")}static#d(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,n,i){let a=null;if(t instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:p,rotation:d,id:f,popupRef:m},textContent:y,textPosition:b,parent:{page:{pageNumber:A}}}=t;if(!y||y.length===0)return null;a=t={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(h),fontSize:l,value:y.join(`
`),position:b,pageIndex:A-1,rect:p.slice(0),rotation:d,id:f,deleted:!1,popupRef:m}}const o=await super.deserialize(t,n,i);return o.#a=t.fontSize,o.#t=Util.makeHexColor(...t.color),o.#e=FreeTextEditor.#d(t.value),o.annotationElementId=t.id||null,o._initialData=a,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=FreeTextEditor._internalPadding*this.parentScale,i=this.getRect(n,n),a=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:AnnotationEditorType.FREETEXT,color:a,fontSize:this.#a,value:this.#h(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!this.#l(o)?null:(o.id=this.annotationElementId,o)}#l(t){const{value:n,fontSize:i,color:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((l,h)=>l!==a[h])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,i.color=this.#t,n.replaceChildren();for(const o of this.#e.split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}const a=FreeTextEditor._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:this.#e}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Outline{static PRECISION=1e-4;toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(t,n){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(t,n,i,a,o,l){l||=new Float32Array(t.length);for(let h=0,p=t.length;h<p;h+=2)l[h]=n+t[h]*a,l[h+1]=i+t[h+1]*o;return l}static _rescaleAndSwap(t,n,i,a,o,l){l||=new Float32Array(t.length);for(let h=0,p=t.length;h<p;h+=2)l[h]=n+t[h+1]*a,l[h+1]=i+t[h]*o;return l}static _translate(t,n,i,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=n+t[o],a[o+1]=i+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,i,a,o){switch(o){case 90:return[1-n/i,t/a];case 180:return[1-t/i,1-n/a];case 270:return[n/i,1-t/a];default:return[t/i,n/a]}}static _normalizePagePoint(t,n,i){switch(i){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,i,a,o,l){return[(t+5*i)/6,(n+5*a)/6,(5*i+o)/6,(5*a+l)/6,(i+o)/2,(a+l)/2]}}class FreeDrawOutliner{#t;#e=[];#n;#i;#a=[];#s=new Float32Array(18);#o;#r;#c;#u;#f;#h;#d=[];static#l=8;static#p=2;static#m=FreeDrawOutliner.#l+FreeDrawOutliner.#p;constructor({x:t,y:n},i,a,o,l,h=0){this.#t=i,this.#h=o*a,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,n],6),this.#n=h,this.#u=FreeDrawOutliner.#l*a,this.#c=FreeDrawOutliner.#m*a,this.#f=a,this.#d.push(t,n)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[i,a,o,l]=this.#t;return[(this.#o+(t[0]-n[0])/2-i)/o,(this.#r+(t[1]-n[1])/2-a)/l,(this.#o+(n[0]-t[0])/2-i)/o,(this.#r+(n[1]-t[1])/2-a)/l]}add({x:t,y:n}){this.#o=t,this.#r=n;const[i,a,o,l]=this.#t;let[h,p,d,f]=this.#s.subarray(8,12);const m=t-d,y=n-f,b=Math.hypot(m,y);if(b<this.#c)return!1;const A=b-this.#u,_=A/b,T=_*m,w=_*y;let N=h,O=p;h=d,p=f,d+=T,f+=w,this.#d?.push(t,n);const P=-w/A,E=T/A,C=P*this.#h,L=E*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+C,f+L],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-C,f-L],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([h+C,p+L],2),this.#a.push(NaN,NaN,NaN,NaN,(h+C-i)/o,(p+L-a)/l),this.#s.set([h-C,p-L],14),this.#e.push(NaN,NaN,NaN,NaN,(h-C-i)/o,(p-L-a)/l)),this.#s.set([N,O,h,p,d,f],6),!this.isEmpty()):(this.#s.set([N,O,h,p,d,f],6),Math.abs(Math.atan2(O-p,N-h)-Math.atan2(w,T))<Math.PI/2?([h,p,d,f]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((h+d)/2-i)/o,((p+f)/2-a)/l),[h,p,N,O]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((N+h)/2-i)/o,((O+p)/2-a)/l),!0):([N,O,h,p,d,f]=this.#s.subarray(0,6),this.#a.push(((N+5*h)/6-i)/o,((O+5*p)/6-a)/l,((5*h+d)/6-i)/o,((5*p+f)/6-a)/l,((h+d)/2-i)/o,((p+f)/2-a)/l),[d,f,h,p,N,O]=this.#s.subarray(12,18),this.#e.push(((N+5*h)/6-i)/o,((O+5*p)/6-a)/l,((5*h+d)/6-i)/o,((5*p+f)/6-a)/l,((h+d)/2-i)/o,((p+f)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,n=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#b();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#A(i);for(let a=n.length-6;a>=6;a-=6)isNaN(n[a])?i.push(`L${n[a+4]} ${n[a+5]}`):i.push(`C${n[a]} ${n[a+1]} ${n[a+2]} ${n[a+3]} ${n[a+4]} ${n[a+5]}`);return this.#y(i),i.join(" ")}#b(){const[t,n,i,a]=this.#t,[o,l,h,p]=this.#g();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-n)/a} L${(this.#s[4]-t)/i} ${(this.#s[5]-n)/a} L${o} ${l} L${h} ${p} L${(this.#s[16]-t)/i} ${(this.#s[17]-n)/a} L${(this.#s[14]-t)/i} ${(this.#s[15]-n)/a} Z`}#y(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#A(t){const[n,i,a,o]=this.#t,l=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[p,d,f,m]=this.#g();t.push(`L${(l[0]-n)/a} ${(l[1]-i)/o} L${p} ${d} L${f} ${m} L${(h[0]-n)/a} ${(h[1]-i)/o}`)}newFreeDrawOutline(t,n,i,a,o,l){return new FreeDrawOutline(t,n,i,a,o,l)}getOutlines(){const t=this.#a,n=this.#e,i=this.#s,[a,o,l,h]=this.#t,p=new Float32Array((this.#d?.length??0)+2);for(let m=0,y=p.length-2;m<y;m+=2)p[m]=(this.#d[m]-a)/l,p[m+1]=(this.#d[m+1]-o)/h;if(p[p.length-2]=(this.#o-a)/l,p[p.length-1]=(this.#r-o)/h,isNaN(i[6])&&!this.isEmpty())return this.#E(p);const d=new Float32Array(this.#a.length+24+this.#e.length);let f=t.length;for(let m=0;m<f;m+=2){if(isNaN(t[m])){d[m]=d[m+1]=NaN;continue}d[m]=t[m],d[m+1]=t[m+1]}f=this.#_(d,f);for(let m=n.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(n[m+y])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=n[m+y],d[f+1]=n[m+y+1],f+=2}return this.#w(d,f),this.newFreeDrawOutline(d,p,this.#t,this.#f,this.#n,this.#i)}#E(t){const n=this.#s,[i,a,o,l]=this.#t,[h,p,d,f]=this.#g(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(n[2]-i)/o,(n[3]-a)/l,NaN,NaN,NaN,NaN,(n[4]-i)/o,(n[5]-a)/l,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(n[16]-i)/o,(n[17]-a)/l,NaN,NaN,NaN,NaN,(n[14]-i)/o,(n[15]-a)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#f,this.#n,this.#i)}#w(t,n){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],n),n+=6}#_(t,n){const i=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,h,p]=this.#t,[d,f,m,y]=this.#g();return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/h,(i[1]-l)/p,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-l)/p],n),n+=24}}class FreeDrawOutline extends Outline{#t;#e=new Float32Array(4);#n;#i;#a;#s;#o;constructor(t,n,i,a,o,l){super(),this.#o=t,this.#a=n,this.#t=i,this.#s=a,this.#n=o,this.#i=l,this.lastPoint=[NaN,NaN],this.#r(l);const[h,p,d,f]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-h)/d,t[m+1]=(t[m+1]-p)/f;for(let m=0,y=n.length;m<y;m+=2)n[m]=(n[m]-h)/d,n[m+1]=(n[m+1]-p)/f}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let n=6,i=this.#o.length;n<i;n+=6){if(isNaN(this.#o[n])){t.push(`L${this.#o[n+4]} ${this.#o[n+5]}`);continue}t.push(`C${this.#o[n]} ${this.#o[n+1]} ${this.#o[n+2]} ${this.#o[n+3]} ${this.#o[n+4]} ${this.#o[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,a],o){const l=i-t,h=a-n;let p,d;switch(o){case 0:p=Outline._rescale(this.#o,t,a,l,-h),d=Outline._rescale(this.#a,t,a,l,-h);break;case 90:p=Outline._rescaleAndSwap(this.#o,t,n,l,h),d=Outline._rescaleAndSwap(this.#a,t,n,l,h);break;case 180:p=Outline._rescale(this.#o,i,n,-l,h),d=Outline._rescale(this.#a,i,n,-l,h);break;case 270:p=Outline._rescaleAndSwap(this.#o,i,a,-l,-h),d=Outline._rescaleAndSwap(this.#a,i,a,-l,-h);break}return{outline:Array.from(p),points:[Array.from(d)]}}#r(t){const n=this.#o;let i=n[4],a=n[5];const o=[i,a,i,a];let l=i,h=a;const p=t?Math.max:Math.min;for(let f=6,m=n.length;f<m;f+=6){const y=n[f+4],b=n[f+5];if(isNaN(n[f]))Util.pointBoundingBox(y,b,o),h<b?(l=y,h=b):h===b&&(l=p(l,y));else{const A=[1/0,1/0,-1/0,-1/0];Util.bezierBoundingBox(i,a,...n.slice(f,f+6),A),Util.rectBoundingBox(...A,o),h<A[3]?(l=A[2],h=A[3]):h===A[3]&&(l=p(l,A[2]))}i=y,a=b}const d=this.#e;d[0]=o[0]-this.#n,d[1]=o[1]-this.#n,d[2]=o[2]-o[0]+2*this.#n,d[3]=o[3]-o[1]+2*this.#n,this.lastPoint=[l,h]}get box(){return this.#e}newOutliner(t,n,i,a,o,l=0){return new FreeDrawOutliner(t,n,i,a,o,l)}getNewOutline(t,n){const[i,a,o,l]=this.#e,[h,p,d,f]=this.#t,m=o*d,y=l*f,b=i*d+h,A=a*f+p,_=this.newOutliner({x:this.#a[0]*m+b,y:this.#a[1]*y+A},this.#t,this.#s,t,this.#i,n??this.#n);for(let T=2;T<this.#a.length;T+=2)_.add({x:this.#a[T]*m+b,y:this.#a[T+1]*y+A});return _.getOutlines()}}class HighlightOutliner{#t;#e;#n=[];#i=[];constructor(t,n=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:b,y:A,width:_,height:T}of t){const w=Math.floor((b-n)/l)*l,N=Math.ceil((b+_+n)/l)*l,O=Math.floor((A-n)/l)*l,P=Math.ceil((A+T+n)/l)*l,E=[w,O,P,!0],C=[N,O,P,!1];this.#n.push(E,C),Util.rectBoundingBox(w,O,N,P,o)}const h=o[2]-o[0]+2*i,p=o[3]-o[1]+2*i,d=o[0]-i,f=o[1]-i,m=this.#n.at(a?-1:-2),y=[m[0],m[2]];for(const b of this.#n){const[A,_,T]=b;b[0]=(A-d)/h,b[1]=(_-f)/p,b[2]=(T-f)/p}this.#t=new Float32Array([d,f,h,p]),this.#e=y}getOutlines(){this.#n.sort((n,i)=>n[0]-i[0]||n[1]-i[1]||n[2]-i[2]);const t=[];for(const n of this.#n)n[3]?(t.push(...this.#c(n)),this.#o(n)):(this.#r(n),t.push(...this.#c(n)));return this.#a(t)}#a(t){const n=[],i=new Set;for(const l of t){const[h,p,d]=l;n.push([h,p,l],[h,d,l])}n.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=n.length;l<h;l+=2){const p=n[l][2],d=n[l+1][2];p.push(d),d.push(p),i.add(p),i.add(d)}const a=[];let o;for(;i.size>0;){const l=i.values().next().value;let[h,p,d,f,m]=l;i.delete(l);let y=h,b=p;for(o=[h,d],a.push(o);;){let A;if(i.has(f))A=f;else if(i.has(m))A=m;else break;i.delete(A),[h,p,d,f,m]=A,y!==h&&(o.push(y,b,h,b===p?p:d),y=h),b=b===p?d:p}o.push(y,b)}return new HighlightOutline(a,this.#t,this.#e)}#s(t){const n=this.#i;let i=0,a=n.length-1;for(;i<=a;){const o=i+a>>1,l=n[o][0];if(l===t)return o;l<t?i=o+1:a=o-1}return a+1}#o([,t,n]){const i=this.#s(t);this.#i.splice(i,0,[t,n])}#r([,t,n]){const i=this.#s(t);for(let a=i;a<this.#i.length;a++){const[o,l]=this.#i[a];if(o!==t)break;if(o===t&&l===n){this.#i.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,l]=this.#i[a];if(o!==t)break;if(o===t&&l===n){this.#i.splice(a,1);return}}}#c(t){const[n,i,a]=t,o=[[n,i,a]],l=this.#s(a);for(let h=0;h<l;h++){const[p,d]=this.#i[h];for(let f=0,m=o.length;f<m;f++){const[,y,b]=o[f];if(!(d<=y||b<=p)){if(y>=p){if(b>d)o[f][1]=d;else{if(m===1)return[];o.splice(f,1),f--,m--}continue}o[f][2]=p,b>d&&o.push([n,d,b])}}}return o}}class HighlightOutline extends Outline{#t;#e;constructor(t,n,i){super(),this.#e=t,this.#t=n,this.lastPoint=i}toSVGPath(){const t=[];for(const n of this.#e){let[i,a]=n;t.push(`M${i} ${a}`);for(let o=2;o<n.length;o+=2){const l=n[o],h=n[o+1];l===i?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,n,i,a],o){const l=[],h=i-t,p=a-n;for(const d of this.#e){const f=new Array(d.length);for(let m=0;m<d.length;m+=2)f[m]=t+d[m]*h,f[m+1]=a-d[m+1]*p;l.push(f)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(t,n,i,a,o,l){return new FreeHighlightOutline(t,n,i,a,o,l)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(t,n,i,a,o,l=0){return new FreeHighlightOutliner(t,n,i,a,o,l)}}class ColorPicker{#t=null;#e=null;#n;#i=null;#a=!1;#s=!1;#o=null;#r;#c=null;#u=null;#f;static#h=null;static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],ColorPicker.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ColorPicker.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ColorPicker.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ColorPicker.prototype._moveToPrevious],[["Home","mac+Home"],ColorPicker.prototype._moveToBeginning],[["End","mac+End"],ColorPicker.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#s=!1,this.#f=AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.#o=t):(this.#s=!0,this.#f=AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR),this.#u=t?._uiManager||n,this.#r=this.#u._eventBus,this.#n=t?.color||this.#u?.highlightColors.values().next().value||"#FFFF98",ColorPicker.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const n=this.#u._signal;t.addEventListener("click",this.#m.bind(this),{signal:n}),t.addEventListener("keydown",this.#p.bind(this),{signal:n});const i=this.#e=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#d();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#d(){const t=document.createElement("div"),n=this.#u._signal;t.addEventListener("contextmenu",noContextMenu,{signal:n}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,a]of this.#u.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",ColorPicker.#h[i]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.setAttribute("aria-selected",a===this.#n),o.addEventListener("click",this.#l.bind(this,a),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#p.bind(this),{signal:n}),t}#l(t,n){n.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#f,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const n=t.target.getAttribute("data-color");n&&this.#l(n,t)}_moveToNext(t){if(!this.#b){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#b&&this._hideDropdownFromKeyboard();return}this.#b||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#b){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#b){this.#m(t);return}this.#i.lastChild?.focus()}#p(t){ColorPicker._keyboardManager.exec(this,t)}#m(t){if(this.#b){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#u.combinedSignal(this.#c)})),this.#i){this.#i.classList.remove("hidden");return}const n=this.#i=this.#d();this.#t.append(n)}#g(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#c?.abort(),this.#c=null}get#b(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#b){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const n=this.#u.highlightColors.values();for(const i of this.#i.children)i.setAttribute("aria-selected",n.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class HighlightEditor extends AnnotationEditor{#t=null;#e=0;#n;#i=null;#a=null;#s=null;#o=null;#r=0;#c=null;#u=null;#f=null;#h=!1;#d=null;#l;#p=null;#m="";#g;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=AnnotationEditorType.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=HighlightEditor.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||HighlightEditor._defaultColor,this.#g=t.thickness||HighlightEditor._defaultThickness,this.#l=t.opacity||HighlightEditor._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#A(t),this.#R()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#r=t.focusOffset,this.#y(),this.#R(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new HighlightOutliner(this.#n,.001);this.#u=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#u.box;const n=new HighlightOutliner(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{lastPoint:i}=this.#s;this.#d=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:n,clipPathId:i}){this.#u=t;const a=1.5;if(this.#s=t.getNewOutline(this.#g/2+a,.0025),n>=0)this.#f=n,this.#i=i,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#f,{bbox:HighlightEditor.#x(this.#u.box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:HighlightEditor.#x(this.#s.box,f),path:{d:this.#s.toSVGPath()}})}const[o,l,h,p]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=h,this.height=p;break;case 90:{const[f,m]=this.parentDimensions;this.x=l,this.y=1-o,this.width=h*m/f,this.height=p*f/m;break}case 180:this.x=1-o,this.y=1-l,this.width=h,this.height=p;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-l,this.y=o,this.width=h*m/f,this.height=p*f/m;break}}const{lastPoint:d}=this.#s;this.#d=[(d[0]-o)/h,(d[1]-l)/p]}static initialize(t,n){AnnotationEditor.initialize(t,n),HighlightEditor._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=n;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#d}updateParams(t,n){switch(t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#E(n);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:this.#w(n);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,this.#g||HighlightEditor._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,this.#h]]}#E(t){const n=(o,l)=>{this.color=o,this.#l=l,this.parent?.drawLayer.updateProperties(this.#f,{root:{fill:o,"fill-opacity":l}}),this.#a?.updateColor(o)},i=this.color,a=this.#l;this.addCommands({cmd:n.bind(this,t,HighlightEditor._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#w(t){const n=this.#g,i=a=>{this.#g=a,this.#_(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new ColorPicker({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#P(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#R(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#P():t&&(this.#R(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#_(t){if(!this.#h)return;this.#A({highlightOutlines:this.#u.getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}#P(){this.#f===null||!this.parent||(this.parent.drawLayer.remove(this.#f),this.#f=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#R(t=this.parent){this.#f===null&&({id:this.#f,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#u.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#l},rootClass:{highlight:!0,free:this.#h},path:{d:this.#u.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#x([t,n,i,a],o){switch(o){case 90:return[1-n-a,t,a,i];case 180:return[1-t-i,1-n-a,i,a];case 270:return[n,1-t-i,a,i]}return[t,n,i,a]}rotate(t){const{drawLayer:n}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=HighlightEditor.#x(this.#u.box,t)):i=HighlightEditor.#x([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#f,{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(this.#p,{bbox:HighlightEditor.#x(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const n=this.#c=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#i;const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),bindEvents(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#C(t){HighlightEditor._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#S(!0);break;case 1:case 3:this.#S(!1);break}}#S(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#o,this.#r)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#S(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#O(){if(this.#h)return null;const[t,n]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let h=0;for(const{x:p,y:d,width:f,height:m}of o){const y=p*t+i,b=(1-d)*n+a;l[h]=l[h+4]=y,l[h+1]=l[h+3]=b,l[h+2]=l[h+6]=y+f*t,l[h+5]=l[h+7]=b-m*n,h+=8}return l}#D(t){return this.#u.serialize(t,this.#M())}static startHighlighting(t,n,{target:i,x:a,y:o}){const{x:l,y:h,width:p,height:d}=i.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),y=b=>{f.abort(),this.#T(t,b)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",noContextMenu,{signal:m}),i.addEventListener("pointermove",this.#L.bind(this,t),{signal:m}),this._freeHighlight=new FreeHighlightOutliner({x:a,y:o},[l,h,p,d],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#T(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,i){let a=null;if(t instanceof HighlightAnnotationElement){const{data:{quadPoints:A,rect:_,rotation:T,id:w,color:N,opacity:O,popupRef:P},parent:{page:{pageNumber:E}}}=t;a=t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(N),opacity:O,quadPoints:A,boxes:null,pageIndex:E-1,rect:_.slice(0),rotation:T,id:w,deleted:!1,popupRef:P}}else if(t instanceof InkAnnotationElement){const{data:{inkLists:A,rect:_,rotation:T,id:w,color:N,borderStyle:{rawWidth:O},popupRef:P},parent:{page:{pageNumber:E}}}=t;a=t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(N),thickness:O,inkLists:A,boxes:null,pageIndex:E-1,rect:_.slice(0),rotation:T,id:w,deleted:!1,popupRef:P}}const{color:o,quadPoints:l,inkLists:h,opacity:p}=t,d=await super.deserialize(t,n,i);d.color=Util.makeHexColor(...o),d.#l=p||1,h&&(d.#g=t.thickness),d.annotationElementId=t.id||null,d._initialData=a;const[f,m]=d.pageDimensions,[y,b]=d.pageTranslation;if(l){const A=d.#n=[];for(let _=0;_<l.length;_+=8)A.push({x:(l[_]-y)/f,y:1-(l[_+1]-b)/m,width:(l[_+2]-l[_])/f,height:(l[_+1]-l[_+5])/m});d.#y(),d.#R(),d.rotate(d.rotation)}else if(h){d.#h=!0;const A=h[0],_={x:A[0]-y,y:m-(A[1]-b)},T=new FreeHighlightOutliner(_,[0,0,f,m],1,d.#g/2,!0,.001);for(let O=0,P=A.length;O<P;O+=2)_.x=A[O]-y,_.y=m-(A[O+1]-b),T.add(_);const{id:w,clipPathId:N}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);d.#A({highlightOutlines:T.getOutlines(),highlightId:w,clipPathId:N}),d.#R(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=AnnotationEditor._colorManager.convert(this.color),a={annotationType:AnnotationEditorType.HIGHLIGHT,color:i,opacity:this.#l,thickness:this.#g,quadPoints:this.#O(),outlines:this.#D(n),pageIndex:this.pageIndex,rect:n,rotation:this.#M(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#v(a)?null:(a.id=this.annotationElementId,a)}#v(t){const{color:n}=this._initialData;return t.color.some((i,a)=>i!==n[a])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class DrawingOptions{#t=Object.create(null);updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,i]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,i)}updateSVGProperty(t,n){this.#t[t]=n}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){unreachable("Not implemented")}}class DrawingEditor extends AnnotationEditor{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#s=NaN;static#o=null;static#r=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#u(t),this.#d())}#u({drawOutlines:t,drawId:n,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#f(t,this.parent),this.#m(t.box)}#f(t,n){const{id:i}=n.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(n))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(DrawingEditor.#n.updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,n[a]]);return t}_updateProperty(t,n,i){const a=this._drawingOptions,o=a[n],l=h=>{a.updateProperty(n,h);const p=this.#t.updateProperty(n,h);p&&this.#m(p),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#d(),this.#m(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#d(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#d(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#f(this.#t,t)}}#l([t,n,i,a]){const{parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[n,1-t,i*(l/o),a*(o/l)];case 180:return[1-t,1-n,i,a];case 270:return[1-n,t,i*(l/o),a*(o/l)];default:return[t,n,i,a]}}#p(){const{x:t,y:n,width:i,height:a,parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[1-n,t,i*(o/l),a*(l/o)];case 180:return[1-t,1-n,i,a];case 270:return[n,1-t,i*(o/l),a*(l/o)];default:return[t,n,i,a]}}#m(t){if([this.x,this.y,this.width,this.height]=this.#l(t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()}#g(){const{x:t,y:n,width:i,height:a,rotation:o,parentRotation:l,parentDimensions:[h,p]}=this;switch((o*4+l)/90){case 1:return[1-n-a,t,a,i];case 2:return[1-t-i,1-n-a,i,a];case 3:return[n,1-t-i,a,i];case 4:return[t,n-i*(h/p),a*(p/h),i*(h/p)];case 5:return[1-n,t,i*(h/p),a*(p/h)];case 6:return[1-t-a*(p/h),1-n,a*(p/h),i*(h/p)];case 7:return[n-i*(h/p),1-t-a*(p/h),i*(h/p),a*(p/h)];case 8:return[t-i,n-a,i,a];case 9:return[1-n,t-i,a,i];case 10:return[1-t,1-n,i,a];case 11:return[n-a,1-t,a,i];case 12:return[t-a*(p/h),n,a*(p/h),i*(h/p)];case 13:return[1-n-i*(h/p),t-a*(p/h),i*(h/p),a*(p/h)];case 14:return[1-t,1-n-i*(h/p),a*(p/h),i*(h/p)];case 15:return[n,1-t,i*(h/p),a*(p/h)];default:return[t,n,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,a,o){unreachable("Not implemented")}static startDrawing(t,n,i,a){const{target:o,offsetX:l,offsetY:h,pointerId:p,pointerType:d}=a;if(DrawingEditor.#o&&DrawingEditor.#o!==d)return;const{viewport:{rotation:f}}=t,{width:m,height:y}=o.getBoundingClientRect(),b=DrawingEditor.#i=new AbortController,A=t.combinedSignal(b);if(DrawingEditor.#s||=p,DrawingEditor.#o??=d,window.addEventListener("pointerup",_=>{DrawingEditor.#s===_.pointerId?this._endDraw(_):DrawingEditor.#r?.delete(_.pointerId)},{signal:A}),window.addEventListener("pointercancel",_=>{DrawingEditor.#s===_.pointerId?this._currentParent.endDrawingSession():DrawingEditor.#r?.delete(_.pointerId)},{signal:A}),window.addEventListener("pointerdown",_=>{DrawingEditor.#o===_.pointerType&&((DrawingEditor.#r||=new Set).add(_.pointerId),DrawingEditor.#n.isCancellable()&&(DrawingEditor.#n.removeLastElement(),DrawingEditor.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",noContextMenu,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",_=>{_.timeStamp===DrawingEditor.#c&&stopEvent(_)},{signal:A}),t.toggleDrawing(),n._editorUndoBar?.hide(),DrawingEditor.#n){t.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#n.startNew(l,h,m,y,f));return}n.updateUIForDefaultProperties(this),DrawingEditor.#n=this.createDrawerInstance(l,h,m,y,f),DrawingEditor.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#a.toSVGProperties(),DrawingEditor.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(DrawingEditor.#c=-1,!DrawingEditor.#n)return;const{offsetX:n,offsetY:i,pointerId:a}=t;if(DrawingEditor.#s===a){if(DrawingEditor.#r?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#n.add(n,i)),DrawingEditor.#c=t.timeStamp,stopEvent(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,DrawingEditor.#n=null,DrawingEditor.#a=null,DrawingEditor.#o=null,DrawingEditor.#c=NaN),DrawingEditor.#i&&(DrawingEditor.#i.abort(),DrawingEditor.#i=null,DrawingEditor.#s=NaN,DrawingEditor.#r=null)}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=DrawingEditor.#n,a=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!DrawingEditor.#n.isEmpty()){const{pageDimensions:[i,a],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:DrawingEditor.#n.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:DrawingEditor.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,a,o,l){unreachable("Not implemented")}static async deserialize(t,n,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:h}}=n.viewport,p=this.deserializeDraw(l,h,a,o,this._INNER_MARGIN,t),d=await super.deserialize(t,n,i);return d.createDrawingOptions(t),d.#u({drawOutlines:p}),d.#d(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[n,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([n,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class InkDrawOutliner{#t=new Float64Array(6);#e;#n;#i;#a;#s;#o="";#r=0;#c=new InkDrawOutline;#u;#f;constructor(t,n,i,a,o,l){this.#u=i,this.#f=a,this.#i=o,this.#a=l,[t,n]=this.#h(t,n);const h=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n],this.#n=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,n){t==="stroke-width"&&(this.#a=n)}#h(t,n){return Outline._normalizePoint(t,n,this.#u,this.#f,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,n){[t,n]=this.#h(t,n);const[i,a,o,l]=this.#t.subarray(2,6),h=t-o,p=n-l;return Math.hypot(this.#u*h,this.#f*p)<=2?null:(this.#s.push(t,n),isNaN(i)?(this.#t.set([o,l,t,n],2),this.#e.push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,o,l,t,n],0),this.#e.push(...Outline.createBezierPoints(i,a,o,l,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const i=this.add(t,n);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,i,a,o){this.#u=i,this.#f=a,this.#i=o,[t,n]=this.#h(t,n);const l=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n];const h=this.#n.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,n=this.#n.length;t<n;t++){const{line:i,points:a}=this.#n[t];this.#e=i,this.#s=a,this.#r=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=Outline.svgRound(this.#e[4]),n=Outline.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${n} Z`,this.#o;if(this.#s.length<=6){const a=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,a)} M ${t} ${n}`,this.#r=6}if(this.#s.length===4){const a=Outline.svgRound(this.#e[10]),o=Outline.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${a} ${o}`,this.#r=12,this.#o}const i=[];this.#r===0&&(i.push(`M ${t} ${n}`),this.#r=6);for(let a=this.#r,o=this.#e.length;a<o;a+=6){const[l,h,p,d,f,m]=this.#e.slice(a,a+6).map(Outline.svgRound);i.push(`C${l} ${h} ${p} ${d} ${f} ${m}`)}return this.#o+=i.join(" "),this.#r=this.#e.length,this.#o}getOutlines(t,n,i,a){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,n,i,this.#i,this.#a,a),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class InkDrawOutline extends Outline{#t;#e=0;#n;#i;#a;#s;#o;#r;#c;build(t,n,i,a,o,l,h){this.#a=n,this.#s=i,this.#o=a,this.#r=o,this.#c=l,this.#n=h??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of this.#i){if(t.push(`M${Outline.svgRound(n[4])} ${Outline.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Outline.svgRound(n[10])} ${Outline.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[o,l,h,p,d,f]=n.subarray(i,i+6).map(Outline.svgRound);t.push(`C${o} ${l} ${h} ${p} ${d} ${f}`)}}return t.join("")}serialize([t,n,i,a],o){const l=[],h=[],[p,d,f,m]=this.#f();let y,b,A,_,T,w,N,O,P;switch(this.#r){case 0:P=Outline._rescale,y=t,b=n+a,A=i,_=-a,T=t+p*i,w=n+(1-d-m)*a,N=t+(p+f)*i,O=n+(1-d)*a;break;case 90:P=Outline._rescaleAndSwap,y=t,b=n,A=i,_=a,T=t+d*i,w=n+p*a,N=t+(d+m)*i,O=n+(p+f)*a;break;case 180:P=Outline._rescale,y=t+i,b=n,A=-i,_=a,T=t+(1-p-f)*i,w=n+d*a,N=t+(1-p)*i,O=n+(d+m)*a;break;case 270:P=Outline._rescaleAndSwap,y=t+i,b=n+a,A=-i,_=-a,T=t+(1-d-m)*i,w=n+(1-p-f)*a,N=t+(1-d)*i,O=n+(1-p)*a;break}for(const{line:E,points:C}of this.#i)l.push(P(E,y,b,A,_,o?new Array(E.length):null)),h.push(P(C,y,b,A,_,o?new Array(C.length):null));return{lines:l,points:h,rect:[T,w,N,O]}}static deserialize(t,n,i,a,o,{paths:{lines:l,points:h},rotation:p,thickness:d}){const f=[];let m,y,b,A,_;switch(p){case 0:_=Outline._rescale,m=-t/i,y=n/a+1,b=1/i,A=-1/a;break;case 90:_=Outline._rescaleAndSwap,m=-n/a,y=-t/i,b=1/a,A=1/i;break;case 180:_=Outline._rescale,m=t/i+1,y=-n/a,b=-1/i,A=1/a;break;case 270:_=Outline._rescaleAndSwap,m=n/a+1,y=t/i+1,b=-1/a,A=-1/i;break}if(!l){l=[];for(const w of h){const N=w.length;if(N===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(N===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const O=new Float32Array(3*(N-2));l.push(O);let[P,E,C,L]=w.subarray(0,4);O.set([NaN,NaN,NaN,NaN,P,E],0);for(let X=4;X<N;X+=2){const q=w[X],Q=w[X+1];O.set(Outline.createBezierPoints(P,E,C,L,q,Q),(X-2)*3),[P,E,C,L]=[C,L,q,Q]}}}for(let w=0,N=l.length;w<N;w++)f.push({line:_(l[w].map(O=>O??NaN),m,y,b,A),points:_(h[w].map(O=>O??NaN),m,y,b,A)});const T=new this.prototype.constructor;return T.build(f,i,a,1,p,d,o),T}#u(t=this.#c){const n=this.#n+t/2*this.#o;return this.#r%180===0?[n/this.#a,n/this.#s]:[n/this.#s,n/this.#a]}#f(){const[t,n,i,a]=this.#t,[o,l]=this.#u(0);return[t+o,n+l,i-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let h=4,p=a.length;h<p;h+=6)Util.pointBoundingBox(a[h],a[h+1],t);continue}let o=a[4],l=a[5];for(let h=6,p=a.length;h<p;h+=6){const[d,f,m,y,b,A]=a.subarray(h,h+6);Util.bezierBoundingBox(o,l,d,f,m,y,b,A,t),o=b,l=A}}const[n,i]=this.#u();t[0]=MathClamp(t[0]-n,0,1),t[1]=MathClamp(t[1]-i,0,1),t[2]=MathClamp(t[2]+n,0,1),t[3]=MathClamp(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,n){return t==="stroke-width"?this.#d(n):null}#d(t){const[n,i]=this.#u();this.#c=t;const[a,o]=this.#u(),[l,h]=[a-n,o-i],p=this.#t;return p[0]-=l,p[1]-=h,p[2]+=2*l,p[3]+=2*h,p}updateParentDimensions([t,n],i){const[a,o]=this.#u();this.#a=t,this.#s=n,this.#o=i;const[l,h]=this.#u(),p=l-a,d=h-o,f=this.#t;return f[0]-=p,f[1]-=d,f[2]+=2*p,f[3]+=2*d,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Outline.svgRound).join(" ")}get defaultProperties(){const[t,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=this.#t;let i=0,a=0,o=0,l=0,h=0,p=0;switch(this.#e){case 90:a=n/t,o=-t/n,h=t;break;case 180:i=-1,l=-1,h=t,p=n;break;case 270:a=-n/t,o=t/n,p=n;break;default:return""}return`matrix(${i} ${a} ${o} ${l} ${Outline.svgRound(h)} ${Outline.svgRound(p)})`}getPathResizingSVGProperties([t,n,i,a]){const[o,l]=this.#u(),[h,p,d,f]=this.#t;if(Math.abs(d-o)<=Outline.PRECISION||Math.abs(f-l)<=Outline.PRECISION){const _=t+i/2-(h+d/2),T=n+a/2-(p+f/2);return{path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(n)}`,transform:`${this.rotationTransform} translate(${_} ${T})`}}}const m=(i-2*o)/(d-2*o),y=(a-2*l)/(f-2*l),b=d/i,A=f/a;return{path:{"transform-origin":`${Outline.svgRound(h)} ${Outline.svgRound(p)}`,transform:`${this.rotationTransform} scale(${b} ${A}) translate(${Outline.svgRound(o)} ${Outline.svgRound(l)}) scale(${m} ${y}) translate(${Outline.svgRound(-o)} ${Outline.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,i,a]){const[o,l]=this.#u(),h=this.#t,[p,d,f,m]=h;if(h[0]=t,h[1]=n,h[2]=i,h[3]=a,Math.abs(f-o)<=Outline.PRECISION||Math.abs(m-l)<=Outline.PRECISION){const T=t+i/2-(p+f/2),w=n+a/2-(d+m/2);for(const{line:N,points:O}of this.#i)Outline._translate(N,T,w,N),Outline._translate(O,T,w,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*o)/(f-2*o),b=(a-2*l)/(m-2*l),A=-y*(p+o)+t+o,_=-b*(d+l)+n+l;if(y!==1||b!==1||A!==0||_!==0)for(const{line:T,points:w}of this.#i)Outline._rescale(T,A,_,y,b,T),Outline._rescale(w,A,_,y,b,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[a,o]=i,l=this.#t,h=t-l[0],p=n-l[1];if(this.#a===a&&this.#s===o)for(const{line:d,points:f}of this.#i)Outline._translate(d,h,p,d),Outline._translate(f,h,p,f);else{const d=this.#a/a,f=this.#s/o;this.#a=a,this.#s=o;for(const{line:m,points:y}of this.#i)Outline._rescale(m,h,p,d,f,m),Outline._rescale(y,h,p,d,f,y);l[2]*=d,l[3]*=f}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(n)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(t[0])} ${Outline.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class InkDrawingOptions extends DrawingOptions{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new InkDrawingOptions(this._viewParameters);return t.updateAll(this),t}}class InkEditor extends DrawingEditor{static _type="ink";static _editorType=AnnotationEditorType.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){AnnotationEditor.initialize(t,n),this._defaultDrawingOptions=new InkDrawingOptions(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,a,o){return new InkDrawOutliner(t,n,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,a,o,l){return InkDrawOutline.deserialize(t,n,i,a,o,l)}static async deserialize(t,n,i){let a=null;if(t instanceof InkAnnotationElement){const{data:{inkLists:l,rect:h,rotation:p,id:d,color:f,opacity:m,borderStyle:{rawWidth:y},popupRef:b},parent:{page:{pageNumber:A}}}=t;a=t={annotationType:AnnotationEditorType.INK,color:Array.from(f),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:A-1,rect:h.slice(0),rotation:p,id:d,deleted:!1,popupRef:b}}const o=await super.deserialize(t,n,i);return o.annotationElementId=t.id||null,o._initialData=a,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=InkEditor.getDefaultDrawingOptions({stroke:Util.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":h}}=this,p={annotationType:AnnotationEditorType.INK,color:AnnotationEditor._colorManager.convert(o),opacity:l,thickness:h,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(p.isCopy=!0,p):this.annotationElementId&&!this.#t(p)?null:(p.id=this.annotationElementId,p)}#t(t){const{color:n,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,h)=>l!==n[h])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}}class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;class SignatureExtractor{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,n,i,a){return i-=t,a-=n,i===0?a>0?0:4:i===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,n,i,a,o,l,h){const p=this.#e(i,a,o,l);for(let d=0;d<8;d++){const f=(-d+p-h+16)%8,m=this.#n[2*f],y=this.#n[2*f+1];if(t[(i+m)*n+(a+y)]!==0)return f}return-1}static#a(t,n,i,a,o,l,h){const p=this.#e(i,a,o,l);for(let d=0;d<8;d++){const f=(d+p+h+16)%8,m=this.#n[2*f],y=this.#n[2*f+1];if(t[(i+m)*n+(a+y)]!==0)return f}return-1}static#s(t,n,i,a){const o=t.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=t[f]<=a?1:0;for(let f=1;f<i-1;f++)l[f*n]=l[f*n+n-1]=0;for(let f=0;f<n;f++)l[f]=l[n*i-1-f]=0;let h=1,p;const d=[];for(let f=1;f<i-1;f++){p=1;for(let m=1;m<n-1;m++){const y=f*n+m,b=l[y];if(b===0)continue;let A=f,_=m;if(b===1&&l[y-1]===0)h+=1,_-=1;else if(b>=1&&l[y+1]===0)h+=1,_+=1,b>1&&(p=b);else{b!==1&&(p=Math.abs(b));continue}const T=[m,f],w=_===m+1,N={isHole:w,points:T,id:h,parent:0};d.push(N);let O;for(const K of d)if(K.id===p){O=K;break}O?O.isHole?N.parent=w?O.parent:p:N.parent=w?p:O.parent:N.parent=w?p:0;const P=this.#i(l,n,f,m,A,_,0);if(P===-1){l[y]=-h,l[y]!==1&&(p=Math.abs(l[y]));continue}let E=this.#n[2*P],C=this.#n[2*P+1];const L=f+E,X=m+C;A=L,_=X;let q=f,Q=m;for(;;){const K=this.#a(l,n,q,Q,A,_,1);E=this.#n[2*K],C=this.#n[2*K+1];const tt=q+E,gt=Q+C;T.push(gt,tt);const ct=q*n+Q;if(l[ct+1]===0?l[ct]=-h:l[ct]===1&&(l[ct]=h),tt===f&&gt===m&&q===L&&Q===X){l[y]!==1&&(p=Math.abs(l[y]));break}else A=q,_=Q,q=tt,Q=gt}}}return d}static#o(t,n,i,a){if(i-n<=4){for(let L=n;L<i-2;L+=2)a.push(t[L],t[L+1]);return}const o=t[n],l=t[n+1],h=t[i-4]-o,p=t[i-3]-l,d=Math.hypot(h,p),f=h/d,m=p/d,y=f*l-m*o,b=p/h,A=1/d,_=Math.atan(b),T=Math.cos(_),w=Math.sin(_),N=A*(Math.abs(T)+Math.abs(w)),O=A*(1-N+N**2),P=Math.max(Math.atan(Math.abs(w+T)*O),Math.atan(Math.abs(w-T)*O));let E=0,C=n;for(let L=n+2;L<i-2;L+=2){const X=Math.abs(y-f*t[L+1]+m*t[L]);X>E&&(C=L,E=X)}E>(d*P)**2?(this.#o(t,n,C+2,a),this.#o(t,C,i,a)):a.push(o,l)}static#r(t){const n=[],i=t.length;return this.#o(t,0,i,n),n.push(t[i-2],t[i-1]),n.length<=4?null:n}static#c(t,n,i,a,o,l){const h=new Float32Array(l**2),p=-2*a**2,d=l>>1;for(let _=0;_<l;_++){const T=(_-d)**2;for(let w=0;w<l;w++)h[_*l+w]=Math.exp((T+(w-d)**2)/p)}const f=new Float32Array(256),m=-2*o**2;for(let _=0;_<256;_++)f[_]=Math.exp(_**2/m);const y=t.length,b=new Uint8Array(y),A=new Uint32Array(256);for(let _=0;_<i;_++)for(let T=0;T<n;T++){const w=_*n+T,N=t[w];let O=0,P=0;for(let C=0;C<l;C++){const L=_+C-d;if(!(L<0||L>=i))for(let X=0;X<l;X++){const q=T+X-d;if(q<0||q>=n)continue;const Q=t[L*n+q],K=h[C*l+X]*f[Math.abs(Q-N)];O+=Q*K,P+=K}}const E=b[w]=Math.round(O/P);A[E]++}return[b,A]}static#u(t){const n=new Uint32Array(256);for(const i of t)n[i]++;return n}static#f(t){const n=t.length,i=new Uint8ClampedArray(n>>2);let a=-1/0,o=1/0;for(let h=0,p=i.length;h<p;h++){if(t[(h<<2)+3]===0){a=i[h]=255;continue}const f=i[h]=t[h<<2];f>a&&(a=f),f<o&&(o=f)}const l=255/(a-o);for(let h=0;h<n;h++)i[h]=(i[h]-o)*l;return i}static#h(t){let n,i=-1/0,a=-1/0;const o=t.findIndex(p=>p!==0);let l=o,h=o;for(n=o;n<256;n++){const p=t[n];p>i&&(n-l>a&&(a=n-l,h=n-1),i=p,l=n)}for(n=h-1;n>=0&&!(t[n]>t[n+1]);n--);return n}static#d(t){const n=t,{width:i,height:a}=t,{maxDim:o}=this.#t;let l=i,h=a;if(i>o||a>o){let y=i,b=a,A=Math.log2(Math.max(i,a)/o);const _=Math.floor(A);A=A===_?_-1:_;for(let w=0;w<A;w++){l=Math.ceil(y/2),h=Math.ceil(b/2);const N=new OffscreenCanvas(l,h);N.getContext("2d").drawImage(t,0,0,y,b,0,0,l,h),y=l,b=h,t!==n&&t.close(),t=N.transferToImageBitmap()}const T=Math.min(o/l,o/h);l=Math.round(l*T),h=Math.round(h*T)}const d=new OffscreenCanvas(l,h).getContext("2d",{willReadFrequently:!0});d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,l,h);const f=d.getImageData(0,0,l,h).data;return[this.#f(f),l,h]}static extractContoursFromText(t,{fontFamily:n,fontStyle:i,fontWeight:a},o,l,h,p){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const m=200,y=f.font=`${i} ${a} ${m}px ${n}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:A,actualBoundingBoxAscent:_,actualBoundingBoxDescent:T,fontBoundingBoxAscent:w,fontBoundingBoxDescent:N,width:O}=f.measureText(t),P=1.5,E=Math.ceil(Math.max(Math.abs(b)+Math.abs(A)||0,O)*P),C=Math.ceil(Math.max(Math.abs(_)+Math.abs(T)||m,Math.abs(w)+Math.abs(N)||m)*P);d=new OffscreenCanvas(E,C),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,E,C),f.fillStyle="black",f.fillText(t,E*(P-1)/2,C*(3-P)/2);const L=this.#f(f.getImageData(0,0,E,C).data),X=this.#u(L),q=this.#h(X),Q=this.#s(L,E,C,q);return this.processDrawnLines({lines:{curves:Q,width:E,height:C},pageWidth:o,pageHeight:l,rotation:h,innerMargin:p,mustSmooth:!0,areContours:!0})}static process(t,n,i,a,o){const[l,h,p]=this.#d(t),[d,f]=this.#c(l,h,p,Math.hypot(h,p)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(f),y=this.#s(d,h,p,m);return this.processDrawnLines({lines:{curves:y,width:h,height:p},pageWidth:n,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:l,areContours:h}){a%180!==0&&([n,i]=[i,n]);const{curves:p,width:d,height:f}=t,m=t.thickness??0,y=[],b=Math.min(n/d,i/f),A=b/n,_=b/i,T=[];for(const{points:N}of p){const O=l?this.#r(N):N;if(!O)continue;T.push(O);const P=O.length,E=new Float32Array(P),C=new Float32Array(3*(P===2?2:P-2));if(y.push({line:C,points:E}),P===2){E[0]=O[0]*A,E[1]=O[1]*_,C.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[L,X,q,Q]=O;L*=A,X*=_,q*=A,Q*=_,E.set([L,X,q,Q],0),C.set([NaN,NaN,NaN,NaN,L,X],0);for(let K=4;K<P;K+=2){const tt=E[K]=O[K]*A,gt=E[K+1]=O[K+1]*_;C.set(Outline.createBezierPoints(L,X,q,Q,tt,gt),(K-2)*3),[L,X,q,Q]=[q,Q,tt,gt]}}if(y.length===0)return null;const w=h?new ContourDrawOutline:new InkDrawOutline;return w.build(y,n,i,1,a,h?0:m,o),{outline:w,newCurves:T,areContours:h,thickness:m,width:d,height:f}}static async compressSignature({outlines:t,areContours:n,thickness:i,width:a,height:o}){let l=1/0,h=-1/0,p=0;for(const O of t){p+=O.length;for(let P=2,E=O.length;P<E;P++){const C=O[P]-O[P-2];l=Math.min(l,C),h=Math.max(h,C)}}let d;l>=-128&&h<=127?d=Int8Array:l>=-32768&&h<=32767?d=Int16Array:d=Int32Array;const f=t.length,m=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*f,y=new Uint32Array(m);let b=0;y[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(p-2*f)*d.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=a,y[b++]=o,y[b++]=n?0:1,y[b++]=Math.max(0,Math.floor(i??0)),y[b++]=f,y[b++]=d.BYTES_PER_ELEMENT;for(const O of t)y[b++]=O.length-2,y[b++]=O[0],y[b++]=O[1];const A=new CompressionStream("deflate-raw"),_=A.writable.getWriter();await _.ready,_.write(y);const T=d.prototype.constructor;for(const O of t){const P=new T(O.length-2);for(let E=2,C=O.length;E<C;E++)P[E-2]=O[E]-O[E-2];_.write(P)}_.close();const w=await new Response(A.readable).arrayBuffer(),N=new Uint8Array(w);return toBase64Util(N)}static async decompressSignature(t){try{const n=fromBase64Util(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(n).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,h=0;for await(const O of i)l||=new Uint8Array(new Uint32Array(O.buffer,0,4)[0]),l.set(O,h),h+=O.length;const p=new Uint32Array(l.buffer,0,l.length>>2),d=p[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=p[2],m=p[3],y=p[4]===0,b=p[5],A=p[6],_=p[7],T=[],w=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*A)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(_){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(l.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(l.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(l.buffer,w);break}h=0;for(let O=0;O<A;O++){const P=p[POINTS_PROPERTIES_NUMBER*O+BASE_HEADER_LENGTH],E=new Float32Array(P+2);T.push(E);for(let C=0;C<POINTS_PROPERTIES_NUMBER-1;C++)E[C]=p[POINTS_PROPERTIES_NUMBER*O+BASE_HEADER_LENGTH+C+1];for(let C=0;C<P;C++)E[C+2]=E[C]+N[h++]}return{areContours:y,thickness:b,outlines:T,width:f,height:m}}catch(n){return warn(`decompressSignature: ${n}`),null}}}class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const t=new SignatureOptions;return t.updateAll(this),t}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(t){super(t),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const t=new DrawnSignatureOptions(this._viewParameters);return t.updateAll(this),t}}class SignatureEditor extends DrawingEditor{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=AnnotationEditorType.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){AnnotationEditor.initialize(t,n),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:o,areContours:l,description:h,uuid:p,heightInPage:d}=this.#n,{rawDims:{pageWidth:f,pageHeight:m},rotation:y}=this.parent.viewport,b=SignatureExtractor.processDrawnLines({lines:a,pageWidth:f,pageHeight:m,rotation:y,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,d,h,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:i,width:a,height:o}=this.#n,l=Math.max(a,o),h=SignatureExtractor.processDrawnLines({lines:{curves:t.map(p=>({points:p})),thickness:i,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&this.#e!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,this.#i,this.#e),t.show()),t):null}addSignature(t,n,i,a){const{x:o,y:l}=this,{outline:h}=this.#n=t;this.#t=h instanceof ContourDrawOutline,this.#e=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let p;this.#t?p=SignatureEditor.getDefaultDrawingOptions():(p=SignatureEditor._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:p});const[d,f]=this.parentDimensions,[,m]=this.pageDimensions;let y=n/m;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,f*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return SignatureExtractor.process(t,n,i,a,SignatureEditor._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(t,n,i,a,o,SignatureEditor._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:a,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=SignatureEditor.getDefaultDrawingOptions():(this._drawingOptions=SignatureEditor._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:AnnotationEditorType.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:o,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.paths={lines:n,points:i},l.uuid=this.#i,l.isCopy=!0):l.lines=n,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,n,i,a,o,l){return l.areContours?ContourDrawOutline.deserialize(t,n,i,a,o,l):InkDrawOutline.deserialize(t,n,i,a,o,l)}static async deserialize(t,n,i){const a=await super.deserialize(t,n,i);return a.#t=t.areContours,a.#e=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class StampEditor extends AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#a=null;#s="";#o=null;#r=!1;#c=null;#u=!1;#f=!1;static _type="stamp";static _editorType=AnnotationEditorType.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){AnnotationEditor.initialize(t,n)}static isHandlingMimeForPasting(t){return SupportedImageMimeTypes.includes(t)}static paste(t,n){n.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#h(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#u=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#d(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const p=h.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}#l(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#d());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#d());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#d());return}const t=document.createElement("input");t.type="file",t.accept=SupportedImageMimeTypes.join(",");const n=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#l();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#l(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#r)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#r||(this.#t?this.#p():this.#l()),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#r=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:n,height:i}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*a,i=this.height*o;else if(n>l*a||i>l*o){const f=Math.min(l*a/n,l*o/i);n*=f,i*=f}const[h,p]=this.parentDimensions;this.setDims(n*h/a,i*p/o),this._uiManager.enableWaiting(!1);const d=this.#o=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=n/a,this.height=i/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#f||(this.parent.addUndoableEditor(this),this.#f=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s)}copyCanvas(t,n,i=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new OutputScale;let h=this.#t,p=a,d=o,f=null;if(n){if(a>n||o>n){const C=Math.min(n/a,n/o);p=Math.floor(a*C),d=Math.floor(o*C)}f=document.createElement("canvas");const y=f.width=Math.ceil(p*l.sx),b=f.height=Math.ceil(d*l.sy);this.#u||(h=this.#m(y,b));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let _="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(_="#8f8f9d",T="#42414d");const w=15,N=w*l.sx,O=w*l.sy,P=new OffscreenCanvas(N*2,O*2),E=P.getContext("2d");E.fillStyle=_,E.fillRect(0,0,N*2,O*2),E.fillStyle=T,E.fillRect(0,0,N,O),E.fillRect(N,O,N,O),A.fillStyle=A.createPattern(P,"repeat"),A.fillRect(0,0,y,b),A.drawImage(h,0,0,h.width,h.height,0,0,y,b)}let m=null;if(i){let y,b;if(l.symmetric&&h.width<t&&h.height<t)y=h.width,b=h.height;else if(h=this.#t,a>t||o>t){const T=Math.min(t/a,t/o);y=Math.floor(a*T),b=Math.floor(o*T),this.#u||(h=this.#m(y,b))}const _=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});_.drawImage(h,0,0,h.width,h.height,0,0,y,b),m={width:y,height:b,data:_.getImageData(0,0,y,b).data}}return{canvas:f,width:p,height:d,imageData:m}}#m(t,n){const{width:i,height:a}=this.#t;let o=i,l=a,h=this.#t;for(;o>2*t||l>2*n;){const p=o,d=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(h,0,0,p,d,0,0,o,l),h=f.transferToImageBitmap()}return h}#g(){const[t,n]=this.parentDimensions,{width:i,height:a}=this,o=new OutputScale,l=Math.ceil(i*t*o.sx),h=Math.ceil(a*n*o.sy),p=this.#o;if(!p||p.width===l&&p.height===h)return;p.width=l,p.height=h;const d=this.#u?this.#t:this.#m(l,h),f=p.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,l,h)}#b(t){if(t){if(this.#u){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#u){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*PixelsPerInch.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*PixelsPerInch.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,n,i){let a=null,o=!1;if(t instanceof StampAnnotationElement){const{data:{rect:_,rotation:T,id:w,structParent:N,popupRef:O},container:P,parent:{page:{pageNumber:E}},canvas:C}=t;let L,X;C?(delete t.canvas,{id:L,bitmap:X}=i.imageManager.getFromCanvas(P.id,C),C.remove()):(o=!0,t._hasNoCanvas=!0);const q=(await n._structTree.getAriaAttributes(`${AnnotationPrefix}${w}`))?.get("aria-label")||"";a=t={annotationType:AnnotationEditorType.STAMP,bitmapId:L,bitmap:X,pageIndex:E-1,rect:_.slice(0),rotation:T,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:N,popupRef:O}}const l=await super.deserialize(t,n,i),{rect:h,bitmap:p,bitmapUrl:d,bitmapId:f,isSvg:m,accessibilityData:y}=t;o?(i.addMissingCanvas(t.id,l),l.#r=!0):f&&i.imageManager.isValidId(f)?(l.#e=f,p&&(l.#t=p)):l.#i=d,l.#u=m;const[b,A]=l.pageDimensions;return l.width=(h[2]-h[0])/b,l.height=(h[3]-h[1])/A,l.annotationElementId=t.id||null,y&&(l.altTextData=y),l._initialData=a,l.#f=!!a,l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=this.#y(i);if(h.isSame)return null;h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||=new Map;const l=this.#u?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:l,serialized:i}),i.bitmap=this.#b(!1);else if(this.#u){const h=n.stamps.get(this.#e);l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=this.#b(!1))}return i}#y(t){const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===n,o=(t.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class AnnotationEditorLayer{#t;#e=!1;#n=null;#i=null;#a=null;#s=new Map;#o=!1;#r=!1;#c=!1;#u=null;#f=null;#h=null;#d=null;#l;static _initialized=!1;static#p=new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:p,viewport:d,l10n:f}){const m=[...AnnotationEditorLayer.#p.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;for(const y of m)y.initialize(f,t)}t.registerEditorTypes(m),this.#l=t,this.pageIndex=n,this.div=i,this.#t=o,this.#n=l,this.viewport=d,this.#h=p,this.drawLayer=h,this._structTree=a,this.#l.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#l.getMode()===AnnotationEditorType.NONE}updateToolbar(t){this.#l.updateToolbar(t)}updateMode(t=this.#l.getMode()){switch(this.#A(),t){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const i of AnnotationEditorLayer.#p.values())n.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#l.setEditingState(t)}addCommands(t){this.#l.addCommands(t)}cleanUndoStack(t){this.#l.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#s.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#l.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#n){this.#c=!1;return}const n=this.#n.getEditableAnnotations();for(const i of n){if(i.hide(),this.#l.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1}disable(){this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const a of this.#s.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else n.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#n){const a=this.#n.getEditableAnnotations();for(const o of a){const{id:l}=o.data;if(this.#l.isDeletedAnnotationElement(l))continue;let h=n.get(l);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=t.get(l),h&&(this.#l.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of AnnotationEditorLayer.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#l.getActive()!==t&&this.#l.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#d){this.#d=new AbortController;const t=this.#l.combinedSignal(this.#d);this.#h.div.addEventListener("pointerdown",this.#m.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#h.div.classList.remove("highlighting"))}#m(t){this.#l.unselectAll();const{target:n}=t;if(n===this.#h.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#h.div.contains(n)){const{isMac:i}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#l.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,this.#l.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#l._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#l.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:n}=t;n&&this.#l.isDeletedAnnotationElement(n)&&this.#l.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#r&&t.annotationElementId&&this.#l.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#l.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#l.addDeletedAnnotationElement(t.annotationElementId),AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#l.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#l.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#l._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:n,undo:i,mustExec:!1})}getNextId(){return this.#l.getId()}get#g(){return AnnotationEditorLayer.#p.get(this.#l.getMode())}combinedSignal(t){return this.#l.combinedSignal(t)}#b(t){const n=this.#g;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}async pasteEditor(t,n){this.updateToolbar(t),await this.#l.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#y(),o=this.getNextId(),l=this.#b({parent:this,id:o,x:i,y:a,uiManager:this.#l,isCentered:!0,...n});l&&this.add(l)}async deserialize(t){return await AnnotationEditorLayer.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#l)||null}createAndAddNewEditor(t,n,i={}){const a=this.getNextId(),o=this.#b({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#l,isCentered:n,...i});return o&&this.add(o),o}#y(){const{x:t,y:n,width:i,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),l=Math.max(0,n),h=Math.min(window.innerWidth,t+i),p=Math.min(window.innerHeight,n+a),d=(o+h)/2-t,f=(l+p)/2-n,[m,y]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#y(),!0,t)}setSelected(t){this.#l.setSelected(t)}toggleSelected(t){this.#l.toggleSelected(t)}unselect(t){this.#l.unselect(t)}pointerup(t){const{isMac:n}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#o||(this.#o=!1,this.#g?.isDrawer&&this.#g.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#l.getMode();if(i===AnnotationEditorType.STAMP||i===AnnotationEditorType.SIGNATURE){this.#l.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#l.getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:n}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#o=!0,this.#g?.isDrawer){this.startDrawingSession(t);return}const i=this.#l.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#u){this.#g.startDrawing(this,this.#l,!1,t);return}this.#l.setCurrentDrawingSession(this),this.#u=new AbortController;const n=this.#l.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#f=null,this.commitOrRemove())},{signal:n}),this.#g.startDrawing(this,this.#l,!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&(this.#f=n);return}this.#f&&setTimeout(()=>{this.#f?.focus(),this.#f=null},0)}endDrawingSession(t=!1){return this.#u?(this.#l.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#f=null,this.#g.endDrawing(t)):null}findNewParent(t,n,i){const a=this.#l.findParent(n,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#u?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#u&&this.#g.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#l.getActive()?.parent===this&&(this.#l.commitOrRemove(),this.#l.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#l.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,setLayerDimensions(this.div,t);for(const n of this.#l.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#l.commitOrRemove(),this.#A();const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,setLayerDimensions(this.div,{rotation:i}),n!==i)for(const a of this.#s.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#l.viewParameters.realScale}}class DrawLayer{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}static#a(t,[n,i,a,o]){const{style:l}=t;l.top=`${100*i}%`,l.left=`${100*n}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=DrawLayer._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,n){const i=DrawLayer._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${n}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=DrawLayer._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),a}#r(t,n){for(const[i,a]of Object.entries(n))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,n=!1,i=!1){const a=DrawLayer.#i++,o=this.#s(),l=DrawLayer._svgFactory.createElement("defs");o.append(l);const h=DrawLayer._svgFactory.createElement("path");l.append(h);const p=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",p),h.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#n.set(a,h);const d=i?this.#o(l,p):null,f=DrawLayer._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${p}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${d})`}}drawOutline(t,n){const i=DrawLayer.#i++,a=this.#s(),o=DrawLayer._svgFactory.createElement("defs");a.append(o);const l=DrawLayer._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let p;if(n){const m=DrawLayer._svgFactory.createElement("mask");o.append(m),p=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",p),m.setAttribute("maskUnits","objectBoundingBox");const y=DrawLayer._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=DrawLayer._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${h}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=DrawLayer._svgFactory.createElement("use");a.append(d),d.setAttribute("href",`#${h}`),p&&d.setAttribute("mask",`url(#${p})`);const f=d.cloneNode();return a.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,n){this.#n.delete(t),this.updateProperties(t,n)}updateProperties(t,n){if(!n)return;const{root:i,bbox:a,rootClass:o,path:l}=n,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#r(h,i),a&&DrawLayer.#a(h,a),o){const{classList:p}=h;for(const[d,f]of Object.entries(o))p.toggle(d,f)}if(l){const d=h.firstChild.firstChild;this.#r(d,l)}}}updateParent(t,n){if(n===this)return;const i=this.#e.get(t);i&&(n.#t.append(i),this.#e.delete(t),n.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer,AnnotationMode,AnnotationType,build,ColorPicker,createValidAbsoluteUrl,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses,PDFDataRangeTransport,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const languageData={hi:{"header-title":" ","nav-vlogs":"","nav-tools":"","nav-about":"  ","nav-contact":" ","tools-title":"","read-more":" ","search-placeholder":"   ...","vlogs-title":" ","about-title":"  ","contact-title":" ","subscribe-btn":" ","post-comment-btn":"  ","footer-text":" 2024  .    ","pdf-title":"PDF ","pdf-upload-label":"PDF  ","prev-page":" ","next-page":" ","page-info":(u,t)=>` ${u} / ${t}`,"pdf-loading":"PDF    ...","pdf-error":"PDF    ","no-pdf":" PDF    ","zoom-in":" ","zoom-out":" ","zoom-reset":"","download-pdf":"PDF  ","image-resizer-title":"  ","image-resizer-description":"     ","image-upload-label":" ","width-placeholder":" (px)","height-placeholder":" (px)","resize-btn":"   ","download-btn":"  ","alert-image-type":"     ","alert-image-required":"    ","alert-invalid-dimensions":"      ","conversion-history":"  ","unit-converter-title":" ","temperature-converter":" ","weight-converter":" ","temp-label":"","weight-label":"","celsius-placeholder":"","fahrenheit-placeholder":"","kg-placeholder":"","pound-placeholder":"","text-editor-title":" ","text-editor-placeholder":"   ...","text-tools-title":" ","text-tools-placeholder":"  ...","word-count":":","char-count":":","calculator-title":"","alert-required-field":"   ","alert-invalid-input":" "},en:{"header-title":"My Website","nav-vlogs":"Vlogs","nav-tools":"Tools","nav-about":"About Us","nav-contact":"Contact","tools-title":"Tools","read-more":"Read More","search-placeholder":"Search vlogs and posts...","vlogs-title":"Our Vlogs","about-title":"About Us","contact-title":"Contact Us","subscribe-btn":"Subscribe","post-comment-btn":"Post Comment","footer-text":" 2024 My Website. All rights reserved.","pdf-title":"PDF Reader","pdf-upload-label":"Select PDF File","prev-page":"Previous Page","next-page":"Next Page","page-info":(u,t)=>`Page ${u} / ${t}`,"pdf-loading":"Loading PDF...","pdf-error":"Error loading PDF","no-pdf":"No PDF file selected","zoom-in":"Zoom In","zoom-out":"Zoom Out","zoom-reset":"Reset","download-pdf":"Download PDF","image-resizer-title":"Image Resizer","image-resizer-description":"Resize images to specific dimensions","image-upload-label":"Select Image","width-placeholder":"Width (px)","height-placeholder":"Height (px)","resize-btn":"Resize Image","download-btn":"Download Image","alert-image-type":"Please select a valid image file","alert-image-required":"Please select an image first","alert-invalid-dimensions":"Please enter valid width and height","conversion-history":"Recent Conversions","unit-converter-title":"Unit Converter","temperature-converter":"Temperature Converter","weight-converter":"Weight Converter","temp-label":"Temperature","weight-label":"Weight","celsius-placeholder":"Celsius","fahrenheit-placeholder":"Fahrenheit","kg-placeholder":"Kilograms","pound-placeholder":"Pounds","text-editor-title":"Text Editor","text-editor-placeholder":"Write some text here...","text-tools-title":"Text Tools","text-tools-placeholder":"Write text here...","word-count":"Words:","char-count":"Chars:","calculator-title":"Calculator","alert-required-field":"Please fill this field","alert-invalid-input":"Invalid input"}};function commonjsRequire(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(t,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,((u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=k,t.bytesToString=ot,t.createPromiseCapability=ie,t.createValidAbsoluteUrl=U,t.getModificationDate=jt,t.getVerbosityLevel=V,t.info=j,t.isArrayBuffer=Gt,t.isArrayEqual=xe,t.objectFromMap=At,t.objectSize=vt,t.setVerbosityLevel=I,t.shadow=x,t.string32=dt,t.stringToBytes=bt,t.stringToPDFString=te,t.stringToUTF8String=we,t.unreachable=S,t.utf8StringToString=ge,t.warn=M;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const a=1.35;t.LINE_FACTOR=a;const o=.35;t.LINE_DESCENT_FACTOR=o;const l=o/a;t.BASELINE_FACTOR=l;const h={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=h;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=p;const d="pdfjs_internal_editor_";t.AnnotationEditorPrefix=d;const f={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=f;const m={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=m;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=y;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=b;const A={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=A;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=_;const T={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=T;const w={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=w;const N={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=N;const O={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=O;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=P;const E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=E;const C={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=C;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=L;const X={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=X;const q={O:"PageOpen",C:"PageClose"};t.PageActionEventType=q;const Q={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=Q;const K={NONE:0,BINARY:1};t.CMapCompressionType=K;const tt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=tt;const gt={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=gt;const ct={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=ct;let J=Q.WARNINGS;function I(yt){Number.isInteger(yt)&&(J=yt)}function V(){return J}function j(yt){J>=Q.INFOS&&console.log(`Info: ${yt}`)}function M(yt){J>=Q.WARNINGS&&console.log(`Warning: ${yt}`)}function S(yt){throw new Error(yt)}function k(yt,lt){yt||S(lt)}function H(yt){if(!yt)return!1;switch(yt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function U(yt,lt=null,nt=null){if(!yt)return null;try{if(nt&&typeof yt=="string"){if(nt.addDefaultProtocol&&yt.startsWith("www.")){const Ot=yt.match(/\./g);Ot&&Ot.length>=2&&(yt=`http://${yt}`)}if(nt.tryConvertEncoding)try{yt=we(yt)}catch{}}const Et=lt?new URL(yt,lt):new URL(yt);if(H(Et))return Et}catch{}return null}function x(yt,lt,nt,Et=!1){return Object.defineProperty(yt,lt,{value:nt,enumerable:!Et,configurable:!0,writable:!1}),nt}const R=(function(){function lt(nt,Et){this.constructor===lt&&S("Cannot initialize BaseException."),this.message=nt,this.name=Et}return lt.prototype=new Error,lt.constructor=lt,lt})();t.BaseException=R;class F extends R{constructor(lt,nt){super(lt,"PasswordException"),this.code=nt}}t.PasswordException=F;class G extends R{constructor(lt,nt){super(lt,"UnknownErrorException"),this.details=nt}}t.UnknownErrorException=G;class z extends R{constructor(lt){super(lt,"InvalidPDFException")}}t.InvalidPDFException=z;class Y extends R{constructor(lt){super(lt,"MissingPDFException")}}t.MissingPDFException=Y;class $ extends R{constructor(lt,nt){super(lt,"UnexpectedResponseException"),this.status=nt}}t.UnexpectedResponseException=$;class at extends R{constructor(lt){super(lt,"FormatError")}}t.FormatError=at;class st extends R{constructor(lt){super(lt,"AbortException")}}t.AbortException=st;function ot(yt){(typeof yt!="object"||yt===null||yt.length===void 0)&&S("Invalid argument for bytesToString");const lt=yt.length,nt=8192;if(lt<nt)return String.fromCharCode.apply(null,yt);const Et=[];for(let Ot=0;Ot<lt;Ot+=nt){const se=Math.min(Ot+nt,lt),ee=yt.subarray(Ot,se);Et.push(String.fromCharCode.apply(null,ee))}return Et.join("")}function bt(yt){typeof yt!="string"&&S("Invalid argument for stringToBytes");const lt=yt.length,nt=new Uint8Array(lt);for(let Et=0;Et<lt;++Et)nt[Et]=yt.charCodeAt(Et)&255;return nt}function dt(yt){return String.fromCharCode(yt>>24&255,yt>>16&255,yt>>8&255,yt&255)}function vt(yt){return Object.keys(yt).length}function At(yt){const lt=Object.create(null);for(const[nt,Et]of yt)lt[nt]=Et;return lt}function St(){const yt=new Uint8Array(4);return yt[0]=1,new Uint32Array(yt.buffer,0,1)[0]===1}function Tt(){try{return new Function(""),!0}catch{return!1}}class _t{static get isLittleEndian(){return x(this,"isLittleEndian",St())}static get isEvalSupported(){return x(this,"isEvalSupported",Tt())}static get isOffscreenCanvasSupported(){return x(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?x(this,"platform",{isWin:!1,isMac:!1}):x(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=_t;const It=[...Array(256).keys()].map(yt=>yt.toString(16).padStart(2,"0"));class zt{static makeHexColor(lt,nt,Et){return`#${It[lt]}${It[nt]}${It[Et]}`}static scaleMinMax(lt,nt){let Et;lt[0]?(lt[0]<0&&(Et=nt[0],nt[0]=nt[1],nt[1]=Et),nt[0]*=lt[0],nt[1]*=lt[0],lt[3]<0&&(Et=nt[2],nt[2]=nt[3],nt[3]=Et),nt[2]*=lt[3],nt[3]*=lt[3]):(Et=nt[0],nt[0]=nt[2],nt[2]=Et,Et=nt[1],nt[1]=nt[3],nt[3]=Et,lt[1]<0&&(Et=nt[2],nt[2]=nt[3],nt[3]=Et),nt[2]*=lt[1],nt[3]*=lt[1],lt[2]<0&&(Et=nt[0],nt[0]=nt[1],nt[1]=Et),nt[0]*=lt[2],nt[1]*=lt[2]),nt[0]+=lt[4],nt[1]+=lt[4],nt[2]+=lt[5],nt[3]+=lt[5]}static transform(lt,nt){return[lt[0]*nt[0]+lt[2]*nt[1],lt[1]*nt[0]+lt[3]*nt[1],lt[0]*nt[2]+lt[2]*nt[3],lt[1]*nt[2]+lt[3]*nt[3],lt[0]*nt[4]+lt[2]*nt[5]+lt[4],lt[1]*nt[4]+lt[3]*nt[5]+lt[5]]}static applyTransform(lt,nt){const Et=lt[0]*nt[0]+lt[1]*nt[2]+nt[4],Ot=lt[0]*nt[1]+lt[1]*nt[3]+nt[5];return[Et,Ot]}static applyInverseTransform(lt,nt){const Et=nt[0]*nt[3]-nt[1]*nt[2],Ot=(lt[0]*nt[3]-lt[1]*nt[2]+nt[2]*nt[5]-nt[4]*nt[3])/Et,se=(-lt[0]*nt[1]+lt[1]*nt[0]+nt[4]*nt[1]-nt[5]*nt[0])/Et;return[Ot,se]}static getAxialAlignedBoundingBox(lt,nt){const Et=zt.applyTransform(lt,nt),Ot=zt.applyTransform(lt.slice(2,4),nt),se=zt.applyTransform([lt[0],lt[3]],nt),ee=zt.applyTransform([lt[2],lt[1]],nt);return[Math.min(Et[0],Ot[0],se[0],ee[0]),Math.min(Et[1],Ot[1],se[1],ee[1]),Math.max(Et[0],Ot[0],se[0],ee[0]),Math.max(Et[1],Ot[1],se[1],ee[1])]}static inverseTransform(lt){const nt=lt[0]*lt[3]-lt[1]*lt[2];return[lt[3]/nt,-lt[1]/nt,-lt[2]/nt,lt[0]/nt,(lt[2]*lt[5]-lt[4]*lt[3])/nt,(lt[4]*lt[1]-lt[5]*lt[0])/nt]}static singularValueDecompose2dScale(lt){const nt=[lt[0],lt[2],lt[1],lt[3]],Et=lt[0]*nt[0]+lt[1]*nt[2],Ot=lt[0]*nt[1]+lt[1]*nt[3],se=lt[2]*nt[0]+lt[3]*nt[2],ee=lt[2]*nt[1]+lt[3]*nt[3],Pn=(Et+ee)/2,fn=Math.sqrt((Et+ee)**2-4*(Et*ee-se*Ot))/2,nn=Pn+fn||1,me=Pn-fn||1;return[Math.sqrt(nn),Math.sqrt(me)]}static normalizeRect(lt){const nt=lt.slice(0);return lt[0]>lt[2]&&(nt[0]=lt[2],nt[2]=lt[0]),lt[1]>lt[3]&&(nt[1]=lt[3],nt[3]=lt[1]),nt}static intersect(lt,nt){const Et=Math.max(Math.min(lt[0],lt[2]),Math.min(nt[0],nt[2])),Ot=Math.min(Math.max(lt[0],lt[2]),Math.max(nt[0],nt[2]));if(Et>Ot)return null;const se=Math.max(Math.min(lt[1],lt[3]),Math.min(nt[1],nt[3])),ee=Math.min(Math.max(lt[1],lt[3]),Math.max(nt[1],nt[3]));return se>ee?null:[Et,se,Ot,ee]}static bezierBoundingBox(lt,nt,Et,Ot,se,ee,Pn,fn){const nn=[],me=[[],[]];let ze,sn,ni,oe,On,Dn,Ei,cs;for(let an=0;an<2;++an){if(an===0?(sn=6*lt-12*Et+6*se,ze=-3*lt+9*Et-9*se+3*Pn,ni=3*Et-3*lt):(sn=6*nt-12*Ot+6*ee,ze=-3*nt+9*Ot-9*ee+3*fn,ni=3*Ot-3*nt),Math.abs(ze)<1e-12){if(Math.abs(sn)<1e-12)continue;oe=-ni/sn,0<oe&&oe<1&&nn.push(oe);continue}Ei=sn*sn-4*ni*ze,cs=Math.sqrt(Ei),!(Ei<0)&&(On=(-sn+cs)/(2*ze),0<On&&On<1&&nn.push(On),Dn=(-sn-cs)/(2*ze),0<Dn&&Dn<1&&nn.push(Dn))}let Me=nn.length,Ht;const ue=Me;for(;Me--;)oe=nn[Me],Ht=1-oe,me[0][Me]=Ht*Ht*Ht*lt+3*Ht*Ht*oe*Et+3*Ht*oe*oe*se+oe*oe*oe*Pn,me[1][Me]=Ht*Ht*Ht*nt+3*Ht*Ht*oe*Ot+3*Ht*oe*oe*ee+oe*oe*oe*fn;return me[0][ue]=lt,me[1][ue]=nt,me[0][ue+1]=Pn,me[1][ue+1]=fn,me[0].length=me[1].length=ue+2,[Math.min(...me[0]),Math.min(...me[1]),Math.max(...me[0]),Math.max(...me[1])]}}t.Util=zt;const Pt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function te(yt){if(yt[0]>=""){let nt;if(yt[0]===""&&yt[1]===""?nt="utf-16be":yt[0]===""&&yt[1]===""?nt="utf-16le":yt[0]===""&&yt[1]===""&&yt[2]===""&&(nt="utf-8"),nt)try{const Et=new TextDecoder(nt,{fatal:!0}),Ot=bt(yt);return Et.decode(Ot)}catch(Et){M(`stringToPDFString: "${Et}".`)}}const lt=[];for(let nt=0,Et=yt.length;nt<Et;nt++){const Ot=Pt[yt.charCodeAt(nt)];lt.push(Ot?String.fromCharCode(Ot):yt.charAt(nt))}return lt.join("")}function we(yt){return decodeURIComponent(escape(yt))}function ge(yt){return unescape(encodeURIComponent(yt))}function Gt(yt){return typeof yt=="object"&&yt!==null&&yt.byteLength!==void 0}function xe(yt,lt){if(yt.length!==lt.length)return!1;for(let nt=0,Et=yt.length;nt<Et;nt++)if(yt[nt]!==lt[nt])return!1;return!0}function jt(yt=new Date){return[yt.getUTCFullYear().toString(),(yt.getUTCMonth()+1).toString().padStart(2,"0"),yt.getUTCDate().toString().padStart(2,"0"),yt.getUTCHours().toString().padStart(2,"0"),yt.getUTCMinutes().toString().padStart(2,"0"),yt.getUTCSeconds().toString().padStart(2,"0")].join("")}function ie(){const yt=Object.create(null);let lt=!1;return Object.defineProperty(yt,"settled",{get(){return lt}}),yt.promise=new Promise(function(nt,Et){yt.resolve=function(Ot){lt=!0,nt(Ot)},yt.reject=function(Ot){lt=!0,Et(Ot)}}),yt}}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:u,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:n}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=u,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=n}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:u}=__w_pdfjs_require__(21);createPDFNetworkStream=t=>new u(t)}else{const{PDFNetworkStream:u}=__w_pdfjs_require__(24),{PDFFetchStream:t}=__w_pdfjs_require__(25);createPDFNetworkStream=n=>(0,_display_utils.isValidFetchUrl)(n.url)?new t(n):new u(n)}function getDocument(u){if(typeof u=="string"||u instanceof URL)u={url:u};else if((0,_util.isArrayBuffer)(u))u={data:u};else if(u instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),u={range:u};else if(typeof u!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!u.url&&!u.data&&!u.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,n=u.url?getUrlProp(u.url):null,i=u.data?getDataProp(u.data):null,a=u.httpHeaders||null,o=u.withCredentials===!0,l=u.password??null,h=u.range instanceof PDFDataRangeTransport?u.range:null,p=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let d=u.worker instanceof PDFWorker?u.worker:null;const f=u.verbosity,m=typeof u.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(u.docBaseUrl)?u.docBaseUrl:null,y=typeof u.cMapUrl=="string"?u.cMapUrl:null,b=u.cMapPacked!==!1,A=u.CMapReaderFactory||DefaultCMapReaderFactory,_=typeof u.standardFontDataUrl=="string"?u.standardFontDataUrl:null,T=u.StandardFontDataFactory||DefaultStandardFontDataFactory,w=u.stopAtErrors!==!0,N=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,O=u.isEvalSupported!==!1,P=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!_is_node.isNodeJS,E=typeof u.disableFontFace=="boolean"?u.disableFontFace:_is_node.isNodeJS,C=u.fontExtraProperties===!0,L=u.enableXfa===!0,X=u.ownerDocument||globalThis.document,q=u.disableRange===!0,Q=u.disableStream===!0,K=u.disableAutoFetch===!0,tt=u.pdfBug===!0,gt=h?h.length:u.length??NaN,ct=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!_is_node.isNodeJS&&!E,J=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:A===_display_utils.DOMCMapReaderFactory&&T===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(y,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(_,document.baseURI),I=null;(0,_util.setVerbosityLevel)(f);const V=J?null:{cMapReaderFactory:new A({baseUrl:y,isCompressed:b}),standardFontDataFactory:new T({baseUrl:_})};if(!d){const k={verbosity:f,port:_worker_options.GlobalWorkerOptions.workerPort};d=k.port?PDFWorker.fromPort(k):new PDFWorker(k),t._worker=d}const j=t.docId,M={docId:j,apiVersion:"3.4.120",data:i,password:l,disableAutoFetch:K,rangeChunkSize:p,length:gt,docBaseUrl:m,enableXfa:L,evaluatorOptions:{maxImageSize:N,disableFontFace:E,ignoreErrors:w,isEvalSupported:O,isOffscreenCanvasSupported:P,fontExtraProperties:C,useSystemFonts:ct,cMapUrl:J?y:null,standardFontDataUrl:J?_:null}},S={ignoreErrors:w,isEvalSupported:O,disableFontFace:E,fontExtraProperties:C,enableXfa:L,ownerDocument:X,disableAutoFetch:K,pdfBug:tt,styleElement:I};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const k=_fetchDocument(d,M),H=new Promise(function(U){let x;h?x=new _transport_stream.PDFDataTransportStream({length:gt,initialData:h.initialData,progressiveDone:h.progressiveDone,contentDispositionFilename:h.contentDispositionFilename,disableRange:q,disableStream:Q},h):i||(x=createPDFNetworkStream({url:n,length:gt,httpHeaders:a,withCredentials:o,rangeChunkSize:p,disableRange:q,disableStream:Q})),U(x)});return Promise.all([k,H]).then(function([U,x]){if(t.destroyed)throw new Error("Loading aborted");const R=new _message_handler.MessageHandler(j,U,d.port),F=new WorkerTransport(R,t,x,S,V);t._transport=F,R.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(u,t){if(u.destroyed)throw new Error("Worker was destroyed");const n=await u.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(u.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(u){if(u instanceof URL)return u.href;try{return new URL(u,window.location).href}catch{if(_is_node.isNodeJS&&typeof u=="string")return u}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(u){if(_is_node.isNodeJS&&typeof Buffer<"u"&&u instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(u);if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return(0,_util.stringToBytes)(u);if(typeof u=="object"&&!isNaN(u?.length)||(0,_util.isArrayBuffer)(u))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;#e=null;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return this.#e}set onUnsupportedFeature(t){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),this.#e=t}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,n,i=!1,a=null){this.length=t,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(const i of this._rangeListeners)i(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,n,i,a,o=!1){this._pageIndex=t,this._pageInfo=n,this._ownerDocument=a,this._transport=i,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const n=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:i="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:o=null,canvasFactory:l=null,background:h=null,optionalContentConfigPromise:p=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:m=null}){this._stats?.time("Overall");const y=this._transport.getRenderingIntent(i,a,m);this.pendingCleanup=!1,p||(p=this._transport.getOptionalContentConfig());let b=this._intentStates.get(y.cacheKey);b||(b=Object.create(null),this._intentStates.set(y.cacheKey,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const A=l||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=!!(y.renderingIntent&_util.RenderingIntentFlag.PRINT);b.displayReadyCapability||(b.displayReadyCapability=(0,_util.createPromiseCapability)(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(y));const T=O=>{b.renderTasks.delete(w),(this.cleanupAfterRender||_)&&(this.pendingCleanup=!0),this._tryCleanup(),O?(w.capability.reject(O),this._abortOperatorList({intentState:b,reason:O instanceof Error?O:new Error(O)})):w.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},w=new InternalRenderTask({callback:T,params:{canvasContext:t,viewport:n,transform:o,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:A,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:f});(b.renderTasks||=new Set).add(w);const N=w.task;return Promise.all([b.displayReadyCapability.promise,p]).then(([O,P])=>{if(this.pendingCleanup){T();return}this._stats?.time("Rendering"),w.initializeGraphics({transparency:O,optionalContentConfig:P}),w.operatorListChanged()}).catch(T),N}getOperatorList({intent:t="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,n,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let h;return l.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,l.opListReadCapability=(0,_util.createPromiseCapability)(),(l.renderTasks||=new Set).add(h),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==!0,includeMarkedContent:n===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const n=this.streamTextContent(t);return new Promise(function(i,a){function o(){l.read().then(function({value:p,done:d}){if(d){i(h);return}Object.assign(h.styles,p.styles),h.items.push(...p.items),o()},a)}const l=n.getReader(),h={items:[],styles:Object.create(null)};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:n,operatorList:i}of this._intentStates.values())if(n.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(t,n){const i=this._intentStates.get(n);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let i=0,a=t.length;i<a;i++)n.operatorList.fnArray.push(t.fnArray[i]),n.operatorList.argsArray.push(t.argsArray[i]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageMap:i}){const o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i}).getReader(),l=this._intentStates.get(n);l.streamReader=o;const h=()=>{o.read().then(({value:p,done:d})=>{if(d){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,l),h())},p=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const d of l.renderTasks)d.operatorListChanged();this._tryCleanup()}if(l.displayReadyCapability)l.displayReadyCapability.reject(p);else if(l.opListReadCapability)l.opListReadCapability.reject(p);else throw p}})};h()}_abortOperatorList({intentState:t,reason:n,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},a);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(t,n){const i={data:structuredClone(t,n)};this.#e.then(()=>{for(const a of this.#t)a.call(this,i)})}addEventListener(t,n){this.#t.add(n)}removeEventListener(t,n){this.#t.delete(n)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const u=document?.currentScript?.src;u&&(PDFWorkerUtil.fallbackWorkerSrc=u.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(u,t){let n;try{if(n=new URL(u),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(u){const t=`importScripts("${u}");`;return URL.createObjectURL(new Blob([t]))}}class PDFWorker{static#workerPorts=new WeakMap;constructor({name:u=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(t&&PDFWorker.#workerPorts.has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=u,this.destroyed=!1,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){PDFWorker.#workerPorts.set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(u){this._port=u,this._messageHandler=new _message_handler.MessageHandler("main","worker",u),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:u}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,u)||(u=PDFWorkerUtil.createCDNWrapper(new URL(u,window.location).href));const t=new Worker(u),n=new _message_handler.MessageHandler("main","worker",t),i=()=>{t.removeEventListener("error",a),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||i()};t.addEventListener("error",a),n.on("test",l=>{if(t.removeEventListener("error",a),this.destroyed){i();return}l?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",l=>{if(t.removeEventListener("error",a),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(u=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const n=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(n+"_worker",n,t);u.setup(i,t);const a=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(u=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${u.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(u){if(!u?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(u.port)?this.#workerPorts.get(u.port):new PDFWorker(u)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;constructor(t,n,i,a,o){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.cMapReaderFactory=o?.cMapReaderFactory,this.standardFontDataFactory=o?.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}#i(t,n=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,a),a}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,n=_util.AnnotationMode.ENABLE,i=null,a=!1){let o=_util.RenderingIntentFlag.DISPLAY,l=null;switch(t){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(n){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,l=(o&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return a&&(o+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:o,cacheKey:`${o}_${_annotation_storage.AnnotationStorage.getHash(l)}`,annotationStorageMap:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(i,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}(0,_util.assert)(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",i=>{const a=(0,_util.createPromiseCapability)(),o=this._fullReader;return o.headersReady.then(()=>{(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),o.onProgress=l=>{n.onProgress?.({loaded:l.loaded,total:l.total})}),a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},a.reject),a.promise}),t.on("GetRangeReader",(i,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){a.close();return}(0,_util.assert)(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(i,this))}),t.on("DocException",function(i){let a;switch(i.name){case"PasswordException":a=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":a=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(a)}),t.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),n.onPassword){const a=o=>{o instanceof Error?this._passwordCapability.reject(o):this._passwordCapability.resolve({password:o})};try{n.onPassword(a,i.code)}catch(o){this._passwordCapability.reject(o)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),t.on("DataLoaded",i=>{n.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,o])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(a){case"Font":const l=this._params;if("error"in o){const d=o.error;(0,_util.warn)(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}let h=null;l.pdfBug&&globalThis.FontInspector?.enabled&&(h={registerFont(d,f){globalThis.FontInspector.fontAdded(d,f)}});const p=new _font_loader.FontFaceObject(o,{isEvalSupported:l.isEvalSupported,disableFontFace:l.disableFontFace,ignoreErrors:l.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:h});this.fontLoader.bind(p).catch(d=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${a}`)}}),t.on("obj",([i,a,o,l])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i))switch(o){case"Image":h.objs.resolve(i,l);const p=8e6;if(l){let d;if(l.bitmap){const{width:f,height:m}=l;d=f*m*4}else d=l.data?.length||0;d>p&&(h.cleanupAfterRender=!0)}break;case"Pattern":h.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${o}`)}}),t.on("DocProgress",i=>{this.destroyed||n.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,i=this.#n.get(n);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");const l=new PDFPageProxy(n,o,this,this._params.ownerDocument,this._params.pdfBug);return this.#e.set(n,l),l});return this.#n.set(n,a),a}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear()}}get loadingParams(){const{disableAutoFetch:t,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:n})}}class PDFObjects{#t=Object.create(null);#e(t){const n=this.#t[t];return n||(this.#t[t]={capability:(0,_util.createPromiseCapability)(),data:null})}get(t,n=null){if(n){const a=this.#e(t);return a.capability.promise.then(()=>n(a.data)),null}const i=this.#t[t];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){return this.#t[t]?.capability.settled||!1}resolve(t,n=null){const i=this.#e(t);i.data=n,i.capability.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:t,params:n,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:p,useRequestAnimationFrame:d=!1,pdfBug:f=!1,pageColors:m=null}){this.callback=t,this.params=n,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=p,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:a,transform:o,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this._canvas&&InternalRenderTask.#t.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=n(1),a=n(4),o=n(8);class l{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(d,f){const m=this.#e.get(d);return m===void 0?f:Object.assign(f,m)}getRawValue(d){return this.#e.get(d)}remove(d){if(this.#e.delete(d),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of this.#e.values())if(f instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(d,f){const m=this.#e.get(d);let y=!1;if(m!==void 0)for(const[b,A]of Object.entries(f))m[b]!==A&&(y=!0,m[b]=A);else y=!0,this.#e.set(d,f);y&&this.#n(),f instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(d){return this.#e.has(d)}getAll(){return this.#e.size>0?(0,i.objectFromMap)(this.#e):null}setAll(d){for(const[f,m]of Object.entries(d))this.setValue(f,m)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(this.#e.size===0)return null;const d=new Map;for(const[f,m]of this.#e){const y=m instanceof a.AnnotationEditor?m.serialize():m;y&&d.set(f,y)}return d}static getHash(d){if(!d)return"";const f=new o.MurmurHash3_64;for(const[m,y]of d)f.update(`${m}:${JSON.stringify(y)}`);return f.hexdigest()}}t.AnnotationStorage=l;class h extends l{#t=null;constructor(d){super(),this.#t=structuredClone(d.serializable)}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}t.PrintAnnotationStorage=h}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(5),a=n(1);class o{#t=this.focusin.bind(this);#e=this.focusout.bind(this);#n=!1;#i=!1;#a=!1;_uiManager=null;#s=o._zIndex++;static _colorManager=new i.ColorManager;static _zIndex=1;constructor(h){this.constructor===o&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null,this._uiManager=h.uiManager;const{rotation:p,rawDims:{pageWidth:d,pageHeight:f,pageX:m,pageY:y}}=this.parent.viewport;this.rotation=p,this.pageDimensions=[d,f],this.pageTranslation=[m,y];const[b,A]=this.parentDimensions;this.x=h.x/b,this.y=h.y/A,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(h){this._uiManager.addCommands(h)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#s}setParent(h){h!==null&&(this.pageIndex=h.pageIndex,this.pageDimensions=h.pageDimensions),this.parent=h}focusin(h){this.#n?this.#n=!1:this.parent.setSelected(this)}focusout(h){!this.isAttachedToDOM||h.relatedTarget?.closest(`#${this.id}`)||(h.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(h){const p=this.parent.div.getBoundingClientRect();this.startX=h.clientX-p.x,this.startY=h.clientY-p.y,h.dataTransfer.setData("text/plain",this.id),h.dataTransfer.effectAllowed="move"}setAt(h,p,d,f){const[m,y]=this.parentDimensions;[d,f]=this.screenToPageTranslation(d,f),this.x=(h+d)/m,this.y=(p+f)/y,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(h,p){const[d,f]=this.parentDimensions;[h,p]=this.screenToPageTranslation(h,p),this.x+=h/d,this.y+=p/f,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(h,p){switch(this.parentRotation){case 90:return[p,-h];case 180:return[-h,-p];case 270:return[-p,h];default:return[h,p]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:h}=this._uiManager.viewParameters,[p,d]=this.pageDimensions;return[p*h,d*h]}setDims(h,p){const[d,f]=this.parentDimensions;this.div.style.width=`${100*h/d}%`,this.div.style.height=`${100*p/f}%`}fixDims(){const{style:h}=this.div,{height:p,width:d}=h,f=d.endsWith("%"),m=p.endsWith("%");if(f&&m)return;const[y,b]=this.parentDimensions;f||(h.width=`${100*parseFloat(d)/y}%`),m||(h.height=`${100*parseFloat(p)/b}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#t),this.div.addEventListener("focusout",this.#e);const[h,p]=this.getInitialTranslation();return this.translate(h,p),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(h){const{isMac:p}=a.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&p){h.preventDefault();return}h.ctrlKey&&!p||h.shiftKey||h.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#n=!0}getRect(h,p){const d=this.parentScale,[f,m]=this.pageDimensions,[y,b]=this.pageTranslation,A=h/d,_=p/d,T=this.x*f,w=this.y*m,N=this.width*f,O=this.height*m;switch(this.rotation){case 0:return[T+A+y,m-w-_-O+b,T+A+N+y,m-w-_+b];case 90:return[T+_+y,m-w+A+b,T+_+O+y,m-w+A+N+b];case 180:return[T-A-N+y,m-w+_+b,T-A+y,m-w+_+O+b];case 270:return[T-_-O+y,m-w-A-N+b,T-_+y,m-w-A+b];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,p){const[d,f,m,y]=h,b=m-d,A=y-f;switch(this.rotation){case 0:return[d,p-y,b,A];case 90:return[d,p-f,A,b];case 180:return[m,p-f,b,A];case 270:return[m,p-y,A,b];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#a=!0}disableEditMode(){this.#a=!1}isInEditMode(){return this.#a}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#t)}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(h,p,d){const f=new this.prototype.constructor({parent:p,id:p.getNextId(),uiManager:d});f.rotation=h.rotation;const[m,y]=f.pageDimensions,[b,A,_,T]=f.getRectInCurrentCoords(h.rect,y);return f.x=b/m,f.y=A/y,f.width=_/m,f.height=T/y,f}remove(){this.div.removeEventListener("focusin",this.#t),this.div.removeEventListener("focusout",this.#e),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(h,p){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#i}set isEditing(h){this.#i=h,h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}t.AnnotationEditor=o}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=o,t.opacityToHex=l;var i=n(1),a=n(6);function o(y,b,A){for(const _ of A)b.addEventListener(_,y[_].bind(y))}function l(y){return Math.round(Math.min(255,Math.max(1,255*y))).toString(16).padStart(2,"0")}class h{#t=0;getId(){return`${i.AnnotationEditorPrefix}${this.#t++}`}}class p{#t=[];#e=!1;#n;#i=-1;constructor(b=128){this.#n=b}add({cmd:b,undo:A,mustExec:_,type:T=NaN,overwriteIfSameType:w=!1,keepUndo:N=!1}){if(_&&b(),this.#e)return;const O={cmd:b,undo:A,type:T};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(O);return}if(w&&this.#t[this.#i].type===T){N&&(O.undo=this.#t[this.#i].undo),this.#t[this.#i]=O;return}const P=this.#i+1;P===this.#n?this.#t.splice(0,1):(this.#i=P,P<this.#t.length&&this.#t.splice(P)),this.#t.push(O)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}t.CommandManager=p;class d{constructor(b){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:A}=i.FeatureTest.platform;for(const[_,T]of b)for(const w of _){const N=w.startsWith("mac+");A&&N?(this.callbacks.set(w.slice(4),T),this.allKeys.add(w.split("+").at(-1))):!A&&!N&&(this.callbacks.set(w,T),this.allKeys.add(w.split("+").at(-1)))}}#t(b){b.altKey&&this.buffer.push("alt"),b.ctrlKey&&this.buffer.push("ctrl"),b.metaKey&&this.buffer.push("meta"),b.shiftKey&&this.buffer.push("shift"),this.buffer.push(b.key);const A=this.buffer.join("+");return this.buffer.length=0,A}exec(b,A){if(!this.allKeys.has(A.key))return;const _=this.callbacks.get(this.#t(A));_&&(_.bind(b)(),A.stopPropagation(),A.preventDefault())}}t.KeyboardManager=d;class f{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const b=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(b),(0,i.shadow)(this,"_colors",b)}convert(b){const A=(0,a.getRGB)(b);if(!window.matchMedia("(forced-colors: active)").matches)return A;for(const[_,T]of this._colors)if(T.every((w,N)=>w===A[N]))return f._colorsMapping.get(_);return A}getHexCode(b){const A=this._colors.get(b);return A?i.Util.makeHexColor(...A):b}}t.ColorManager=f;class m{#t=null;#e=new Map;#n=new Map;#i=null;#a=new p;#s=0;#o=null;#r=new Set;#c=null;#u=new h;#f=!1;#h=i.AnnotationEditorType.NONE;#d=new Set;#l=this.copy.bind(this);#p=this.cut.bind(this);#m=this.paste.bind(this);#g=this.keydown.bind(this);#b=this.onEditingAction.bind(this);#y=this.onPageChanging.bind(this);#A=this.onScaleChanging.bind(this);#E=this.onRotationChanging.bind(this);#w={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=null;static _keyboardManager=new d([[["ctrl+a","mac+meta+a"],m.prototype.selectAll],[["ctrl+z","mac+meta+z"],m.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],m.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],m.prototype.delete],[["Escape","mac+Escape"],m.prototype.unselectAll]]);constructor(b,A,_){this.#_=b,this.#c=A,this.#c._on("editingaction",this.#b),this.#c._on("pagechanging",this.#y),this.#c._on("scalechanging",this.#A),this.#c._on("rotationchanging",this.#E),this.#i=_,this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#R(),this.#c._off("editingaction",this.#b),this.#c._off("pagechanging",this.#y),this.#c._off("scalechanging",this.#A),this.#c._off("rotationchanging",this.#E);for(const b of this.#n.values())b.destroy();this.#n.clear(),this.#e.clear(),this.#r.clear(),this.#t=null,this.#d.clear(),this.#a.destroy()}onPageChanging({pageNumber:b}){this.#s=b-1}focusMainContainer(){this.#_.focus()}addShouldRescale(b){this.#r.add(b)}removeShouldRescale(b){this.#r.delete(b)}onScaleChanging({scale:b}){this.commitOrRemove(),this.viewParameters.realScale=b*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const A of this.#r)A.onScaleChanging()}onRotationChanging({pagesRotation:b}){this.commitOrRemove(),this.viewParameters.rotation=b}addToAnnotationStorage(b){!b.isEmpty()&&this.#i&&!this.#i.has(b.id)&&this.#i.setValue(b.id,b)}#P(){this.#_.addEventListener("keydown",this.#g)}#R(){this.#_.removeEventListener("keydown",this.#g)}#x(){document.addEventListener("copy",this.#l),document.addEventListener("cut",this.#p),document.addEventListener("paste",this.#m)}#C(){document.removeEventListener("copy",this.#l),document.removeEventListener("cut",this.#p),document.removeEventListener("paste",this.#m)}copy(b){if(b.preventDefault(),this.#t&&this.#t.commitOrRemove(),!this.hasSelection)return;const A=[];for(const _ of this.#d)_.isEmpty()||A.push(_.serialize());A.length!==0&&b.clipboardData.setData("application/pdfjs",JSON.stringify(A))}cut(b){this.copy(b),this.delete()}paste(b){b.preventDefault();let A=b.clipboardData.getData("application/pdfjs");if(!A)return;try{A=JSON.parse(A)}catch(T){(0,i.warn)(`paste: "${T.message}".`);return}if(!Array.isArray(A))return;this.unselectAll();const _=this.#n.get(this.#s);try{const T=[];for(const O of A){const P=_.deserialize(O);if(!P)return;T.push(P)}const w=()=>{for(const O of T)this.#L(O);this.#v(T)},N=()=>{for(const O of T)O.remove()};this.addCommands({cmd:w,undo:N,mustExec:!0})}catch(T){(0,i.warn)(`paste: "${T.message}".`)}}keydown(b){this.getActive()?.shouldGetKeyboardEvents()||m._keyboardManager.exec(this,b)}onEditingAction(b){["undo","redo","delete","selectAll"].includes(b.name)&&this[b.name]()}#S(b){Object.entries(b).some(([_,T])=>this.#w[_]!==T)&&this.#c.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#w,b)})}#M(b){this.#c.dispatch("annotationeditorparamschanged",{source:this,details:b})}setEditingState(b){b?(this.#P(),this.#x(),this.#S({isEditing:this.#h!==i.AnnotationEditorType.NONE,isEmpty:this.#T(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#R(),this.#C(),this.#S({isEditing:!1}))}registerEditorTypes(b){if(!this.#o){this.#o=b;for(const A of this.#o)this.#M(A.defaultPropertiesToUpdate)}}getId(){return this.#u.getId()}get currentLayer(){return this.#n.get(this.#s)}get currentPageIndex(){return this.#s}addLayer(b){this.#n.set(b.pageIndex,b),this.#f?b.enable():b.disable()}removeLayer(b){this.#n.delete(b.pageIndex)}updateMode(b){if(this.#h=b,b===i.AnnotationEditorType.NONE)this.setEditingState(!1),this.#D();else{this.setEditingState(!0),this.#O();for(const A of this.#n.values())A.updateMode(b)}}updateToolbar(b){b!==this.#h&&this.#c.dispatch("switchannotationeditormode",{source:this,mode:b})}updateParams(b,A){if(this.#o){for(const _ of this.#d)_.updateParams(b,A);for(const _ of this.#o)_.updateDefaultParams(b,A)}}#O(){if(!this.#f){this.#f=!0;for(const b of this.#n.values())b.enable()}}#D(){if(this.unselectAll(),this.#f){this.#f=!1;for(const b of this.#n.values())b.disable()}}getEditors(b){const A=[];for(const _ of this.#e.values())_.pageIndex===b&&A.push(_);return A}getEditor(b){return this.#e.get(b)}addEditor(b){this.#e.set(b.id,b)}removeEditor(b){this.#e.delete(b.id),this.unselect(b),this.#i?.remove(b.id)}#L(b){const A=this.#n.get(b.pageIndex);A?A.addOrRebuild(b):this.addEditor(b)}setActiveEditor(b){this.#t!==b&&(this.#t=b,b&&this.#M(b.propertiesToUpdate))}toggleSelected(b){if(this.#d.has(b)){this.#d.delete(b),b.unselect(),this.#S({hasSelectedEditor:this.hasSelection});return}this.#d.add(b),b.select(),this.#M(b.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}setSelected(b){for(const A of this.#d)A!==b&&A.unselect();this.#d.clear(),this.#d.add(b),b.select(),this.#M(b.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}isSelected(b){return this.#d.has(b)}unselect(b){b.unselect(),this.#d.delete(b),this.#S({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#d.size!==0}undo(){this.#a.undo(),this.#S({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#T()})}redo(){this.#a.redo(),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#T()})}addCommands(b){this.#a.add(b),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#T()})}#T(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const b of this.#e.values())return b.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const b=[...this.#d],A=()=>{for(const T of b)T.remove()},_=()=>{for(const T of b)this.#L(T)};this.addCommands({cmd:A,undo:_,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}#v(b){this.#d.clear();for(const A of b)A.isEmpty()||(this.#d.add(A),A.select());this.#S({hasSelectedEditor:!0})}selectAll(){for(const b of this.#d)b.commit();this.#v(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.#d.size!==0){for(const b of this.#d)b.unselect();this.#d.clear(),this.#S({hasSelectedEditor:!1})}}isActive(b){return this.#t===b}getActive(){return this.#t}getMode(){return this.#h}}t.AnnotationEditorUIManager=m}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=C,t.getColorValues=K,t.getCurrentTransform=tt,t.getCurrentTransformInverse=gt,t.getFilenameFromUrl=w,t.getPdfFilenameFromUrl=N,t.getRGB=Q,t.getXfaPageViewport=q,t.isDataScheme=_,t.isPdfFile=T,t.isValidFetchUrl=P,t.loadScript=E,t.setLayerDimensions=ct;var i=n(7),a=n(1);const o="http://www.w3.org/2000/svg",l="pdfjs_internal_id_";t.AnnotationPrefix=l;class h{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=h;class p extends i.BaseCanvasFactory{constructor({ownerDocument:I=globalThis.document}={}){super(),this._document=I}_createCanvas(I,V){const j=this._document.createElement("canvas");return j.width=I,j.height=V,j}}t.DOMCanvasFactory=p;async function d(J,I=!1){if(P(J,document.baseURI)){const V=await fetch(J);if(!V.ok)throw new Error(V.statusText);return I?new Uint8Array(await V.arrayBuffer()):(0,a.stringToBytes)(await V.text())}return new Promise((V,j)=>{const M=new XMLHttpRequest;M.open("GET",J,!0),I&&(M.responseType="arraybuffer"),M.onreadystatechange=()=>{if(M.readyState===XMLHttpRequest.DONE){if(M.status===200||M.status===0){let S;if(I&&M.response?S=new Uint8Array(M.response):!I&&M.responseText&&(S=(0,a.stringToBytes)(M.responseText)),S){V(S);return}}j(new Error(M.statusText))}},M.send(null)})}class f extends i.BaseCMapReaderFactory{_fetchData(I,V){return d(I,this.isCompressed).then(j=>({cMapData:j,compressionType:V}))}}t.DOMCMapReaderFactory=f;class m extends i.BaseStandardFontDataFactory{_fetchData(I){return d(I,!0)}}t.DOMStandardFontDataFactory=m;class y extends i.BaseSVGFactory{_createSVG(I){return document.createElementNS(o,I)}}t.DOMSVGFactory=y;class b{constructor({viewBox:I,scale:V,rotation:j,offsetX:M=0,offsetY:S=0,dontFlip:k=!1}){this.viewBox=I,this.scale=V,this.rotation=j,this.offsetX=M,this.offsetY=S;const H=(I[2]+I[0])/2,U=(I[3]+I[1])/2;let x,R,F,G;switch(j%=360,j<0&&(j+=360),j){case 180:x=-1,R=0,F=0,G=1;break;case 90:x=0,R=1,F=1,G=0;break;case 270:x=0,R=-1,F=-1,G=0;break;case 0:x=1,R=0,F=0,G=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}k&&(F=-F,G=-G);let z,Y,$,at;x===0?(z=Math.abs(U-I[1])*V+M,Y=Math.abs(H-I[0])*V+S,$=(I[3]-I[1])*V,at=(I[2]-I[0])*V):(z=Math.abs(H-I[0])*V+M,Y=Math.abs(U-I[1])*V+S,$=(I[2]-I[0])*V,at=(I[3]-I[1])*V),this.transform=[x*V,R*V,F*V,G*V,z-x*V*H-F*V*U,Y-R*V*H-G*V*U],this.width=$,this.height=at}get rawDims(){const{viewBox:I}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:I[2]-I[0],pageHeight:I[3]-I[1],pageX:I[0],pageY:I[1]})}clone({scale:I=this.scale,rotation:V=this.rotation,offsetX:j=this.offsetX,offsetY:M=this.offsetY,dontFlip:S=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:I,rotation:V,offsetX:j,offsetY:M,dontFlip:S})}convertToViewportPoint(I,V){return a.Util.applyTransform([I,V],this.transform)}convertToViewportRectangle(I){const V=a.Util.applyTransform([I[0],I[1]],this.transform),j=a.Util.applyTransform([I[2],I[3]],this.transform);return[V[0],V[1],j[0],j[1]]}convertToPdfPoint(I,V){return a.Util.applyInverseTransform([I,V],this.transform)}}t.PageViewport=b;class A extends a.BaseException{constructor(I,V,j=0){super(I,"RenderingCancelledException"),this.type=V,this.extraDelay=j}}t.RenderingCancelledException=A;function _(J){const I=J.length;let V=0;for(;V<I&&J[V].trim()==="";)V++;return J.substring(V,V+5).toLowerCase()==="data:"}function T(J){return typeof J=="string"&&/\.pdf$/i.test(J)}function w(J,I=!1){return I||([J]=J.split(/[#?]/,1)),J.substring(J.lastIndexOf("/")+1)}function N(J,I="document.pdf"){if(typeof J!="string")return I;if(_(J))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),I;const V=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,j=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,M=V.exec(J);let S=j.exec(M[1])||j.exec(M[2])||j.exec(M[3]);if(S&&(S=S[0],S.includes("%")))try{S=j.exec(decodeURIComponent(S))[0]}catch{}return S||I}class O{started=Object.create(null);times=[];time(I){I in this.started&&(0,a.warn)(`Timer is already running for ${I}`),this.started[I]=Date.now()}timeEnd(I){I in this.started||(0,a.warn)(`Timer has not been started for ${I}`),this.times.push({name:I,start:this.started[I],end:Date.now()}),delete this.started[I]}toString(){const I=[];let V=0;for(const{name:j}of this.times)V=Math.max(j.length,V);for(const{name:j,start:M,end:S}of this.times)I.push(`${j.padEnd(V)} ${S-M}ms
`);return I.join("")}}t.StatTimer=O;function P(J,I){try{const{protocol:V}=I?new URL(J,I):new URL(J);return V==="http:"||V==="https:"}catch{return!1}}function E(J,I=!1){return new Promise((V,j)=>{const M=document.createElement("script");M.src=J,M.onload=function(S){I&&M.remove(),V(S)},M.onerror=function(){j(new Error(`Cannot load script at: ${M.src}`))},(document.head||document.documentElement).append(M)})}function C(J){console.log("Deprecated API usage: "+J)}let L;class X{static toDateObject(I){if(!I||typeof I!="string")return null;L||(L=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const V=L.exec(I);if(!V)return null;const j=parseInt(V[1],10);let M=parseInt(V[2],10);M=M>=1&&M<=12?M-1:0;let S=parseInt(V[3],10);S=S>=1&&S<=31?S:1;let k=parseInt(V[4],10);k=k>=0&&k<=23?k:0;let H=parseInt(V[5],10);H=H>=0&&H<=59?H:0;let U=parseInt(V[6],10);U=U>=0&&U<=59?U:0;const x=V[7]||"Z";let R=parseInt(V[8],10);R=R>=0&&R<=23?R:0;let F=parseInt(V[9],10)||0;return F=F>=0&&F<=59?F:0,x==="-"?(k+=R,H+=F):x==="+"&&(k-=R,H-=F),new Date(Date.UTC(j,M,S,k,H,U))}}t.PDFDateString=X;function q(J,{scale:I=1,rotation:V=0}){const{width:j,height:M}=J.attributes.style,S=[0,0,parseInt(j),parseInt(M)];return new b({viewBox:S,scale:I,rotation:V})}function Q(J){if(J.startsWith("#")){const I=parseInt(J.slice(1),16);return[(I&16711680)>>16,(I&65280)>>8,I&255]}return J.startsWith("rgb(")?J.slice(4,-1).split(",").map(I=>parseInt(I)):J.startsWith("rgba(")?J.slice(5,-1).split(",").map(I=>parseInt(I)).slice(0,3):((0,a.warn)(`Not a valid color format: "${J}"`),[0,0,0])}function K(J){const I=document.createElement("span");I.style.visibility="hidden",document.body.append(I);for(const V of J.keys()){I.style.color=V;const j=window.getComputedStyle(I).color;J.set(V,Q(j))}I.remove()}function tt(J){const{a:I,b:V,c:j,d:M,e:S,f:k}=J.getTransform();return[I,V,j,M,S,k]}function gt(J){const{a:I,b:V,c:j,d:M,e:S,f:k}=J.getTransform().invertSelf();return[I,V,j,M,S,k]}function ct(J,I,V=!1,j=!0){if(I instanceof b){const{pageWidth:M,pageHeight:S}=I.rawDims,{style:k}=J,H=`calc(var(--scale-factor) * ${M}px)`,U=`calc(var(--scale-factor) * ${S}px)`;!V||I.rotation%180===0?(k.width=H,k.height=U):(k.width=U,k.height=H)}j&&J.setAttribute("data-main-rotation",I.rotation)}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=n(1);class a{constructor(){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,f){if(d<=0||f<=0)throw new Error("Invalid canvas size");const m=this._createCanvas(d,f);return{canvas:m,context:m.getContext("2d")}}reset(d,f,m){if(!d.canvas)throw new Error("Canvas is not specified");if(f<=0||m<=0)throw new Error("Invalid canvas size");d.canvas.width=f,d.canvas.height=m}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,f){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class o{constructor({baseUrl:d=null,isCompressed:f=!0}){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=f}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const f=this.baseUrl+d+(this.isCompressed?".bcmap":""),m=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(f,m).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${f}`)})}_fetchData(d,f){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class l{constructor({baseUrl:d=null}){this.constructor===l&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const f=`${this.baseUrl}${d}`;return this._fetchData(f).catch(m=>{throw new Error(`Unable to load font data at: ${f}`)})}_fetchData(d){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=l;class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,f,m=!1){if(d<=0||f<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),m||(y.setAttribute("width",`${d}px`),y.setAttribute("height",`${f}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${d} ${f}`),y}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=h}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=n(1);const a=3285377520,o=4294901760,l=65535;class h{constructor(d){this.h1=d?d&4294967295:a,this.h2=d?d&4294967295:a}update(d){let f,m;if(typeof d=="string"){f=new Uint8Array(d.length*2),m=0;for(let L=0,X=d.length;L<X;L++){const q=d.charCodeAt(L);q<=255?f[m++]=q:(f[m++]=q>>>8,f[m++]=q&255)}}else if((0,i.isArrayBuffer)(d))f=d.slice(),m=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const y=m>>2,b=m-y*4,A=new Uint32Array(f.buffer,0,y);let _=0,T=0,w=this.h1,N=this.h2;const O=3432918353,P=461845907,E=O&l,C=P&l;for(let L=0;L<y;L++)L&1?(_=A[L],_=_*O&o|_*E&l,_=_<<15|_>>>17,_=_*P&o|_*C&l,w^=_,w=w<<13|w>>>19,w=w*5+3864292196):(T=A[L],T=T*O&o|T*E&l,T=T<<15|T>>>17,T=T*P&o|T*C&l,N^=T,N=N<<13|N>>>19,N=N*5+3864292196);switch(_=0,b){case 3:_^=f[y*4+2]<<16;case 2:_^=f[y*4+1]<<8;case 1:_^=f[y*4],_=_*O&o|_*E&l,_=_<<15|_>>>17,_=_*P&o|_*C&l,y&1?w^=_:N^=_}this.h1=w,this.h2=N}hexdigest(){let d=this.h1,f=this.h2;return d^=f>>>1,d=d*3981806797&o|d*36045&l,f=f*4283543511&o|((f<<16|d>>>16)*2950163797&o)>>>16,d^=f>>>1,d=d*444984403&o|d*60499&l,f=f*3301882366&o|((f<<16|d>>>16)*3120437893&o)>>>16,d^=f>>>1,(d>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=h}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=n(1),a=n(10);class o{constructor({onUnsupportedFeature:p,ownerDocument:d=globalThis.document,styleElement:f=null}){this._onUnsupportedFeature=p,this._document=d,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(p){this.nativeFontFaces.push(p),this._document.fonts.add(p)}insertRule(p){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const d=this.styleElement.sheet;d.insertRule(p,d.cssRules.length)}clear(){for(const p of this.nativeFontFaces)this._document.fonts.delete(p);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(p){if(p.attached||p.missingFile)return;if(p.attached=!0,this.isFontLoadingAPISupported){const f=p.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(m){throw this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${f.family}': '${m}'.`),p.disableFontFace=!0,m}}return}const d=p.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const m=this._queueLoadingCallback(f);this._prepareFontLoadEvent(p,m)})}}get isFontLoadingAPISupported(){const p=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",p)}get isSyncFontLoadingSupported(){let p=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(p=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",p)}_queueLoadingCallback(p){function d(){for((0,i.assert)(!m.done,"completeRequest() cannot be called twice."),m.done=!0;f.length>0&&f[0].done;){const y=f.shift();setTimeout(y.callback,0)}}const{loadingRequests:f}=this,m={done:!1,complete:d,callback:p};return f.push(m),m}get _loadTestFont(){const p=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",p)}_prepareFontLoadEvent(p,d){function f(K,tt){return K.charCodeAt(tt)<<24|K.charCodeAt(tt+1)<<16|K.charCodeAt(tt+2)<<8|K.charCodeAt(tt+3)&255}function m(K,tt,gt,ct){const J=K.substring(0,tt),I=K.substring(tt+gt);return J+ct+I}let y,b;const A=this._document.createElement("canvas");A.width=1,A.height=1;const _=A.getContext("2d");let T=0;function w(K,tt){if(++T>30){(0,i.warn)("Load test font never loaded."),tt();return}if(_.font="30px "+K,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){tt();return}setTimeout(w.bind(null,K,tt))}const N=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=m(O,976,N.length,N);const E=16,C=1482184792;let L=f(O,E);for(y=0,b=N.length-3;y<b;y+=4)L=L-C+f(N,y)|0;y<N.length&&(L=L-C+f(N+"XXX",y)|0),O=m(O,E,4,(0,i.string32)(L));const X=`url(data:font/opentype;base64,${btoa(O)});`,q=`@font-face {font-family:"${N}";src:${X}}`;this.insertRule(q);const Q=this._document.createElement("div");Q.style.visibility="hidden",Q.style.width=Q.style.height="10px",Q.style.position="absolute",Q.style.top=Q.style.left="0px";for(const K of[p.loadedName,N]){const tt=this._document.createElement("span");tt.textContent="Hi",tt.style.fontFamily=K,Q.append(tt)}this._document.body.append(Q),w(N,()=>{Q.remove(),d.complete()})}}t.FontLoader=o;class l{constructor(p,{isEvalSupported:d=!0,disableFontFace:f=!1,ignoreErrors:m=!1,onUnsupportedFeature:y,fontRegistry:b=null}){this.compiledGlyphs=Object.create(null);for(const A in p)this[A]=p[A];this.isEvalSupported=d!==!1,this.disableFontFace=f===!0,this.ignoreErrors=m===!0,this._onUnsupportedFeature=y,this.fontRegistry=b}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let p;if(!this.cssFontInfo)p=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),p=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this.fontRegistry?.registerFont(this),p}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const p=(0,i.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(p)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let m=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(m+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${m}src:${d}}`}return this.fontRegistry?.registerFont(this,d),f}getPathGenerator(p,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let f;try{f=p.get(this.loadedName+"_path_"+d)}catch(m){if(!this.ignoreErrors)throw m;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${m}".`),this.compiledGlyphs[d]=function(y,b){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const m=[];for(const y of f){const b=y.args!==void 0?y.args.join(","):"";m.push("c.",y.cmd,"(",b,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",m.join(""))}return this.compiledGlyphs[d]=function(m,y){for(const b of f)b.cmd==="scale"&&(b.args=[y,-y]),m[b.cmd].apply(m,b.args)}}}t.FontFaceObject=l}),((u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=n}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=n(1),a=n(6),o=n(12),l=n(13);const h=16,p=100,d=4096,f=15,m=10,y=1e3,b=16;function A(j,M){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){M.save(),this.__originalSave()},j.restore=function(){M.restore(),this.__originalRestore()},j.translate=function(k,H){M.translate(k,H),this.__originalTranslate(k,H)},j.scale=function(k,H){M.scale(k,H),this.__originalScale(k,H)},j.transform=function(k,H,U,x,R,F){M.transform(k,H,U,x,R,F),this.__originalTransform(k,H,U,x,R,F)},j.setTransform=function(k,H,U,x,R,F){M.setTransform(k,H,U,x,R,F),this.__originalSetTransform(k,H,U,x,R,F)},j.resetTransform=function(){M.resetTransform(),this.__originalResetTransform()},j.rotate=function(k){M.rotate(k),this.__originalRotate(k)},j.clip=function(k){M.clip(k),this.__originalClip(k)},j.moveTo=function(S,k){M.moveTo(S,k),this.__originalMoveTo(S,k)},j.lineTo=function(S,k){M.lineTo(S,k),this.__originalLineTo(S,k)},j.bezierCurveTo=function(S,k,H,U,x,R){M.bezierCurveTo(S,k,H,U,x,R),this.__originalBezierCurveTo(S,k,H,U,x,R)},j.rect=function(S,k,H,U){M.rect(S,k,H,U),this.__originalRect(S,k,H,U)},j.closePath=function(){M.closePath(),this.__originalClosePath()},j.beginPath=function(){M.beginPath(),this.__originalBeginPath()}}class _{constructor(M){this.canvasFactory=M,this.cache=Object.create(null)}getCanvas(M,S,k){let H;return this.cache[M]!==void 0?(H=this.cache[M],this.canvasFactory.reset(H,S,k)):(H=this.canvasFactory.create(S,k),this.cache[M]=H),H}delete(M){delete this.cache[M]}clear(){for(const M in this.cache){const S=this.cache[M];this.canvasFactory.destroy(S),delete this.cache[M]}}}function T(j,M,S,k,H,U,x,R,F,G){const[z,Y,$,at,st,ot]=(0,a.getCurrentTransform)(j);if(Y===0&&$===0){const vt=x*z+st,At=Math.round(vt),St=R*at+ot,Tt=Math.round(St),_t=(x+F)*z+st,It=Math.abs(Math.round(_t)-At)||1,zt=(R+G)*at+ot,Pt=Math.abs(Math.round(zt)-Tt)||1;return j.setTransform(Math.sign(z),0,0,Math.sign(at),At,Tt),j.drawImage(M,S,k,H,U,0,0,It,Pt),j.setTransform(z,Y,$,at,st,ot),[It,Pt]}if(z===0&&at===0){const vt=R*$+st,At=Math.round(vt),St=x*Y+ot,Tt=Math.round(St),_t=(R+G)*$+st,It=Math.abs(Math.round(_t)-At)||1,zt=(x+F)*Y+ot,Pt=Math.abs(Math.round(zt)-Tt)||1;return j.setTransform(0,Math.sign(Y),Math.sign($),0,At,Tt),j.drawImage(M,S,k,H,U,0,0,Pt,It),j.setTransform(z,Y,$,at,st,ot),[Pt,It]}j.drawImage(M,S,k,H,U,x,R,F,G);const bt=Math.hypot(z,Y),dt=Math.hypot($,at);return[bt*F,dt*G]}function w(j){const{width:M,height:S}=j;if(M>y||S>y)return null;const k=1e3,H=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),U=M+1;let x=new Uint8Array(U*(S+1)),R,F,G;const z=M+7&-8;let Y=new Uint8Array(z*S),$=0;for(const dt of j.data){let vt=128;for(;vt>0;)Y[$++]=dt&vt?0:255,vt>>=1}let at=0;for($=0,Y[$]!==0&&(x[0]=1,++at),F=1;F<M;F++)Y[$]!==Y[$+1]&&(x[F]=Y[$]?2:1,++at),$++;for(Y[$]!==0&&(x[F]=2,++at),R=1;R<S;R++){$=R*z,G=R*U,Y[$-z]!==Y[$]&&(x[G]=Y[$]?1:8,++at);let dt=(Y[$]?4:0)+(Y[$-z]?8:0);for(F=1;F<M;F++)dt=(dt>>2)+(Y[$+1]?4:0)+(Y[$-z+1]?8:0),H[dt]&&(x[G+F]=H[dt],++at),$++;if(Y[$-z]!==Y[$]&&(x[G+F]=Y[$]?2:4,++at),at>k)return null}for($=z*(S-1),G=R*U,Y[$]!==0&&(x[G]=8,++at),F=1;F<M;F++)Y[$]!==Y[$+1]&&(x[G+F]=Y[$]?4:8,++at),$++;if(Y[$]!==0&&(x[G+F]=4,++at),at>k)return null;const st=new Int32Array([0,U,-1,0,-U,0,0,0,1]),ot=new Path2D;for(R=0;at&&R<=S;R++){let dt=R*U;const vt=dt+M;for(;dt<vt&&!x[dt];)dt++;if(dt===vt)continue;ot.moveTo(dt%U,R);const At=dt;let St=x[dt];do{const Tt=st[St];do dt+=Tt;while(!x[dt]);const _t=x[dt];_t!==5&&_t!==10?(St=_t,x[dt]=0):(St=_t&51*St>>4,x[dt]&=St>>2|St<<2),ot.lineTo(dt%U,dt/U|0),x[dt]||--at}while(At!==dt);--R}return Y=null,x=null,function(dt){dt.save(),dt.scale(1/M,-1/S),dt.translate(0,-S),dt.fill(ot),dt.beginPath(),dt.restore()}}class N{constructor(M,S){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,M,S])}clone(){const M=Object.create(this);return M.clipBox=this.clipBox.slice(),M}setCurrentPoint(M,S){this.x=M,this.y=S}updatePathMinMax(M,S,k){[S,k]=i.Util.applyTransform([S,k],M),this.minX=Math.min(this.minX,S),this.minY=Math.min(this.minY,k),this.maxX=Math.max(this.maxX,S),this.maxY=Math.max(this.maxY,k)}updateRectMinMax(M,S){const k=i.Util.applyTransform(S,M),H=i.Util.applyTransform(S.slice(2),M);this.minX=Math.min(this.minX,k[0],H[0]),this.minY=Math.min(this.minY,k[1],H[1]),this.maxX=Math.max(this.maxX,k[0],H[0]),this.maxY=Math.max(this.maxY,k[1],H[1])}updateScalingPathMinMax(M,S){i.Util.scaleMinMax(M,S),this.minX=Math.min(this.minX,S[0]),this.maxX=Math.max(this.maxX,S[1]),this.minY=Math.min(this.minY,S[2]),this.maxY=Math.max(this.maxY,S[3])}updateCurvePathMinMax(M,S,k,H,U,x,R,F,G,z){const Y=i.Util.bezierBoundingBox(S,k,H,U,x,R,F,G);if(z){z[0]=Math.min(z[0],Y[0],Y[2]),z[1]=Math.max(z[1],Y[0],Y[2]),z[2]=Math.min(z[2],Y[1],Y[3]),z[3]=Math.max(z[3],Y[1],Y[3]);return}this.updateRectMinMax(M,Y)}getPathBoundingBox(M=o.PathType.FILL,S=null){const k=[this.minX,this.minY,this.maxX,this.maxY];if(M===o.PathType.STROKE){S||(0,i.unreachable)("Stroke bounding box must include transform.");const H=i.Util.singularValueDecompose2dScale(S),U=H[0]*this.lineWidth/2,x=H[1]*this.lineWidth/2;k[0]-=U,k[1]-=x,k[2]+=U,k[3]+=x}return k}updateClipFromPath(){const M=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(M||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(M){this.clipBox=M,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(M=o.PathType.FILL,S=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(M,S))}}function O(j,M,S=null){if(typeof ImageData<"u"&&M instanceof ImageData){j.putImageData(M,0,0);return}const k=M.height,H=M.width,U=k%b,x=(k-U)/b,R=U===0?x:x+1,F=j.createImageData(H,b);let G=0,z;const Y=M.data,$=F.data;let at,st,ot,bt,dt,vt,At,St;if(S)switch(S.length){case 1:dt=S[0],vt=S[0],At=S[0],St=S[0];break;case 4:dt=S[0],vt=S[1],At=S[2],St=S[3];break}if(M.kind===i.ImageKind.GRAYSCALE_1BPP){const Tt=Y.byteLength,_t=new Uint32Array($.buffer,0,$.byteLength>>2),It=_t.length,zt=H+7>>3;let Pt=4294967295,te=i.FeatureTest.isLittleEndian?4278190080:255;for(St&&St[0]===255&&St[255]===0&&([Pt,te]=[te,Pt]),at=0;at<R;at++){for(ot=at<x?b:U,z=0,st=0;st<ot;st++){const we=Tt-G;let ge=0;const Gt=we>zt?H:we*8-7,xe=Gt&-8;let jt=0,ie=0;for(;ge<xe;ge+=8)ie=Y[G++],_t[z++]=ie&128?Pt:te,_t[z++]=ie&64?Pt:te,_t[z++]=ie&32?Pt:te,_t[z++]=ie&16?Pt:te,_t[z++]=ie&8?Pt:te,_t[z++]=ie&4?Pt:te,_t[z++]=ie&2?Pt:te,_t[z++]=ie&1?Pt:te;for(;ge<Gt;ge++)jt===0&&(ie=Y[G++],jt=128),_t[z++]=ie&jt?Pt:te,jt>>=1}for(;z<It;)_t[z++]=0;j.putImageData(F,0,at*b)}}else if(M.kind===i.ImageKind.RGBA_32BPP){const Tt=!!(dt||vt||At);for(st=0,bt=H*b*4,at=0;at<x;at++){if($.set(Y.subarray(G,G+bt)),G+=bt,Tt)for(let _t=0;_t<bt;_t+=4)dt&&($[_t+0]=dt[$[_t+0]]),vt&&($[_t+1]=vt[$[_t+1]]),At&&($[_t+2]=At[$[_t+2]]);j.putImageData(F,0,st),st+=b}if(at<R){if(bt=H*U*4,$.set(Y.subarray(G,G+bt)),Tt)for(let _t=0;_t<bt;_t+=4)dt&&($[_t+0]=dt[$[_t+0]]),vt&&($[_t+1]=vt[$[_t+1]]),At&&($[_t+2]=At[$[_t+2]]);j.putImageData(F,0,st)}}else if(M.kind===i.ImageKind.RGB_24BPP){const Tt=!!(dt||vt||At);for(ot=b,bt=H*ot,at=0;at<R;at++){for(at>=x&&(ot=U,bt=H*ot),z=0,st=bt;st--;)$[z++]=Y[G++],$[z++]=Y[G++],$[z++]=Y[G++],$[z++]=255;if(Tt)for(let _t=0;_t<z;_t+=4)dt&&($[_t+0]=dt[$[_t+0]]),vt&&($[_t+1]=vt[$[_t+1]]),At&&($[_t+2]=At[$[_t+2]]);j.putImageData(F,0,at*b)}}else throw new Error(`bad image kind: ${M.kind}`)}function P(j,M){if(M.bitmap){j.drawImage(M.bitmap,0,0);return}const S=M.height,k=M.width,H=S%b,U=(S-H)/b,x=H===0?U:U+1,R=j.createImageData(k,b);let F=0;const G=M.data,z=R.data;for(let Y=0;Y<x;Y++){const $=Y<U?b:H;({srcPos:F}=(0,l.applyMaskImageData)({src:G,srcPos:F,dest:z,width:k,height:$})),j.putImageData(R,0,Y*b)}}function E(j,M){const S=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const k of S)j[k]!==void 0&&(M[k]=j[k]);j.setLineDash!==void 0&&(M.setLineDash(j.getLineDash()),M.lineDashOffset=j.lineDashOffset)}function C(j,M){j.strokeStyle=j.fillStyle=M||"#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0)}function L(j,M,S,k){const H=j.length;for(let U=3;U<H;U+=4){const x=j[U];if(x===0)j[U-3]=M,j[U-2]=S,j[U-1]=k;else if(x<255){const R=255-x;j[U-3]=j[U-3]*x+M*R>>8,j[U-2]=j[U-2]*x+S*R>>8,j[U-1]=j[U-1]*x+k*R>>8}}}function X(j,M,S){const k=j.length,H=1/255;for(let U=3;U<k;U+=4){const x=S?S[j[U]]:j[U];M[U]=M[U]*x*H|0}}function q(j,M,S){const k=j.length;for(let H=3;H<k;H+=4){const U=j[H-3]*77+j[H-2]*152+j[H-1]*28;M[H]=S?M[H]*S[U>>8]>>8:M[H]*U>>16}}function Q(j,M,S,k,H,U,x,R,F,G,z){const Y=!!U,$=Y?U[0]:0,at=Y?U[1]:0,st=Y?U[2]:0;let ot;H==="Luminosity"?ot=q:ot=X;const dt=Math.min(k,Math.ceil(1048576/S));for(let vt=0;vt<k;vt+=dt){const At=Math.min(dt,k-vt),St=j.getImageData(R-G,vt+(F-z),S,At),Tt=M.getImageData(R,vt+F,S,At);Y&&L(St.data,$,at,st),ot(St.data,Tt.data,x),M.putImageData(Tt,R,vt+F)}}function K(j,M,S,k){const H=k[0],U=k[1],x=k[2]-H,R=k[3]-U;x===0||R===0||(Q(M.context,S,x,R,M.subtype,M.backdrop,M.transferMap,H,U,M.offsetX,M.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(S.canvas,0,0),j.restore())}function tt(j,M){const S=i.Util.singularValueDecompose2dScale(j);S[0]=Math.fround(S[0]),S[1]=Math.fround(S[1]);const k=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return M!==void 0?M:S[0]<=k||S[1]<=k}const gt=["butt","round","square"],ct=["miter","round","bevel"],J={},I={};class V{constructor(M,S,k,H,{optionalContentConfig:U,markedContentStack:x=null},R,F){this.ctx=M,this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=S,this.objs=k,this.canvasFactory=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=x||[],this.optionalContentConfig=U,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=R,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=F?.background||null,this.foregroundColor=F?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(M,S=null){return typeof M=="string"?M.startsWith("g_")?this.commonObjs.get(M):this.objs.get(M):S}beginDrawing({transform:M,viewport:S,transparency:k=!1,background:H=null}){const U=this.ctx.canvas.width,x=this.ctx.canvas.height,R=H||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const F=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const G=this.backgroundColor=this.ctx.fillStyle;let z=!0,Y=R;if(this.ctx.fillStyle=R,Y=this.ctx.fillStyle,z=typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y),F==="#000000"&&G==="#ffffff"||F===G||!z)this.foregroundColor=this.backgroundColor=null;else{const[$,at,st]=(0,a.getRGB)(Y),ot=dt=>(dt/=255,dt<=.03928?dt/12.92:((dt+.055)/1.055)**2.4),bt=Math.round(.2126*ot($)+.7152*ot(at)+.0722*ot(st));this.selectColor=(dt,vt,At)=>{const St=.2126*ot(dt)+.7152*ot(vt)+.0722*ot(At);return Math.round(St)===bt?G:F}}}if(this.ctx.fillStyle=this.backgroundColor||R,this.ctx.fillRect(0,0,U,x),this.ctx.restore(),k){const F=this.cachedCanvases.getCanvas("transparent",U,x);this.compositeCtx=this.ctx,this.transparentCanvas=F.canvas,this.ctx=F.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx,this.foregroundColor),M&&(this.ctx.transform(...M),this.outputScaleX=M[0],this.outputScaleY=M[0]),this.ctx.transform(...S.transform),this.viewportScale=S.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(M,S,k,H){const U=M.argsArray,x=M.fnArray;let R=S||0;const F=U.length;if(F===R)return R;const G=F-R>m&&typeof k=="function",z=G?Date.now()+f:0;let Y=0;const $=this.commonObjs,at=this.objs;let st;for(;;){if(H!==void 0&&R===H.nextBreakPoint)return H.breakIt(R,k),R;if(st=x[R],st!==i.OPS.dependency)this[st].apply(this,U[R]);else for(const ot of U[R]){const bt=ot.startsWith("g_")?$:at;if(!bt.has(ot))return bt.get(ot,k),R}if(R++,R===F)return R;if(G&&++Y>m){if(Date.now()>z)return k(),R;Y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const M of this._cachedBitmapsMap.values()){for(const S of M.values())typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement&&(S.width=S.height=0);M.clear()}this._cachedBitmapsMap.clear()}_scaleImage(M,S){const k=M.width,H=M.height;let U=Math.max(Math.hypot(S[0],S[1]),1),x=Math.max(Math.hypot(S[2],S[3]),1),R=k,F=H,G="prescale1",z,Y;for(;U>2&&R>1||x>2&&F>1;){let $=R,at=F;U>2&&R>1&&($=Math.ceil(R/2),U/=R/$),x>2&&F>1&&(at=Math.ceil(F/2),x/=F/at),z=this.cachedCanvases.getCanvas(G,$,at),Y=z.context,Y.clearRect(0,0,$,at),Y.drawImage(M,0,0,R,F,0,0,$,at),M=z.canvas,R=$,F=at,G=G==="prescale1"?"prescale2":"prescale1"}return{img:M,paintWidth:R,paintHeight:F}}_createMaskCanvas(M){const S=this.ctx,{width:k,height:H}=M,U=this.current.fillColor,x=this.current.patternFill,R=(0,a.getCurrentTransform)(S);let F,G,z,Y;if((M.bitmap||M.data)&&M.count>1){const It=M.bitmap||M.data.buffer;G=JSON.stringify(x?R:[R.slice(0,4),U]),F=this._cachedBitmapsMap.get(It),F||(F=new Map,this._cachedBitmapsMap.set(It,F));const zt=F.get(G);if(zt&&!x){const Pt=Math.round(Math.min(R[0],R[2])+R[4]),te=Math.round(Math.min(R[1],R[3])+R[5]);return{canvas:zt,offsetX:Pt,offsetY:te}}z=zt}z||(Y=this.cachedCanvases.getCanvas("maskCanvas",k,H),P(Y.context,M));let $=i.Util.transform(R,[1/k,0,0,-1/H,0,0]);$=i.Util.transform($,[1,0,0,1,0,-H]);const at=i.Util.applyTransform([0,0],$),st=i.Util.applyTransform([k,H],$),ot=i.Util.normalizeRect([at[0],at[1],st[0],st[1]]),bt=Math.round(ot[2]-ot[0])||1,dt=Math.round(ot[3]-ot[1])||1,vt=this.cachedCanvases.getCanvas("fillCanvas",bt,dt),At=vt.context,St=Math.min(at[0],st[0]),Tt=Math.min(at[1],st[1]);At.translate(-St,-Tt),At.transform(...$),z||(z=this._scaleImage(Y.canvas,(0,a.getCurrentTransformInverse)(At)),z=z.img,F&&x&&F.set(G,z)),At.imageSmoothingEnabled=tt((0,a.getCurrentTransform)(At),M.interpolate),T(At,z,0,0,z.width,z.height,0,0,k,H),At.globalCompositeOperation="source-in";const _t=i.Util.transform((0,a.getCurrentTransformInverse)(At),[1,0,0,1,-St,-Tt]);return At.fillStyle=x?U.getPattern(S,this,_t,o.PathType.FILL):U,At.fillRect(0,0,k,H),F&&!x&&(this.cachedCanvases.delete("fillCanvas"),F.set(G,vt.canvas)),{canvas:vt.canvas,offsetX:Math.round(St),offsetY:Math.round(Tt)}}setLineWidth(M){M!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=M,this.ctx.lineWidth=M}setLineCap(M){this.ctx.lineCap=gt[M]}setLineJoin(M){this.ctx.lineJoin=ct[M]}setMiterLimit(M){this.ctx.miterLimit=M}setDash(M,S){const k=this.ctx;k.setLineDash!==void 0&&(k.setLineDash(M),k.lineDashOffset=S)}setRenderingIntent(M){}setFlatness(M){}setGState(M){for(const[S,k]of M)switch(S){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k[0],k[1]);break;case"CA":this.current.strokeAlpha=k;break;case"ca":this.current.fillAlpha=k,this.ctx.globalAlpha=k;break;case"BM":this.ctx.globalCompositeOperation=k;break;case"SMask":this.current.activeSMask=k?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=k}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const M=this.inSMaskMode;this.current.activeSMask&&!M?this.beginSMaskMode():!this.current.activeSMask&&M&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const M=this.ctx.canvas.width,S=this.ctx.canvas.height,k="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(k,M,S);this.suspendedCtx=this.ctx,this.ctx=H.context;const U=this.ctx;U.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),E(this.suspendedCtx,U),A(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),E(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(M){if(!this.current.activeSMask)return;M?(M[0]=Math.floor(M[0]),M[1]=Math.floor(M[1]),M[2]=Math.ceil(M[2]),M[3]=Math.ceil(M[3])):M=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const S=this.current.activeSMask,k=this.suspendedCtx;K(k,S,this.ctx,M),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(E(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const M=this.current;this.stateStack.push(M),this.current=M.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),E(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(M,S,k,H,U,x){this.ctx.transform(M,S,k,H,U,x),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(M,S,k){const H=this.ctx,U=this.current;let x=U.x,R=U.y,F,G;const z=(0,a.getCurrentTransform)(H),Y=z[0]===0&&z[3]===0||z[1]===0&&z[2]===0,$=Y?k.slice(0):null;for(let at=0,st=0,ot=M.length;at<ot;at++)switch(M[at]|0){case i.OPS.rectangle:x=S[st++],R=S[st++];const bt=S[st++],dt=S[st++],vt=x+bt,At=R+dt;H.moveTo(x,R),bt===0||dt===0?H.lineTo(vt,At):(H.lineTo(vt,R),H.lineTo(vt,At),H.lineTo(x,At)),Y||U.updateRectMinMax(z,[x,R,vt,At]),H.closePath();break;case i.OPS.moveTo:x=S[st++],R=S[st++],H.moveTo(x,R),Y||U.updatePathMinMax(z,x,R);break;case i.OPS.lineTo:x=S[st++],R=S[st++],H.lineTo(x,R),Y||U.updatePathMinMax(z,x,R);break;case i.OPS.curveTo:F=x,G=R,x=S[st+4],R=S[st+5],H.bezierCurveTo(S[st],S[st+1],S[st+2],S[st+3],x,R),U.updateCurvePathMinMax(z,F,G,S[st],S[st+1],S[st+2],S[st+3],x,R,$),st+=6;break;case i.OPS.curveTo2:F=x,G=R,H.bezierCurveTo(x,R,S[st],S[st+1],S[st+2],S[st+3]),U.updateCurvePathMinMax(z,F,G,x,R,S[st],S[st+1],S[st+2],S[st+3],$),x=S[st+2],R=S[st+3],st+=4;break;case i.OPS.curveTo3:F=x,G=R,x=S[st+2],R=S[st+3],H.bezierCurveTo(S[st],S[st+1],x,R,x,R),U.updateCurvePathMinMax(z,F,G,S[st],S[st+1],x,R,x,R,$),st+=4;break;case i.OPS.closePath:H.closePath();break}Y&&U.updateScalingPathMinMax(z,$),U.setCurrentPoint(x,R)}closePath(){this.ctx.closePath()}stroke(M=!0){const S=this.ctx,k=this.current.strokeColor;S.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof k=="object"&&k?.getPattern?(S.save(),S.strokeStyle=k.getPattern(S,this,(0,a.getCurrentTransformInverse)(S),o.PathType.STROKE),this.rescaleAndStroke(!1),S.restore()):this.rescaleAndStroke(!0)),M&&this.consumePath(this.current.getClippedPathBoundingBox()),S.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(M=!0){const S=this.ctx,k=this.current.fillColor,H=this.current.patternFill;let U=!1;H&&(S.save(),S.fillStyle=k.getPattern(S,this,(0,a.getCurrentTransformInverse)(S),o.PathType.FILL),U=!0);const x=this.current.getClippedPathBoundingBox();this.contentVisible&&x!==null&&(this.pendingEOFill?(S.fill("evenodd"),this.pendingEOFill=!1):S.fill()),U&&S.restore(),M&&this.consumePath(x)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=J}eoClip(){this.pendingClip=I}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const M=this.pendingTextPaths,S=this.ctx;if(M===void 0){S.beginPath();return}S.save(),S.beginPath();for(const k of M)S.setTransform(...k.transform),S.translate(k.x,k.y),k.addToPath(S,k.fontSize);S.restore(),S.clip(),S.beginPath(),delete this.pendingTextPaths}setCharSpacing(M){this.current.charSpacing=M}setWordSpacing(M){this.current.wordSpacing=M}setHScale(M){this.current.textHScale=M/100}setLeading(M){this.current.leading=-M}setFont(M,S){const k=this.commonObjs.get(M),H=this.current;if(!k)throw new Error(`Can't find font for ${M}`);if(H.fontMatrix=k.fontMatrix||i.FONT_IDENTITY_MATRIX,(H.fontMatrix[0]===0||H.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+M),S<0?(S=-S,H.fontDirection=-1):H.fontDirection=1,this.current.font=k,this.current.fontSize=S,k.isType3Font)return;const U=k.loadedName||"sans-serif";let x="normal";k.black?x="900":k.bold&&(x="bold");const R=k.italic?"italic":"normal",F=`"${U}", ${k.fallbackName}`;let G=S;S<h?G=h:S>p&&(G=p),this.current.fontSizeScale=S/G,this.ctx.font=`${R} ${x} ${G}px ${F}`}setTextRenderingMode(M){this.current.textRenderingMode=M}setTextRise(M){this.current.textRise=M}moveText(M,S){this.current.x=this.current.lineX+=M,this.current.y=this.current.lineY+=S}setLeadingMoveText(M,S){this.setLeading(-S),this.moveText(M,S)}setTextMatrix(M,S,k,H,U,x){this.current.textMatrix=[M,S,k,H,U,x],this.current.textMatrixScale=Math.hypot(M,S),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(M,S,k,H){const U=this.ctx,x=this.current,R=x.font,F=x.textRenderingMode,G=x.fontSize/x.fontSizeScale,z=F&i.TextRenderingMode.FILL_STROKE_MASK,Y=!!(F&i.TextRenderingMode.ADD_TO_PATH_FLAG),$=x.patternFill&&!R.missingFile;let at;(R.disableFontFace||Y||$)&&(at=R.getPathGenerator(this.commonObjs,M)),R.disableFontFace||$?(U.save(),U.translate(S,k),U.beginPath(),at(U,G),H&&U.setTransform(...H),(z===i.TextRenderingMode.FILL||z===i.TextRenderingMode.FILL_STROKE)&&U.fill(),(z===i.TextRenderingMode.STROKE||z===i.TextRenderingMode.FILL_STROKE)&&U.stroke(),U.restore()):((z===i.TextRenderingMode.FILL||z===i.TextRenderingMode.FILL_STROKE)&&U.fillText(M,S,k),(z===i.TextRenderingMode.STROKE||z===i.TextRenderingMode.FILL_STROKE)&&U.strokeText(M,S,k)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(U),x:S,y:k,fontSize:G,addToPath:at})}get isFontSubpixelAAEnabled(){const{context:M}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);M.scale(1.5,1),M.fillText("I",0,10);const S=M.getImageData(0,0,10,10).data;let k=!1;for(let H=3;H<S.length;H+=4)if(S[H]>0&&S[H]<255){k=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",k)}showText(M){const S=this.current,k=S.font;if(k.isType3Font)return this.showType3Text(M);const H=S.fontSize;if(H===0)return;const U=this.ctx,x=S.fontSizeScale,R=S.charSpacing,F=S.wordSpacing,G=S.fontDirection,z=S.textHScale*G,Y=M.length,$=k.vertical,at=$?1:-1,st=k.defaultVMetrics,ot=H*S.fontMatrix[0],bt=S.textRenderingMode===i.TextRenderingMode.FILL&&!k.disableFontFace&&!S.patternFill;U.save(),U.transform(...S.textMatrix),U.translate(S.x,S.y+S.textRise),G>0?U.scale(z,-1):U.scale(z,1);let dt;if(S.patternFill){U.save();const _t=S.fillColor.getPattern(U,this,(0,a.getCurrentTransformInverse)(U),o.PathType.FILL);dt=(0,a.getCurrentTransform)(U),U.restore(),U.fillStyle=_t}let vt=S.lineWidth;const At=S.textMatrixScale;if(At===0||vt===0){const _t=S.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(_t===i.TextRenderingMode.STROKE||_t===i.TextRenderingMode.FILL_STROKE)&&(vt=this.getSinglePixelWidth())}else vt/=At;if(x!==1&&(U.scale(x,x),vt/=x),U.lineWidth=vt,k.isInvalidPDFjsFont){const _t=[];let It=0;for(const zt of M)_t.push(zt.unicode),It+=zt.width;U.fillText(_t.join(""),0,0),S.x+=It*ot*z,U.restore(),this.compose();return}let St=0,Tt;for(Tt=0;Tt<Y;++Tt){const _t=M[Tt];if(typeof _t=="number"){St+=at*_t*H/1e3;continue}let It=!1;const zt=(_t.isSpace?F:0)+R,Pt=_t.fontChar,te=_t.accent;let we,ge,Gt=_t.width;if($){const jt=_t.vmetric||st,ie=-(_t.vmetric?jt[1]:Gt*.5)*ot,yt=jt[2]*ot;Gt=jt?-jt[0]:Gt,we=ie/x,ge=(St+yt)/x}else we=St/x,ge=0;if(k.remeasure&&Gt>0){const jt=U.measureText(Pt).width*1e3/H*x;if(Gt<jt&&this.isFontSubpixelAAEnabled){const ie=Gt/jt;It=!0,U.save(),U.scale(ie,1),we/=ie}else Gt!==jt&&(we+=(Gt-jt)/2e3*H/x)}if(this.contentVisible&&(_t.isInFont||k.missingFile)){if(bt&&!te)U.fillText(Pt,we,ge);else if(this.paintChar(Pt,we,ge,dt),te){const jt=we+H*te.offset.x/x,ie=ge-H*te.offset.y/x;this.paintChar(te.fontChar,jt,ie,dt)}}let xe;$?xe=Gt*ot-zt*G:xe=Gt*ot+zt*G,St+=xe,It&&U.restore()}$?S.y-=St:S.x+=St*z,U.restore(),this.compose()}showType3Text(M){const S=this.ctx,k=this.current,H=k.font,U=k.fontSize,x=k.fontDirection,R=H.vertical?1:-1,F=k.charSpacing,G=k.wordSpacing,z=k.textHScale*x,Y=k.fontMatrix||i.FONT_IDENTITY_MATRIX,$=M.length,at=k.textRenderingMode===i.TextRenderingMode.INVISIBLE;let st,ot,bt,dt;if(!(at||U===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,S.save(),S.transform(...k.textMatrix),S.translate(k.x,k.y),S.scale(z,x),st=0;st<$;++st){if(ot=M[st],typeof ot=="number"){dt=R*ot*U/1e3,this.ctx.translate(dt,0),k.x+=dt*z;continue}const vt=(ot.isSpace?G:0)+F,At=H.charProcOperatorList[ot.operatorListId];if(!At){(0,i.warn)(`Type3 character "${ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ot,this.save(),S.scale(U,U),S.transform(...Y),this.executeOperatorList(At),this.restore()),bt=i.Util.applyTransform([ot.width,0],Y)[0]*U+vt,S.translate(bt,0),k.x+=bt*z}S.restore(),this.processingType3=null}}setCharWidth(M,S){}setCharWidthAndBounds(M,S,k,H,U,x){this.ctx.rect(k,H,U-k,x-H),this.ctx.clip(),this.endPath()}getColorN_Pattern(M){let S;if(M[0]==="TilingPattern"){const k=M[1],H=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),U={createCanvasGraphics:x=>new V(x,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};S=new o.TilingPattern(M,k,this.ctx,U,H)}else S=this._getPattern(M[1],M[2]);return S}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(M,S,k){const H=this.selectColor?.(M,S,k)||i.Util.makeHexColor(M,S,k);this.ctx.strokeStyle=H,this.current.strokeColor=H}setFillRGBColor(M,S,k){const H=this.selectColor?.(M,S,k)||i.Util.makeHexColor(M,S,k);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}_getPattern(M,S=null){let k;return this.cachedPatterns.has(M)?k=this.cachedPatterns.get(M):(k=(0,o.getShadingPattern)(this.objs.get(M)),this.cachedPatterns.set(M,k)),S&&(k.matrix=S),k}shadingFill(M){if(!this.contentVisible)return;const S=this.ctx;this.save();const k=this._getPattern(M);S.fillStyle=k.getPattern(S,this,(0,a.getCurrentTransformInverse)(S),o.PathType.SHADING);const H=(0,a.getCurrentTransformInverse)(S);if(H){const U=S.canvas,x=U.width,R=U.height,F=i.Util.applyTransform([0,0],H),G=i.Util.applyTransform([0,R],H),z=i.Util.applyTransform([x,0],H),Y=i.Util.applyTransform([x,R],H),$=Math.min(F[0],G[0],z[0],Y[0]),at=Math.min(F[1],G[1],z[1],Y[1]),st=Math.max(F[0],G[0],z[0],Y[0]),ot=Math.max(F[1],G[1],z[1],Y[1]);this.ctx.fillRect($,at,st-$,ot-at)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(M,S){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(M)&&M.length===6&&this.transform(...M),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),S)){const k=S[2]-S[0],H=S[3]-S[1];this.ctx.rect(S[0],S[1],k,H),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),S),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(M){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const S=this.ctx;M.isolated||(0,i.info)("TODO: Support non-isolated groups."),M.knockout&&(0,i.warn)("Knockout groups not supported.");const k=(0,a.getCurrentTransform)(S);if(M.matrix&&S.transform(...M.matrix),!M.bbox)throw new Error("Bounding box is required.");let H=i.Util.getAxialAlignedBoundingBox(M.bbox,(0,a.getCurrentTransform)(S));const U=[0,0,S.canvas.width,S.canvas.height];H=i.Util.intersect(H,U)||[0,0,0,0];const x=Math.floor(H[0]),R=Math.floor(H[1]);let F=Math.max(Math.ceil(H[2])-x,1),G=Math.max(Math.ceil(H[3])-R,1),z=1,Y=1;F>d&&(z=F/d,F=d),G>d&&(Y=G/d,G=d),this.current.startNewPathAndClipBox([0,0,F,G]);let $="groupAt"+this.groupLevel;M.smask&&($+="_smask_"+this.smaskCounter++%2);const at=this.cachedCanvases.getCanvas($,F,G),st=at.context;st.scale(1/z,1/Y),st.translate(-x,-R),st.transform(...k),M.smask?this.smaskStack.push({canvas:at.canvas,context:st,offsetX:x,offsetY:R,scaleX:z,scaleY:Y,subtype:M.smask.subtype,backdrop:M.smask.backdrop,transferMap:M.smask.transferMap||null,startTransformInverse:null}):(S.setTransform(1,0,0,1,0,0),S.translate(x,R),S.scale(z,Y),S.save()),E(S,st),this.ctx=st,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(S),this.groupLevel++}endGroup(M){if(!this.contentVisible)return;this.groupLevel--;const S=this.ctx,k=this.groupStack.pop();if(this.ctx=k,this.ctx.imageSmoothingEnabled=!1,M.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const H=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...H);const U=i.Util.getAxialAlignedBoundingBox([0,0,S.canvas.width,S.canvas.height],H);this.ctx.drawImage(S.canvas,0,0),this.ctx.restore(),this.compose(U)}}beginAnnotation(M,S,k,H,U){if(this.#t(),C(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(S)&&S.length===4){const x=S[2]-S[0],R=S[3]-S[1];if(U&&this.annotationCanvasMap){k=k.slice(),k[4]-=S[0],k[5]-=S[1],S=S.slice(),S[0]=S[1]=0,S[2]=x,S[3]=R;const[F,G]=i.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:z}=this,Y=Math.ceil(x*this.outputScaleX*z),$=Math.ceil(R*this.outputScaleY*z);this.annotationCanvas=this.canvasFactory.create(Y,$);const{canvas:at,context:st}=this.annotationCanvas;this.annotationCanvasMap.set(M,at),this.annotationCanvas.savedCtx=this.ctx,this.ctx=st,this.ctx.setTransform(F,0,0,-G,0,R*G),C(this.ctx,this.foregroundColor)}else C(this.ctx,this.foregroundColor),this.ctx.rect(S[0],S[1],x,R),this.ctx.clip(),this.endPath()}this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...k),this.transform(...H)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(M){if(!this.contentVisible)return;const S=M.count;M=this.getObject(M.data,M),M.count=S;const k=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=w(M)),H.compiled)){H.compiled(k);return}const U=this._createMaskCanvas(M),x=U.canvas;k.save(),k.setTransform(1,0,0,1,0,0),k.drawImage(x,U.offsetX,U.offsetY),k.restore(),this.compose()}paintImageMaskXObjectRepeat(M,S,k=0,H=0,U,x){if(!this.contentVisible)return;M=this.getObject(M.data,M);const R=this.ctx;R.save();const F=(0,a.getCurrentTransform)(R);R.transform(S,k,H,U,0,0);const G=this._createMaskCanvas(M);R.setTransform(1,0,0,1,G.offsetX-F[4],G.offsetY-F[5]);for(let z=0,Y=x.length;z<Y;z+=2){const $=i.Util.transform(F,[S,k,H,U,x[z],x[z+1]]),[at,st]=i.Util.applyTransform([0,0],$);R.drawImage(G.canvas,at,st)}R.restore(),this.compose()}paintImageMaskXObjectGroup(M){if(!this.contentVisible)return;const S=this.ctx,k=this.current.fillColor,H=this.current.patternFill;for(const U of M){const{data:x,width:R,height:F,transform:G}=U,z=this.cachedCanvases.getCanvas("maskCanvas",R,F),Y=z.context;Y.save();const $=this.getObject(x,U);P(Y,$),Y.globalCompositeOperation="source-in",Y.fillStyle=H?k.getPattern(Y,this,(0,a.getCurrentTransformInverse)(S),o.PathType.FILL):k,Y.fillRect(0,0,R,F),Y.restore(),S.save(),S.transform(...G),S.scale(1,-1),T(S,z.canvas,0,0,R,F,0,-1,1,1),S.restore()}this.compose()}paintImageXObject(M){if(!this.contentVisible)return;const S=this.getObject(M);if(!S){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(S)}paintImageXObjectRepeat(M,S,k,H){if(!this.contentVisible)return;const U=this.getObject(M);if(!U){(0,i.warn)("Dependent image isn't ready yet");return}const x=U.width,R=U.height,F=[];for(let G=0,z=H.length;G<z;G+=2)F.push({transform:[S,0,0,k,H[G],H[G+1]],x:0,y:0,w:x,h:R});this.paintInlineImageXObjectGroup(U,F)}paintInlineImageXObject(M){if(!this.contentVisible)return;const S=M.width,k=M.height,H=this.ctx;this.save(),H.scale(1/S,-1/k);let U;if(typeof HTMLElement=="function"&&M instanceof HTMLElement||!M.data)U=M;else{const R=this.cachedCanvases.getCanvas("inlineImage",S,k),F=R.context;O(F,M,this.current.transferMaps),U=R.canvas}const x=this._scaleImage(U,(0,a.getCurrentTransformInverse)(H));H.imageSmoothingEnabled=tt((0,a.getCurrentTransform)(H),M.interpolate),T(H,x.img,0,0,x.paintWidth,x.paintHeight,0,-k,S,k),this.compose(),this.restore()}paintInlineImageXObjectGroup(M,S){if(!this.contentVisible)return;const k=this.ctx,H=M.width,U=M.height,x=this.cachedCanvases.getCanvas("inlineImage",H,U),R=x.context;O(R,M,this.current.transferMaps);for(const F of S)k.save(),k.transform(...F.transform),k.scale(1,-1),T(k,x.canvas,F.x,F.y,F.w,F.h,0,-1,1,1),k.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(M){}markPointProps(M,S){}beginMarkedContent(M){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(M,S){M==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(S)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(M){const S=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(M);const k=this.ctx;this.pendingClip&&(S||(this.pendingClip===I?k.clip("evenodd"):k.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),k.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const M=(0,a.getCurrentTransform)(this.ctx);if(M[1]===0&&M[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(M[0]),Math.abs(M[3]));else{const S=Math.abs(M[0]*M[3]-M[2]*M[1]),k=Math.hypot(M[0],M[2]),H=Math.hypot(M[1],M[3]);this._cachedGetSinglePixelWidth=Math.max(k,H)/S}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:M}=this.current,S=(0,a.getCurrentTransform)(this.ctx);let k,H;if(S[1]===0&&S[2]===0){const U=Math.abs(S[0]),x=Math.abs(S[3]);if(M===0)k=1/U,H=1/x;else{const R=U*M,F=x*M;k=R<1?1/R:1,H=F<1?1/F:1}}else{const U=Math.abs(S[0]*S[3]-S[2]*S[1]),x=Math.hypot(S[0],S[1]),R=Math.hypot(S[2],S[3]);if(M===0)k=R/U,H=x/U;else{const F=M*U;k=R>F?R/F:1,H=x>F?x/F:1}}this._cachedScaleForStroking=[k,H]}return this._cachedScaleForStroking}rescaleAndStroke(M){const{ctx:S}=this,{lineWidth:k}=this.current,[H,U]=this.getScaleForStroking();if(S.lineWidth=k||1,H===1&&U===1){S.stroke();return}let x,R,F;M&&(x=(0,a.getCurrentTransform)(S),R=S.getLineDash().slice(),F=S.lineDashOffset),S.scale(H,U);const G=Math.max(H,U);S.setLineDash(S.getLineDash().map(z=>z/G)),S.lineDashOffset/=G,S.stroke(),M&&(S.setTransform(...x),S.setLineDash(R),S.lineDashOffset=F)}isContentVisible(){for(let M=this.markedContentStack.length-1;M>=0;M--)if(!this.markedContentStack[M].visible)return!1;return!0}}t.CanvasGraphics=V;for(const j in i.OPS)V.prototype[j]!==void 0&&(V.prototype[i.OPS[j]]=V.prototype[j])}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=b;var i=n(1),a=n(6);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=o;function l(T,w){if(!w)return;const N=w[2]-w[0],O=w[3]-w[1],P=new Path2D;P.rect(w[0],w[1],N,O),T.clip(P)}class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class p extends h{constructor(w){super(),this._type=w[1],this._bbox=w[2],this._colorStops=w[3],this._p0=w[4],this._p1=w[5],this._r0=w[6],this._r1=w[7],this.matrix=null}_createGradient(w){let N;this._type==="axial"?N=w.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(N=w.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const O of this._colorStops)N.addColorStop(O[0],O[1]);return N}getPattern(w,N,O,P){let E;if(P===o.STROKE||P===o.FILL){const C=N.current.getClippedPathBoundingBox(P,(0,a.getCurrentTransform)(w))||[0,0,0,0],L=Math.ceil(C[2]-C[0])||1,X=Math.ceil(C[3]-C[1])||1,q=N.cachedCanvases.getCanvas("pattern",L,X,!0),Q=q.context;Q.clearRect(0,0,Q.canvas.width,Q.canvas.height),Q.beginPath(),Q.rect(0,0,Q.canvas.width,Q.canvas.height),Q.translate(-C[0],-C[1]),O=i.Util.transform(O,[1,0,0,1,C[0],C[1]]),Q.transform(...N.baseTransform),this.matrix&&Q.transform(...this.matrix),l(Q,this._bbox),Q.fillStyle=this._createGradient(Q),Q.fill(),E=w.createPattern(q.canvas,"no-repeat");const K=new DOMMatrix(O);E.setTransform(K)}else l(w,this._bbox),E=this._createGradient(w);return E}}function d(T,w,N,O,P,E,C,L){const X=w.coords,q=w.colors,Q=T.data,K=T.width*4;let tt;X[N+1]>X[O+1]&&(tt=N,N=O,O=tt,tt=E,E=C,C=tt),X[O+1]>X[P+1]&&(tt=O,O=P,P=tt,tt=C,C=L,L=tt),X[N+1]>X[O+1]&&(tt=N,N=O,O=tt,tt=E,E=C,C=tt);const gt=(X[N]+w.offsetX)*w.scaleX,ct=(X[N+1]+w.offsetY)*w.scaleY,J=(X[O]+w.offsetX)*w.scaleX,I=(X[O+1]+w.offsetY)*w.scaleY,V=(X[P]+w.offsetX)*w.scaleX,j=(X[P+1]+w.offsetY)*w.scaleY;if(ct>=j)return;const M=q[E],S=q[E+1],k=q[E+2],H=q[C],U=q[C+1],x=q[C+2],R=q[L],F=q[L+1],G=q[L+2],z=Math.round(ct),Y=Math.round(j);let $,at,st,ot,bt,dt,vt,At;for(let St=z;St<=Y;St++){if(St<I){let Pt;St<ct?Pt=0:Pt=(ct-St)/(ct-I),$=gt-(gt-J)*Pt,at=M-(M-H)*Pt,st=S-(S-U)*Pt,ot=k-(k-x)*Pt}else{let Pt;St>j?Pt=1:I===j?Pt=0:Pt=(I-St)/(I-j),$=J-(J-V)*Pt,at=H-(H-R)*Pt,st=U-(U-F)*Pt,ot=x-(x-G)*Pt}let Tt;St<ct?Tt=0:St>j?Tt=1:Tt=(ct-St)/(ct-j),bt=gt-(gt-V)*Tt,dt=M-(M-R)*Tt,vt=S-(S-F)*Tt,At=k-(k-G)*Tt;const _t=Math.round(Math.min($,bt)),It=Math.round(Math.max($,bt));let zt=K*St+_t*4;for(let Pt=_t;Pt<=It;Pt++)Tt=($-Pt)/($-bt),Tt<0?Tt=0:Tt>1&&(Tt=1),Q[zt++]=at-(at-dt)*Tt|0,Q[zt++]=st-(st-vt)*Tt|0,Q[zt++]=ot-(ot-At)*Tt|0,Q[zt++]=255}}function f(T,w,N){const O=w.coords,P=w.colors;let E,C;switch(w.type){case"lattice":const L=w.verticesPerRow,X=Math.floor(O.length/L)-1,q=L-1;for(E=0;E<X;E++){let Q=E*L;for(let K=0;K<q;K++,Q++)d(T,N,O[Q],O[Q+1],O[Q+L],P[Q],P[Q+1],P[Q+L]),d(T,N,O[Q+L+1],O[Q+1],O[Q+L],P[Q+L+1],P[Q+1],P[Q+L])}break;case"triangles":for(E=0,C=O.length;E<C;E+=3)d(T,N,O[E],O[E+1],O[E+2],P[E],P[E+1],P[E+2]);break;default:throw new Error("illegal figure")}}class m extends h{constructor(w){super(),this._coords=w[2],this._colors=w[3],this._figures=w[4],this._bounds=w[5],this._bbox=w[7],this._background=w[8],this.matrix=null}_createMeshCanvas(w,N,O){const L=Math.floor(this._bounds[0]),X=Math.floor(this._bounds[1]),q=Math.ceil(this._bounds[2])-L,Q=Math.ceil(this._bounds[3])-X,K=Math.min(Math.ceil(Math.abs(q*w[0]*1.1)),3e3),tt=Math.min(Math.ceil(Math.abs(Q*w[1]*1.1)),3e3),gt=q/K,ct=Q/tt,J={coords:this._coords,colors:this._colors,offsetX:-L,offsetY:-X,scaleX:1/gt,scaleY:1/ct},I=K+4,V=tt+4,j=O.getCanvas("mesh",I,V,!1),M=j.context,S=M.createImageData(K,tt);if(N){const H=S.data;for(let U=0,x=H.length;U<x;U+=4)H[U]=N[0],H[U+1]=N[1],H[U+2]=N[2],H[U+3]=255}for(const H of this._figures)f(S,H,J);return M.putImageData(S,2,2),{canvas:j.canvas,offsetX:L-2*gt,offsetY:X-2*ct,scaleX:gt,scaleY:ct}}getPattern(w,N,O,P){l(w,this._bbox);let E;if(P===o.SHADING)E=i.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(w));else if(E=i.Util.singularValueDecompose2dScale(N.baseTransform),this.matrix){const L=i.Util.singularValueDecompose2dScale(this.matrix);E=[E[0]*L[0],E[1]*L[1]]}const C=this._createMeshCanvas(E,P===o.SHADING?null:this._background,N.cachedCanvases);return P!==o.SHADING&&(w.setTransform(...N.baseTransform),this.matrix&&w.transform(...this.matrix)),w.translate(C.offsetX,C.offsetY),w.scale(C.scaleX,C.scaleY),w.createPattern(C.canvas,"no-repeat")}}class y extends h{getPattern(){return"hotpink"}}function b(T){switch(T[0]){case"RadialAxial":return new p(T);case"Mesh":return new m(T);case"Dummy":return new y}throw new Error(`Unknown IR type: ${T[0]}`)}const A={COLORED:1,UNCOLORED:2};class _{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(w,N,O,P,E){this.operatorList=w[2],this.matrix=w[3]||[1,0,0,1,0,0],this.bbox=w[4],this.xstep=w[5],this.ystep=w[6],this.paintType=w[7],this.tilingType=w[8],this.color=N,this.ctx=O,this.canvasGraphicsFactory=P,this.baseTransform=E}createPatternCanvas(w){const N=this.operatorList,O=this.bbox,P=this.xstep,E=this.ystep,C=this.paintType,L=this.tilingType,X=this.color,q=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+L);const Q=O[0],K=O[1],tt=O[2],gt=O[3],ct=i.Util.singularValueDecompose2dScale(this.matrix),J=i.Util.singularValueDecompose2dScale(this.baseTransform),I=[ct[0]*J[0],ct[1]*J[1]],V=this.getSizeAndScale(P,this.ctx.canvas.width,I[0]),j=this.getSizeAndScale(E,this.ctx.canvas.height,I[1]),M=w.cachedCanvases.getCanvas("pattern",V.size,j.size,!0),S=M.context,k=q.createCanvasGraphics(S);k.groupLevel=w.groupLevel,this.setFillAndStrokeStyleToContext(k,C,X);let H=Q,U=K,x=tt,R=gt;return Q<0&&(H=0,x+=Math.abs(Q)),K<0&&(U=0,R+=Math.abs(K)),S.translate(-(V.scale*H),-(j.scale*U)),k.transform(V.scale,0,0,j.scale,0,0),S.save(),this.clipBbox(k,H,U,x,R),k.baseTransform=(0,a.getCurrentTransform)(k.ctx),k.executeOperatorList(N),k.endDrawing(),{canvas:M.canvas,scaleX:V.scale,scaleY:j.scale,offsetX:H,offsetY:U}}getSizeAndScale(w,N,O){w=Math.abs(w);const P=Math.max(_.MAX_PATTERN_SIZE,N);let E=Math.ceil(w*O);return E>=P?E=P:O=E/w,{scale:O,size:E}}clipBbox(w,N,O,P,E){const C=P-N,L=E-O;w.ctx.rect(N,O,C,L),w.current.updateRectMinMax((0,a.getCurrentTransform)(w.ctx),[N,O,P,E]),w.clip(),w.endPath()}setFillAndStrokeStyleToContext(w,N,O){const P=w.ctx,E=w.current;switch(N){case A.COLORED:const C=this.ctx;P.fillStyle=C.fillStyle,P.strokeStyle=C.strokeStyle,E.fillColor=C.fillStyle,E.strokeColor=C.strokeStyle;break;case A.UNCOLORED:const L=i.Util.makeHexColor(O[0],O[1],O[2]);P.fillStyle=L,P.strokeStyle=L,E.fillColor=L,E.strokeColor=L;break;default:throw new i.FormatError(`Unsupported paint type: ${N}`)}}getPattern(w,N,O,P){let E=O;P!==o.SHADING&&(E=i.Util.transform(E,N.baseTransform),this.matrix&&(E=i.Util.transform(E,this.matrix)));const C=this.createPatternCanvas(N);let L=new DOMMatrix(E);L=L.translate(C.offsetX,C.offsetY),L=L.scale(1/C.scaleX,1/C.scaleY);const X=w.createPattern(C.canvas,"repeat");return X.setTransform(L),X}}t.TilingPattern=_}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=a;var i=n(1);function a({src:o,srcPos:l=0,dest:h,destPos:p=0,width:d,height:f,inverseDecode:m=!1}){const y=i.FeatureTest.isLittleEndian?4278190080:255,[b,A]=m?[0,y]:[y,0],_=d>>3,T=d&7,w=o.length;h=new Uint32Array(h.buffer);for(let N=0;N<f;N++){for(const P=l+_;l<P;l++){const E=l<w?o[l]:255;h[p++]=E&128?A:b,h[p++]=E&64?A:b,h[p++]=E&32?A:b,h[p++]=E&16?A:b,h[p++]=E&8?A:b,h[p++]=E&4?A:b,h[p++]=E&2?A:b,h[p++]=E&1?A:b}if(T===0)continue;const O=l<w?o[l++]:255;for(let P=0;P<T;P++)h[p++]=O&1<<7-P?A:b}return{srcPos:l,destPos:p}}}),((u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=n(1);const a={DATA:1,ERROR:2},o={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function l(p){switch(p instanceof Error||typeof p=="object"&&p!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new i.AbortException(p.message);case"MissingPDFException":return new i.MissingPDFException(p.message);case"PasswordException":return new i.PasswordException(p.message,p.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(p.message,p.status);case"UnknownErrorException":return new i.UnknownErrorException(p.message,p.details);default:return new i.UnknownErrorException(p.message,p.toString())}}class h{constructor(d,f,m){this.sourceName=d,this.targetName=f,this.comObj=m,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const b=y.data;if(b.targetName!==this.sourceName)return;if(b.stream){this._processStreamMessage(b);return}if(b.callback){const _=b.callbackId,T=this.callbackCapabilities[_];if(!T)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],b.callback===a.DATA)T.resolve(b.data);else if(b.callback===a.ERROR)T.reject(l(b.reason));else throw new Error("Unexpected callback case");return}const A=this.actionHandler[b.action];if(!A)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const _=this.sourceName,T=b.sourceName;new Promise(function(w){w(A(b.data))}).then(function(w){m.postMessage({sourceName:_,targetName:T,callback:a.DATA,callbackId:b.callbackId,data:w})},function(w){m.postMessage({sourceName:_,targetName:T,callback:a.ERROR,callbackId:b.callbackId,reason:l(w)})});return}if(b.streamId){this._createStreamSink(b);return}A(b.data)},m.addEventListener("message",this._onComObjOnMessage)}on(d,f){const m=this.actionHandler;if(m[d])throw new Error(`There is already an actionName called "${d}"`);m[d]=f}send(d,f,m){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:f},m)}sendWithPromise(d,f,m){const y=this.callbackId++,b=(0,i.createPromiseCapability)();this.callbackCapabilities[y]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:y,data:f},m)}catch(A){b.reject(A)}return b.promise}sendWithStream(d,f,m,y){const b=this.streamId++,A=this.sourceName,_=this.targetName,T=this.comObj;return new ReadableStream({start:w=>{const N=(0,i.createPromiseCapability)();return this.streamControllers[b]={controller:w,startCall:N,pullCall:null,cancelCall:null,isClosed:!1},T.postMessage({sourceName:A,targetName:_,action:d,streamId:b,data:f,desiredSize:w.desiredSize},y),N.promise},pull:w=>{const N=(0,i.createPromiseCapability)();return this.streamControllers[b].pullCall=N,T.postMessage({sourceName:A,targetName:_,stream:o.PULL,streamId:b,desiredSize:w.desiredSize}),N.promise},cancel:w=>{(0,i.assert)(w instanceof Error,"cancel must have a valid reason");const N=(0,i.createPromiseCapability)();return this.streamControllers[b].cancelCall=N,this.streamControllers[b].isClosed=!0,T.postMessage({sourceName:A,targetName:_,stream:o.CANCEL,streamId:b,reason:l(w)}),N.promise}},m)}_createStreamSink(d){const f=d.streamId,m=this.sourceName,y=d.sourceName,b=this.comObj,A=this,_=this.actionHandler[d.action],T={enqueue(w,N=1,O){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=N,P>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),b.postMessage({sourceName:m,targetName:y,stream:o.ENQUEUE,streamId:f,chunk:w},O)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:m,targetName:y,stream:o.CLOSE,streamId:f}),delete A.streamSinks[f])},error(w){(0,i.assert)(w instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:m,targetName:y,stream:o.ERROR,streamId:f,reason:l(w)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};T.sinkCapability.resolve(),T.ready=T.sinkCapability.promise,this.streamSinks[f]=T,new Promise(function(w){w(_(d.data,T))}).then(function(){b.postMessage({sourceName:m,targetName:y,stream:o.START_COMPLETE,streamId:f,success:!0})},function(w){b.postMessage({sourceName:m,targetName:y,stream:o.START_COMPLETE,streamId:f,reason:l(w)})})}_processStreamMessage(d){const f=d.streamId,m=this.sourceName,y=d.sourceName,b=this.comObj,A=this.streamControllers[f],_=this.streamSinks[f];switch(d.stream){case o.START_COMPLETE:d.success?A.startCall.resolve():A.startCall.reject(l(d.reason));break;case o.PULL_COMPLETE:d.success?A.pullCall.resolve():A.pullCall.reject(l(d.reason));break;case o.PULL:if(!_){b.postMessage({sourceName:m,targetName:y,stream:o.PULL_COMPLETE,streamId:f,success:!0});break}_.desiredSize<=0&&d.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=d.desiredSize,new Promise(function(T){T(_.onPull&&_.onPull())}).then(function(){b.postMessage({sourceName:m,targetName:y,stream:o.PULL_COMPLETE,streamId:f,success:!0})},function(T){b.postMessage({sourceName:m,targetName:y,stream:o.PULL_COMPLETE,streamId:f,reason:l(T)})});break;case o.ENQUEUE:if((0,i.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(d.chunk);break;case o.CLOSE:if((0,i.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),this._deleteStreamController(A,f);break;case o.ERROR:(0,i.assert)(A,"error should have stream controller"),A.controller.error(l(d.reason)),this._deleteStreamController(A,f);break;case o.CANCEL_COMPLETE:d.success?A.cancelCall.resolve():A.cancelCall.reject(l(d.reason)),this._deleteStreamController(A,f);break;case o.CANCEL:if(!_)break;new Promise(function(T){T(_.onCancel&&_.onCancel(l(d.reason)))}).then(function(){b.postMessage({sourceName:m,targetName:y,stream:o.CANCEL_COMPLETE,streamId:f,success:!0})},function(T){b.postMessage({sourceName:m,targetName:y,stream:o.CANCEL_COMPLETE,streamId:f,reason:l(T)})}),_.sinkCapability.reject(l(d.reason)),_.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(d,f){await Promise.allSettled([d.startCall&&d.startCall.promise,d.pullCall&&d.pullCall.promise,d.cancelCall&&d.cancelCall.promise]),delete this.streamControllers[f]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=h}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=n(1);class a{#t;#e;constructor({parsedData:l,rawData:h}){this.#t=l,this.#e=h}getRaw(){return this.#e}get(l){return this.#t.get(l)??null}getAll(){return(0,i.objectFromMap)(this.#t)}has(l){return this.#t.has(l)}}t.Metadata=a}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=n(1),a=n(8);const o=Symbol("INTERNAL");class l{#t=!0;constructor(d,f){this.name=d,this.intent=f}get visible(){return this.#t}_setVisible(d,f){d!==o&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#t=f}}class h{#t=null;#e=new Map;#n=null;#i=null;constructor(d){if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,this.#i=d.order;for(const f of d.groups)this.#e.set(f.id,new l(f.name,f.intent));if(d.baseState==="OFF")for(const f of this.#e.values())f._setVisible(o,!1);for(const f of d.on)this.#e.get(f)._setVisible(o,!0);for(const f of d.off)this.#e.get(f)._setVisible(o,!1);this.#n=this.getHash()}}#a(d){const f=d.length;if(f<2)return!0;const m=d[0];for(let y=1;y<f;y++){const b=d[y];let A;if(Array.isArray(b))A=this.#a(b);else if(this.#e.has(b))A=this.#e.get(b).visible;else return(0,i.warn)(`Optional content group not found: ${b}`),!0;switch(m){case"And":if(!A)return!1;break;case"Or":if(A)return!0;break;case"Not":return!A;default:return!0}}return m==="And"}isVisible(d){if(this.#e.size===0)return!0;if(!d)return(0,i.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return this.#e.has(d.id)?this.#e.get(d.id).visible:((0,i.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return this.#a(d.expression);if(!d.policy||d.policy==="AnyOn"){for(const f of d.ids){if(!this.#e.has(f))return(0,i.warn)(`Optional content group not found: ${f}`),!0;if(this.#e.get(f).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const f of d.ids){if(!this.#e.has(f))return(0,i.warn)(`Optional content group not found: ${f}`),!0;if(!this.#e.get(f).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const f of d.ids){if(!this.#e.has(f))return(0,i.warn)(`Optional content group not found: ${f}`),!0;if(!this.#e.get(f).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const f of d.ids){if(!this.#e.has(f))return(0,i.warn)(`Optional content group not found: ${f}`),!0;if(this.#e.get(f).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,i.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,f=!0){if(!this.#e.has(d)){(0,i.warn)(`Optional content group not found: ${d}`);return}this.#e.get(d)._setVisible(o,!!f),this.#t=null}get hasInitialVisibility(){return this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,i.objectFromMap)(this.#e):null}getGroup(d){return this.#e.get(d)||null}getHash(){if(this.#t!==null)return this.#t;const d=new a.MurmurHash3_64;for(const[f,m]of this.#e)d.update(`${f}:${m.visible}`);return this.#t=d.hexdigest()}}t.OptionalContentConfig=h}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=n(1),a=n(6);class o{constructor({length:d,initialData:f,progressiveDone:m=!1,contentDispositionFilename:y=null,disableRange:b=!1,disableStream:A=!1},_){if((0,i.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m,this._contentDispositionFilename=y,f?.length>0){const T=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(T)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!A,this._isRangeSupported=!b,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((T,w)=>{this._onReceiveData({begin:T,chunk:w})}),this._pdfDataRangeTransport.addProgressListener((T,w)=>{this._onProgress({loaded:T,total:w})}),this._pdfDataRangeTransport.addProgressiveReadListener(T=>{this._onReceiveData({chunk:T})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:d,chunk:f}){const m=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(d===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const y=this._rangeReaders.some(function(b){return b._begin!==d?!1:(b._enqueue(m),!0)});(0,i.assert)(y,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(d){d.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:d.loaded}):this._fullRequestReader?.onProgress?.({loaded:d.loaded,total:d.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const f=this._rangeReaders.indexOf(d);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new l(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,f){if(f<=this._progressiveDataLength)return null;const m=new h(this,d,f);return this._pdfDataRangeTransport.requestDataRange(d,f),this._rangeReaders.push(m),m}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(const f of this._rangeReaders.slice(0))f.cancel(d);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=o;class l{constructor(d,f,m=!1,y=null){this._stream=d,this._done=m||!1,this._filename=(0,a.isPdfFile)(y)?y:null,this._queuedChunks=f||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=(0,i.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class h{constructor(d,f,m){this._stream=d,this._begin=f,this._end=m,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,i.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(a){const o=[],l={items:o,styles:Object.create(null)};function h(p){if(!p)return;let d=null;const f=p.name;if(f==="#text")d=p.value;else if(n.shouldBuildText(f))p?.attributes?.textContent?d=p.attributes.textContent:p.value&&(d=p.value);else return;if(d!==null&&o.push({str:d}),!!p.children)for(const m of p.children)h(m)}return h(a),l}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}t.XfaText=n}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=n(7);const a=function(p){return new Promise((d,f)=>{require$$5.readFile(p,(y,b)=>{if(y||!b){f(new Error(y));return}d(new Uint8Array(b))})})};class o extends i.BaseCanvasFactory{_createCanvas(d,f){return require$$5.createCanvas(d,f)}}t.NodeCanvasFactory=o;class l extends i.BaseCMapReaderFactory{_fetchData(d,f){return a(d).then(m=>({cMapData:m,compressionType:f}))}}t.NodeCMapReaderFactory=l;class h extends i.BaseStandardFontDataFactory{_fetchData(d){return a(d)}}t.NodeStandardFontDataFactory=h}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=n(1),a=n(22);const o=require$$5,l=require$$5,h=require$$5,p=require$$5,d=/^file:\/\/\/[a-zA-Z]:\//;function f(O){const P=p.parse(O);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(O)?p.parse(`file:///${O}`):(P.host||(P.protocol="file:"),P)}class m{constructor(P){this.source=P,this.url=f(P.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new w(this):new _(this),this._fullRequestReader}getRangeReader(P,E){if(E<=this._progressiveDataLength)return null;const C=this.isFsUrl?new N(this,P,E):new T(this,P,E);return this._rangeRequestReaders.push(C),C}cancelAllRequests(P){this._fullRequestReader?.cancel(P);for(const E of this._rangeRequestReaders.slice(0))E.cancel(P)}}t.PDFNodeStream=m;class y{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const E=P.source;this._contentLength=E.length,this._loaded=0,this._filename=null,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=P.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",E=>{this._error(E)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)();const E=P.source;this._isStreamingSupported=!E.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=P.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",E=>{this._error(E)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function A(O,P){return{protocol:O.protocol,auth:O.auth,host:O.hostname,port:O.port,path:O.path,method:"GET",headers:P}}class _ extends y{constructor(P){super(P);const E=C=>{if(C.statusCode===404){const Q=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Q,this._headersCapability.reject(Q);return}this._headersCapability.resolve(),this._setReadableStream(C);const L=Q=>this._readableStream.headers[Q.toLowerCase()],{allowRangeRequests:X,suggestedLength:q}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:L,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=X,this._contentLength=q||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(L)};this._request=null,this._url.protocol==="http:"?this._request=l.request(A(this._url,P.httpHeaders),E):this._request=h.request(A(this._url,P.httpHeaders),E),this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class T extends b{constructor(P,E,C){super(P),this._httpHeaders={};for(const X in P.httpHeaders){const q=P.httpHeaders[X];q!==void 0&&(this._httpHeaders[X]=q)}this._httpHeaders.Range=`bytes=${E}-${C-1}`;const L=X=>{if(X.statusCode===404){const q=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=q;return}this._setReadableStream(X)};this._request=null,this._url.protocol==="http:"?this._request=l.request(A(this._url,this._httpHeaders),L):this._request=h.request(A(this._url,this._httpHeaders),L),this._request.on("error",X=>{this._storedError=X}),this._request.end()}}class w extends y{constructor(P){super(P);let E=decodeURIComponent(this._url.path);d.test(this._url.href)&&(E=E.replace(/^\//,"")),o.lstat(E,(C,L)=>{if(C){C.code==="ENOENT"&&(C=new i.MissingPDFException(`Missing PDF "${E}".`)),this._storedError=C,this._headersCapability.reject(C);return}this._contentLength=L.size,this._setReadableStream(o.createReadStream(E)),this._headersCapability.resolve()})}}class N extends b{constructor(P,E,C){super(P);let L=decodeURIComponent(this._url.path);d.test(this._url.href)&&(L=L.replace(/^\//,"")),this._setReadableStream(o.createReadStream(L,{start:E,end:C-1}))}}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=p,t.extractFilenameFromHeader=h,t.validateRangeRequestCapabilities=l,t.validateResponseStatus=d;var i=n(1),a=n(23),o=n(6);function l({getResponseHeader:f,isHttp:m,rangeChunkSize:y,disableRange:b}){const A={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(f("Content-Length"),10);return!Number.isInteger(_)||(A.suggestedLength=_,_<=2*y)||b||!m||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function h(f){const m=f("Content-Disposition");if(m){let y=(0,a.getFilenameFromContentDispositionHeader)(m);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,o.isPdfFile)(y))return y}return null}function p(f,m){return f===404||f===0&&m.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+m+'".'):new i.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${m}".`,f)}function d(f){return f===200||f===206}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=a;var i=n(1);function a(o){let l=!0,h=p("filename\\*","i").exec(o);if(h){h=h[1];let _=y(h);return _=unescape(_),_=b(_),_=A(_),f(_)}if(h=m(o),h){const _=A(h);return f(_)}if(h=p("filename","i").exec(o),h){h=h[1];let _=y(h);return _=A(_),f(_)}function p(_,T){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',T)}function d(_,T){if(_){if(!/^[\x00-\xFF]+$/.test(T))return T;try{const w=new TextDecoder(_,{fatal:!0}),N=(0,i.stringToBytes)(T);T=w.decode(N),l=!1}catch{}}return T}function f(_){return l&&/[\x80-\xff]/.test(_)&&(_=d("utf-8",_),l&&(_=d("iso-8859-1",_))),_}function m(_){const T=[];let w;const N=p("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=N.exec(_))!==null;){let[,P,E,C]=w;if(P=parseInt(P,10),P in T){if(P===0)break;continue}T[P]=[E,C]}const O=[];for(let P=0;P<T.length&&P in T;++P){let[E,C]=T[P];C=y(C),E&&(C=unescape(C),P===0&&(C=b(C))),O.push(C)}return O.join("")}function y(_){if(_.startsWith('"')){const T=_.slice(1).split('\\"');for(let w=0;w<T.length;++w){const N=T[w].indexOf('"');N!==-1&&(T[w]=T[w].slice(0,N),T.length=w+1),T[w]=T[w].replace(/\\(.)/g,"$1")}_=T.join('"')}return _}function b(_){const T=_.indexOf("'");if(T===-1)return _;const w=_.slice(0,T),O=_.slice(T+1).replace(/^[^']*'/,"");return d(w,O)}function A(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(T,w,N,O){if(N==="q"||N==="Q")return O=O.replace(/_/g," "),O=O.replace(/=([0-9a-fA-F]{2})/g,function(P,E){return String.fromCharCode(parseInt(E,16))}),d(w,O);try{O=atob(O)}catch{}return d(w,O)})}return""}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=n(1),a=n(22);const o=200,l=206;function h(y){const b=y.response;return typeof b!="string"?b:(0,i.stringToBytes)(b).buffer}class p{constructor(b,A={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&A.httpHeaders||Object.create(null),this.withCredentials=A.withCredentials||!1,this.getXhr=A.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,A,_){const T={begin:b,end:A};for(const w in _)T[w]=_[w];return this.request(T)}requestFull(b){return this.request(b)}request(b){const A=this.getXhr(),_=this.currXhrId++,T=this.pendingRequests[_]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const w in this.httpHeaders){const N=this.httpHeaders[w];N!==void 0&&A.setRequestHeader(w,N)}return this.isHttp&&"begin"in b&&"end"in b?(A.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),T.expectedStatus=l):T.expectedStatus=o,A.responseType="arraybuffer",b.onError&&(A.onerror=function(w){b.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,_),A.onprogress=this.onProgress.bind(this,_),T.onHeadersReceived=b.onHeadersReceived,T.onDone=b.onDone,T.onError=b.onError,T.onProgress=b.onProgress,A.send(null),_}onProgress(b,A){const _=this.pendingRequests[b];_&&_.onProgress?.(A)}onStateChange(b,A){const _=this.pendingRequests[b];if(!_)return;const T=_.xhr;if(T.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),T.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],T.status===0&&this.isHttp){_.onError?.(T.status);return}const w=T.status||o;if(!(w===o&&_.expectedStatus===l)&&w!==_.expectedStatus){_.onError?.(T.status);return}const O=h(T);if(w===l){const P=T.getResponseHeader("Content-Range"),E=/bytes (\d+)-(\d+)\/(\d+)/.exec(P);_.onDone({begin:parseInt(E[1],10),chunk:O})}else O?_.onDone({begin:0,chunk:O}):_.onError?.(T.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const A=this.pendingRequests[b].xhr;delete this.pendingRequests[b],A.abort()}}class d{constructor(b){this._source=b,this._manager=new p(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const A=this._rangeRequestReaders.indexOf(b);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(b,A){const _=new m(this._manager,b,A);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const A of this._rangeRequestReaders.slice(0))A.cancel(b)}}t.PDFNetworkStream=d;class f{constructor(b,A){this._manager=b;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=b.requestFull(_),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,A=this._manager.getRequestXhr(b),_=N=>A.getResponseHeader(N),{allowRangeRequests:T,suggestedLength:w}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});T&&(this._isRangeSupported=!0),this._contentLength=w||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,a.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){this.onProgress?.({loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=(0,i.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class m{constructor(b,A,_){this._manager=b;const T={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(A,_,T),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(b){const A=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,a.createResponseStatusError)(b,this._url);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){this.isStreamingSupported||this.onProgress?.({loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const b=(0,i.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=n(1),a=n(22);function o(m,y,b){return{method:"GET",headers:m,signal:b.signal,mode:"cors",credentials:y?"include":"same-origin",redirect:"follow"}}function l(m){const y=new Headers;for(const b in m){const A=m[b];A!==void 0&&y.append(b,A)}return y}function h(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:((0,i.warn)(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class p{constructor(y){this.source=y,this.isHttp=/^https?:/i.test(y.url),this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(y,b){if(b<=this._progressiveDataLength)return null;const A=new f(this,y,b);return this._rangeRequestReaders.push(A),A}cancelAllRequests(y){this._fullRequestReader?.cancel(y);for(const b of this._rangeRequestReaders.slice(0))b.cancel(y)}}t.PDFFetchStream=p;class d{constructor(y){this._stream=y,this._reader=null,this._loaded=0,this._filename=null;const b=y.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=l(this._stream.httpHeaders);const A=b.url;fetch(A,o(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,a.validateResponseStatus)(_.status))throw(0,a.createResponseStatusError)(_.status,A);this._reader=_.body.getReader(),this._headersCapability.resolve();const T=O=>_.headers.get(O),{allowRangeRequests:w,suggestedLength:N}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=N||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(T),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:y,done:b}=await this._reader.read();return b?{value:y,done:b}:(this._loaded+=y.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:h(y),done:!1})}cancel(y){this._reader?.cancel(y),this._abortController.abort()}}class f{constructor(y,b,A){this._stream=y,this._reader=null,this._loaded=0;const _=y.source;this._withCredentials=_.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=l(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${A-1}`);const T=_.url;fetch(T,o(this._headers,this._withCredentials,this._abortController)).then(w=>{if(!(0,a.validateResponseStatus)(w.status))throw(0,a.createResponseStatusError)(w.status,T);this._readCapability.resolve(),this._reader=w.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:y,done:b}=await this._reader.read();return b?{value:y,done:b}:(this._loaded+=y.byteLength,this.onProgress?.({loaded:this._loaded}),{value:h(y),done:!1})}cancel(y){this._reader?.cancel(y),this._abortController.abort()}}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=_,t.updateTextLayer=T;var i=n(1),a=n(6);const o=1e5,l=30,h=.8,p=new Map;function d(w,N){let O;if(N&&i.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(w,w).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=w,O=P.getContext("2d",{alpha:!1})}return O}function f(w,N){const O=p.get(w);if(O)return O;const P=d(l,N);P.font=`${l}px ${w}`;const E=P.measureText("");let C=E.fontBoundingBoxAscent,L=Math.abs(E.fontBoundingBoxDescent);if(C){const q=C/(C+L);return p.set(w,q),P.canvas.width=P.canvas.height=0,q}P.strokeStyle="red",P.clearRect(0,0,l,l),P.strokeText("g",0,0);let X=P.getImageData(0,0,l,l).data;L=0;for(let q=X.length-1-3;q>=0;q-=4)if(X[q]>0){L=Math.ceil(q/4/l);break}P.clearRect(0,0,l,l),P.strokeText("A",0,l),X=P.getImageData(0,0,l,l).data,C=0;for(let q=0,Q=X.length;q<Q;q+=4)if(X[q]>0){C=l-Math.floor(q/4/l);break}if(P.canvas.width=P.canvas.height=0,C){const q=C/(C+L);return p.set(w,q),q}return p.set(w,h),h}function m(w,N,O){const P=document.createElement("span"),E={angle:0,canvasWidth:0,hasText:N.str!=="",hasEOL:N.hasEOL,fontSize:0};w._textDivs.push(P);const C=i.Util.transform(w._transform,N.transform);let L=Math.atan2(C[1],C[0]);const X=O[N.fontName];X.vertical&&(L+=Math.PI/2);const q=Math.hypot(C[2],C[3]),Q=q*f(X.fontFamily,w._isOffscreenCanvasSupported);let K,tt;L===0?(K=C[4],tt=C[5]-Q):(K=C[4]+Q*Math.sin(L),tt=C[5]-Q*Math.cos(L));const gt="calc(var(--scale-factor)*",ct=P.style;w._container===w._rootContainer?(ct.left=`${(100*K/w._pageWidth).toFixed(2)}%`,ct.top=`${(100*tt/w._pageHeight).toFixed(2)}%`):(ct.left=`${gt}${K.toFixed(2)}px)`,ct.top=`${gt}${tt.toFixed(2)}px)`),ct.fontSize=`${gt}${q.toFixed(2)}px)`,ct.fontFamily=X.fontFamily,E.fontSize=q,P.setAttribute("role","presentation"),P.textContent=N.str,P.dir=N.dir,w._fontInspectorEnabled&&(P.dataset.fontName=N.fontName),L!==0&&(E.angle=L*(180/Math.PI));let J=!1;if(N.str.length>1)J=!0;else if(N.str!==" "&&N.transform[0]!==N.transform[3]){const I=Math.abs(N.transform[0]),V=Math.abs(N.transform[3]);I!==V&&Math.max(I,V)/Math.min(I,V)>1.5&&(J=!0)}J&&(E.canvasWidth=X.vertical?N.height:N.width),w._textDivProperties.set(P,E),w._isReadableStream&&w._layoutText(P)}function y(w){const{div:N,scale:O,properties:P,ctx:E,prevFontSize:C,prevFontFamily:L}=w,{style:X}=N;let q="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:Q}=X,{canvasWidth:K,fontSize:tt}=P;(C!==tt||L!==Q)&&(E.font=`${tt*O}px ${Q}`,w.prevFontSize=tt,w.prevFontFamily=Q);const{width:gt}=E.measureText(N.textContent);gt>0&&(q=`scaleX(${K*O/gt})`)}P.angle!==0&&(q=`rotate(${P.angle}deg) ${q}`),q.length>0&&(X.transform=q)}function b(w){if(w._canceled)return;const N=w._textDivs,O=w._capability;if(N.length>o){O.resolve();return}if(!w._isReadableStream)for(const E of N)w._layoutText(E);O.resolve()}class A{constructor({textContentSource:N,container:O,viewport:P,textDivs:E,textDivProperties:C,textContentItemsStr:L,isOffscreenCanvasSupported:X}){this._textContentSource=N,this._isReadableStream=N instanceof ReadableStream,this._container=this._rootContainer=O,this._textDivs=E||[],this._textContentItemsStr=L||[],this._isOffscreenCanvasSupported=X,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,X)};const{pageWidth:q,pageHeight:Q,pageX:K,pageY:tt}=P.rawDims;this._transform=[1,0,0,-1,-K,tt+Q],this._pageWidth=q,this._pageHeight=Q,(0,a.setLayerDimensions)(O,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(N,O){for(const P of N){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const E=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),E.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),m(this,P,O)}}_layoutText(N){const O=this._layoutTextParams.properties=this._textDivProperties.get(N);if(this._layoutTextParams.div=N,y(this._layoutTextParams),O.hasText&&this._container.append(N),O.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const N=(0,i.createPromiseCapability)();let O=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:E,done:C})=>{if(C){N.resolve();return}Object.assign(O,E.styles),this._processItems(E.items,O),P()},N.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:E}=this._textContentSource;this._processItems(P,E),N.resolve()}else throw new Error('No "textContentSource" parameter specified.');N.promise.then(()=>{O=null,b(this)},this._capability.reject)}}t.TextLayerRenderTask=A;function _(w){!w.textContentSource&&(w.textContent||w.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),w.textContentSource=w.textContent||w.textContentStream);const N=new A(w);return N._render(),N}function T({container:w,viewport:N,textDivs:O,textDivProperties:P,isOffscreenCanvasSupported:E,mustRotate:C=!0,mustRescale:L=!0}){if(C&&(0,a.setLayerDimensions)(w,{rotation:N.rotation}),L){const X=d(0,E),Q={prevFontSize:null,prevFontFamily:null,div:null,scale:N.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:X};for(const K of O)Q.properties=P.get(K),Q.div=K,y(Q)}}}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=n(1),a=n(5),o=n(28),l=n(29),h=n(6);class p{#t;#e=!1;#n=this.pointerup.bind(this);#i=this.pointerdown.bind(this);#a=new Map;#s=!1;#o=!1;#r;static _initialized=!1;constructor(f){p._initialized||(p._initialized=!0,o.FreeTextEditor.initialize(f.l10n),l.InkEditor.initialize(f.l10n)),f.uiManager.registerEditorTypes([o.FreeTextEditor,l.InkEditor]),this.#r=f.uiManager,this.pageIndex=f.pageIndex,this.div=f.div,this.#t=f.accessibilityManager,this.#r.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(f){this.#r.updateToolbar(f)}updateMode(f=this.#r.getMode()){this.#h(),f===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#r.unselectAll(),f!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",f===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",f===i.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(f){if(!f&&this.#r.getMode()!==i.AnnotationEditorType.INK)return;if(!f){for(const y of this.#a.values())if(y.isEmpty()){y.setInBackground();return}}this.#f({offsetX:0,offsetY:0}).setInBackground()}setEditingState(f){this.#r.setEditingState(f)}addCommands(f){this.#r.addCommands(f)}enable(){this.div.style.pointerEvents="auto";for(const f of this.#a.values())f.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const f of this.#a.values())f.disableEditing();this.#h(),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(f){this.#r.getActive()!==f&&this.#r.setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",this.#i),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#i),this.div.removeEventListener("pointerup",this.#n)}attach(f){this.#a.set(f.id,f)}detach(f){this.#a.delete(f.id),this.#t?.removePointerInTextLayer(f.contentDiv)}remove(f){this.#r.removeEditor(f),this.detach(f),f.div.style.display="none",setTimeout(()=>{f.div.style.display="",f.div.remove(),f.isAttachedToDOM=!1,document.activeElement===document.body&&this.#r.focusMainContainer()},0),this.#o||this.addInkEditorIfNeeded(!1)}#c(f){f.parent!==this&&(this.attach(f),f.parent?.detach(f),f.setParent(this),f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))}add(f){if(this.#c(f),this.#r.addEditor(f),this.attach(f),!f.isAttachedToDOM){const m=f.render();this.div.append(m),f.isAttachedToDOM=!0}this.moveEditorInDOM(f),f.onceAdded(),this.#r.addToAnnotationStorage(f)}moveEditorInDOM(f){this.#t?.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addANewEditor(f){const m=()=>{this.addOrRebuild(f)},y=()=>{f.remove()};this.addCommands({cmd:m,undo:y,mustExec:!0})}addUndoableEditor(f){const m=()=>{this.addOrRebuild(f)},y=()=>{f.remove()};this.addCommands({cmd:m,undo:y,mustExec:!1})}getNextId(){return this.#r.getId()}#u(f){switch(this.#r.getMode()){case i.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(f);case i.AnnotationEditorType.INK:return new l.InkEditor(f)}return null}deserialize(f){switch(f.annotationType){case i.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(f,this,this.#r);case i.AnnotationEditorType.INK:return l.InkEditor.deserialize(f,this,this.#r)}return null}#f(f){const m=this.getNextId(),y=this.#u({parent:this,id:m,x:f.offsetX,y:f.offsetY,uiManager:this.#r});return y&&this.add(y),y}setSelected(f){this.#r.setSelected(f)}toggleSelected(f){this.#r.toggleSelected(f)}isSelected(f){return this.#r.isSelected(f)}unselect(f){this.#r.unselect(f)}pointerup(f){const{isMac:m}=i.FeatureTest.platform;if(!(f.button!==0||f.ctrlKey&&m)&&f.target===this.div&&this.#s){if(this.#s=!1,!this.#e){this.#e=!0;return}this.#f(f)}}pointerdown(f){const{isMac:m}=i.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&m||f.target!==this.div)return;this.#s=!0;const y=this.#r.getActive();this.#e=!y||y.isEmpty()}drop(f){const m=f.dataTransfer.getData("text/plain"),y=this.#r.getEditor(m);if(!y)return;f.preventDefault(),f.dataTransfer.dropEffect="move",this.#c(y);const b=this.div.getBoundingClientRect(),A=f.clientX-b.x,_=f.clientY-b.y;y.translate(A-y.startX,_-y.startY),this.moveEditorInDOM(y),y.div.focus()}dragover(f){f.preventDefault()}destroy(){this.#r.getActive()?.parent===this&&this.#r.setActiveEditor(null);for(const f of this.#a.values())this.#t?.removePointerInTextLayer(f.contentDiv),f.setParent(null),f.isAttachedToDOM=!1,f.div.remove();this.div=null,this.#a.clear(),this.#r.removeLayer(this)}#h(){this.#o=!0;for(const f of this.#a.values())f.isEmpty()&&f.remove();this.#o=!1}render({viewport:f}){this.viewport=f,(0,h.setLayerDimensions)(this.div,f),(0,a.bindEvents)(this,this.div,["dragover","drop"]);for(const m of this.#r.getEditors(this.pageIndex))this.add(m);this.updateMode()}update({viewport:f}){this.#r.commitOrRemove(),this.viewport=f,(0,h.setLayerDimensions)(this.div,{rotation:f.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:f,pageHeight:m}=this.viewport.rawDims;return[f,m]}}t.AnnotationEditorLayer=p}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),a=n(5),o=n(4);class l extends o.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#a;#s="";#o=`${this.id}-editor`;#r=!1;#c;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new a.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],l.prototype.commitOrRemove]]);static _type="freetext";constructor(p){super({...p,name:"freeTextEditor"}),this.#a=p.color||l._defaultColor||o.AnnotationEditor._defaultLineColor,this.#c=p.fontSize||l._defaultFontSize}static initialize(p){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(f=>[f,p.get(f)]));const d=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(d.getPropertyValue("--freetext-padding"))}static updateDefaultParams(p,d){switch(p){case i.AnnotationEditorParamsType.FREETEXT_SIZE:l._defaultFontSize=d;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:l._defaultColor=d;break}}updateParams(p,d){switch(p){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#u(d);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(d);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,l._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,l._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#c],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#u(p){const d=m=>{this.editorDiv.style.fontSize=`calc(${m}px * var(--scale-factor))`,this.translate(0,-(m-this.#c)*this.parentScale),this.#c=m,this.#d()},f=this.#c;this.addCommands({cmd:()=>{d(p)},undo:()=>{d(f)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(p){const d=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=p},undo:()=>{this.#a=this.editorDiv.style.color=d},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){const p=this.parentScale;return[-l._internalPadding*p,-(l._internalPadding+this.#c)*p]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#o),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(p){super.focusin(p),p.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}#h(){const p=this.editorDiv.getElementsByTagName("div");if(p.length===0)return this.editorDiv.innerText;const d=[];for(const f of p)d.push(f.innerText.replace(/\r\n?|\n/,""));return d.join(`
`)}#d(){const[p,d]=this.parentDimensions;let f;if(this.isAttachedToDOM)f=this.div.getBoundingClientRect();else{const{currentLayer:m,div:y}=this,b=y.style.display;y.style.display="hidden",m.div.append(this.div),f=y.getBoundingClientRect(),y.remove(),y.style.display=b}this.width=f.width/p,this.height=f.height/d}commit(){this.isInEditMode()&&(super.commit(),this.#r||(this.#r=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#s=this.#h().trimEnd(),this.#d())}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(p){this.enableEditMode(),this.editorDiv.focus()}keydown(p){p.target===this.div&&p.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(p){l._keyboardManager.exec(this,p)}editorDivFocus(p){this.isEditing=!0}editorDivBlur(p){this.isEditing=!1}editorDivInput(p){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let p,d;this.width&&(p=this.x,d=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#o),this.enableEditing(),l._l10nPromise.get("editor_free_text2_aria_label").then(m=>this.editorDiv?.setAttribute("aria-label",m)),l._l10nPromise.get("free_text2_default_content").then(m=>this.editorDiv?.setAttribute("default-content",m)),this.editorDiv.contentEditable=!0;const{style:f}=this.editorDiv;if(f.fontSize=`calc(${this.#c}px * var(--scale-factor))`,f.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[m,y]=this.parentDimensions;this.setAt(p*m,d*y,this.width*m,this.height*y);for(const b of this.#s.split(`
`)){const A=document.createElement("div");A.append(b?document.createTextNode(b):document.createElement("br")),this.editorDiv.append(A)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(p,d,f){const m=super.deserialize(p,d,f);return m.#c=p.fontSize,m.#a=i.Util.makeHexColor(...p.color),m.#s=p.value,m}serialize(){if(this.isEmpty())return null;const p=l._internalPadding*this.parentScale,d=this.getRect(p,p),f=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a);return{annotationType:i.AnnotationEditorType.FREETEXT,color:f,fontSize:this.#c,value:this.#s,pageIndex:this.pageIndex,rect:d,rotation:this.rotation}}}t.FreeTextEditor=l}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return o.fitCurve}});var i=n(1),a=n(4),o=n(30),l=n(5);const h=16,p=100;class d extends a.AnnotationEditor{#t=0;#e=0;#n=0;#i=this.canvasPointermove.bind(this);#a=this.canvasPointerleave.bind(this);#s=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#r=!1;#c=!1;#u=null;#f=null;#h=0;#d=0;#l=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(m){super({...m,name:"inkEditor"}),this.color=m.color||null,this.thickness=m.thickness||null,this.opacity=m.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(m){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(y=>[y,m.get(y)]))}static updateDefaultParams(m,y){switch(m){case i.AnnotationEditorParamsType.INK_THICKNESS:d._defaultThickness=y;break;case i.AnnotationEditorParamsType.INK_COLOR:d._defaultColor=y;break;case i.AnnotationEditorParamsType.INK_OPACITY:d._defaultOpacity=y/100;break}}updateParams(m,y){switch(m){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#p(y);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#m(y);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#g(y);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,d._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,d._defaultColor||a.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(d._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||d._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||d._defaultColor||a.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??d._defaultOpacity))]]}#p(m){const y=this.thickness;this.addCommands({cmd:()=>{this.thickness=m,this.#k()},undo:()=>{this.thickness=y,this.#k()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(m){const y=this.color;this.addCommands({cmd:()=>{this.color=m,this.#_()},undo:()=>{this.color=y,this.#_()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(m){m/=100;const y=this.opacity;this.addCommands({cmd:()=>{this.opacity=m,this.#_()},undo:()=>{this.opacity=y,this.#_()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#C()),this.#k())}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(m){!this.parent&&m?this._uiManager.removeShouldRescale(this):this.parent&&m===null&&this._uiManager.addShouldRescale(this),super.setParent(m)}onScaleChanging(){const[m,y]=this.parentDimensions,b=this.width*m,A=this.height*y;this.setDimensions(b,A)}enableEditMode(){this.#r||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#o),this.canvas.addEventListener("pointerup",this.#s))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o),this.canvas.removeEventListener("pointerup",this.#s))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#b(){const{parentRotation:m,parentDimensions:[y,b]}=this;switch(m){case 90:return[0,b,b,y];case 180:return[y,b,y,b];case 270:return[y,0,b,y];default:return[0,0,y,b]}}#y(){const{ctx:m,color:y,opacity:b,thickness:A,parentScale:_,scaleFactor:T}=this;m.lineWidth=A*_/T,m.lineCap="round",m.lineJoin="round",m.miterLimit=10,m.strokeStyle=`${y}${(0,l.opacityToHex)(b)}`}#A(m,y){this.isEditing=!0,this.#c||(this.#c=!0,this.#C(),this.thickness||=d._defaultThickness,this.color||=d._defaultColor||a.AnnotationEditor._defaultLineColor,this.opacity??=d._defaultOpacity),this.currentPath.push([m,y]),this.#u=null,this.#y(),this.ctx.beginPath(),this.ctx.moveTo(m,y),this.#l=()=>{this.#l&&(this.#u&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#_(),this.ctx.lineTo(...this.#u),this.#u=null,this.ctx.stroke()),window.requestAnimationFrame(this.#l))},window.requestAnimationFrame(this.#l)}#E(m,y){const[b,A]=this.currentPath.at(-1);m===b&&y===A||(this.currentPath.push([m,y]),this.#u=[m,y])}#w(m,y){this.ctx.closePath(),this.#l=null,m=Math.min(Math.max(m,0),this.canvas.width),y=Math.min(Math.max(y,0),this.canvas.height);const[b,A]=this.currentPath.at(-1);(m!==b||y!==A)&&this.currentPath.push([m,y]);let _;if(this.currentPath.length!==1)_=(0,o.fitCurve)(this.currentPath,30,null);else{const O=[m,y];_=[[O,O.slice(),O.slice(),O]]}const T=d.#O(_);this.currentPath.length=0;const w=()=>{this.paths.push(_),this.bezierPath2D.push(T),this.rebuild()},N=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#x()),this.#k())};this.addCommands({cmd:w,undo:N,mustExec:!0})}#_(){if(this.isEmpty()){this.#M();return}this.#y();const{canvas:m,ctx:y}=this;y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,m.width,m.height),this.#M();for(const b of this.bezierPath2D)y.stroke(b)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#k(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(m){super.focusin(m),this.enableEditMode()}canvasPointerdown(m){m.button!==0||!this.isInEditMode()||this.#r||(this.setInForeground(),m.type!=="mouse"&&this.div.focus(),m.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#a),this.canvas.addEventListener("pointermove",this.#i),this.#A(m.offsetX,m.offsetY))}canvasPointermove(m){m.stopPropagation(),this.#E(m.offsetX,m.offsetY)}canvasPointerup(m){m.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(m.stopPropagation(),this.#P(m),this.setInBackground())}canvasPointerleave(m){this.#P(m),this.setInBackground()}#P(m){this.#w(m.offsetX,m.offsetY),this.canvas.removeEventListener("pointerleave",this.#a),this.canvas.removeEventListener("pointermove",this.#i),this.addToAnnotationStorage()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",d._l10nPromise.get("editor_ink_canvas_aria_label").then(m=>this.canvas?.setAttribute("aria-label",m)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){let m=null;this.#f=new ResizeObserver(y=>{const b=y[0].contentRect;b.width&&b.height&&(m!==null&&clearTimeout(m),m=setTimeout(()=>{this.fixDims(),m=null},p),this.setDimensions(b.width,b.height))}),this.#f.observe(this.div)}render(){if(this.div)return this.div;let m,y;this.width&&(m=this.x,y=this.y),super.render(),d._l10nPromise.get("editor_ink2_aria_label").then(w=>this.div?.setAttribute("aria-label",w));const[b,A,_,T]=this.#b();if(this.setAt(b,A,0,0),this.setDims(_,T),this.#R(),this.width){const[w,N]=this.parentDimensions;this.setAt(m*w,y*N,this.width*w,this.height*N),this.#c=!0,this.#C(),this.setDims(this.width*w,this.height*N),this.#_(),this.#I(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#C(){if(!this.#c)return;const[m,y]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*m),this.canvas.height=Math.ceil(this.height*y),this.#M()}setDimensions(m,y){const b=Math.round(m),A=Math.round(y);if(this.#h===b&&this.#d===A)return;this.#h=b,this.#d=A,this.canvas.style.visibility="hidden",this.#t&&Math.abs(this.#t-m/y)>.01&&(y=Math.ceil(m/this.#t),this.setDims(m,y));const[_,T]=this.parentDimensions;this.width=m/_,this.height=y/T,this.#r&&this.#S(m,y),this.#C(),this.#_(),this.canvas.style.visibility="visible"}#S(m,y){const b=this.#F(),A=(m-b)/this.#n,_=(y-b)/this.#e;this.scaleFactor=Math.min(A,_)}#M(){const m=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+m,this.translationY*this.scaleFactor+m)}static#O(m){const y=new Path2D;for(let b=0,A=m.length;b<A;b++){const[_,T,w,N]=m[b];b===0&&y.moveTo(..._),y.bezierCurveTo(T[0],T[1],w[0],w[1],N[0],N[1])}return y}#D(m,y,b,A){const T=[],w=this.thickness/2;let N,O;for(const P of this.paths){N=[],O=[];for(let E=0,C=P.length;E<C;E++){const[L,X,q,Q]=P[E],K=m*(L[0]+y)+w,tt=A-m*(L[1]+b)-w,gt=m*(X[0]+y)+w,ct=A-m*(X[1]+b)-w,J=m*(q[0]+y)+w,I=A-m*(q[1]+b)-w,V=m*(Q[0]+y)+w,j=A-m*(Q[1]+b)-w;E===0&&(N.push(K,tt),O.push(K,tt)),N.push(gt,ct,J,I,V,j),this.#L(K,tt,gt,ct,J,I,V,j,4,O)}T.push({bezier:N,points:O})}return T}#L(m,y,b,A,_,T,w,N,O,P){if(this.#T(m,y,b,A,_,T,w,N)){P.push(w,N);return}for(let E=1;E<O-1;E++){const C=E/O,L=1-C;let X=C*m+L*b,q=C*y+L*A,Q=C*b+L*_,K=C*A+L*T;const tt=C*_+L*w,gt=C*T+L*N;X=C*X+L*Q,q=C*q+L*K,Q=C*Q+L*tt,K=C*K+L*gt,X=C*X+L*Q,q=C*q+L*K,P.push(X,q)}P.push(w,N)}#T(m,y,b,A,_,T,w,N){const P=(3*b-2*m-w)**2,E=(3*A-2*y-N)**2,C=(3*_-m-2*w)**2,L=(3*T-y-2*N)**2;return Math.max(P,C)+Math.max(E,L)<=10}#v(){let m=1/0,y=-1/0,b=1/0,A=-1/0;for(const _ of this.paths)for(const[T,w,N,O]of _){const P=i.Util.bezierBoundingBox(...T,...w,...N,...O);m=Math.min(m,P[0]),b=Math.min(b,P[1]),y=Math.max(y,P[2]),A=Math.max(A,P[3])}return[m,b,y,A]}#F(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#k(m=!1){if(this.isEmpty())return;if(!this.#r){this.#_();return}const y=this.#v(),b=this.#F();this.#n=Math.max(h,y[2]-y[0]),this.#e=Math.max(h,y[3]-y[1]);const A=Math.ceil(b+this.#n*this.scaleFactor),_=Math.ceil(b+this.#e*this.scaleFactor),[T,w]=this.parentDimensions;this.width=A/T,this.height=_/w,this.#t=A/_,this.#I();const N=this.translationX,O=this.translationY;this.translationX=-y[0],this.translationY=-y[1],this.#C(),this.#_(),this.#h=A,this.#d=_,this.setDims(A,_);const P=m?b/this.scaleFactor/2:0;this.translate(N-this.translationX-P,O-this.translationY-P)}#I(){const{style:m}=this.div;this.#t>=1?(m.minHeight=`${h}px`,m.minWidth=`${Math.round(this.#t*h)}px`):(m.minWidth=`${h}px`,m.minHeight=`${Math.round(h/this.#t)}px`)}static deserialize(m,y,b){const A=super.deserialize(m,y,b);A.thickness=m.thickness,A.color=i.Util.makeHexColor(...m.color),A.opacity=m.opacity;const[_,T]=A.pageDimensions,w=A.width*_,N=A.height*T,O=A.parentScale,P=m.thickness/2;A.#t=w/N,A.#r=!0,A.#h=Math.round(w),A.#d=Math.round(N);for(const{bezier:C}of m.paths){const L=[];A.paths.push(L);let X=O*(C[0]-P),q=O*(N-C[1]-P);for(let K=2,tt=C.length;K<tt;K+=6){const gt=O*(C[K]-P),ct=O*(N-C[K+1]-P),J=O*(C[K+2]-P),I=O*(N-C[K+3]-P),V=O*(C[K+4]-P),j=O*(N-C[K+5]-P);L.push([[X,q],[gt,ct],[J,I],[V,j]]),X=V,q=j}const Q=this.#O(L);A.bezierPath2D.push(Q)}const E=A.#v();return A.#n=Math.max(h,E[2]-E[0]),A.#e=Math.max(h,E[3]-E[1]),A.#S(w,N),A}serialize(){if(this.isEmpty())return null;const m=this.getRect(0,0),y=this.rotation%180===0?m[3]-m[1]:m[2]-m[0],b=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:b,thickness:this.thickness,opacity:this.opacity,paths:this.#D(this.scaleFactor/this.parentScale,this.translationX,this.translationY,y),pageIndex:this.pageIndex,rect:m,rotation:this.rotation}}}t.InkEditor=d}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const i=n(31);t.fitCurve=i}),(u=>{function t(A,_,T){if(!Array.isArray(A))throw new TypeError("First argument should be an array");if(A.forEach(P=>{if(!Array.isArray(P)||P.some(E=>typeof E!="number")||P.length!==A[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),A=A.filter((P,E)=>E===0||!P.every((C,L)=>C===A[E-1][L])),A.length<2)return[];const w=A.length,N=m(A[1],A[0]),O=m(A[w-2],A[w-1]);return n(A,N,O,_,T)}function n(A,_,T,w,N){var P,E,C,L,X,q,Q,K,tt,gt,ct,J,I;if(A.length===2)return J=y.vectorLen(y.subtract(A[0],A[1]))/3,P=[A[0],y.addArrays(A[0],y.mulItems(_,J)),y.addArrays(A[1],y.mulItems(T,J)),A[1]],[P];if(E=h(A),[P,L,q]=i(A,E,E,_,T,N),L===0||L<w)return[P];if(L<w*w)for(C=E,X=L,Q=q,I=0;I<20;I++){if(C=o(P,A,C),[P,L,q]=i(A,E,C,_,T,N),L<w)return[P];if(q===Q){let V=L/X;if(V>.9999&&V<1.0001)break}X=L,Q=q}return ct=[],K=y.subtract(A[q-1],A[q+1]),K.every(V=>V===0)&&(K=y.subtract(A[q-1],A[q]),[K[0],K[1]]=[-K[1],K[0]]),tt=y.normalize(K),gt=y.mulItems(tt,-1),ct=ct.concat(n(A.slice(0,q+1),_,tt,w,N)),ct=ct.concat(n(A.slice(q),gt,T,w,N)),ct}function i(A,_,T,w,N,O){var P,E,C;return P=a(A,T,w,N),[E,C]=p(A,P,_),O&&O({bez:P,points:A,params:_,maxErr:E,maxPoint:C}),[P,E,C]}function a(A,_,T,w){var N,O,P,E,C,L,X,q,Q,K,tt,gt,ct,J,I,V,j,M=A[0],S=A[A.length-1];for(N=[M,null,null,S],O=y.zeros_Xx2x2(_.length),ct=0,J=_.length;ct<J;ct++)V=_[ct],j=1-V,P=O[ct],P[0]=y.mulItems(T,3*V*(j*j)),P[1]=y.mulItems(w,3*j*(V*V));for(E=[[0,0],[0,0]],C=[0,0],ct=0,J=A.length;ct<J;ct++)V=_[ct],P=O[ct],E[0][0]+=y.dot(P[0],P[0]),E[0][1]+=y.dot(P[0],P[1]),E[1][0]+=y.dot(P[0],P[1]),E[1][1]+=y.dot(P[1],P[1]),I=y.subtract(A[ct],b.q([M,M,S,S],V)),C[0]+=y.dot(P[0],I),C[1]+=y.dot(P[1],I);return L=E[0][0]*E[1][1]-E[1][0]*E[0][1],X=E[0][0]*C[1]-E[1][0]*C[0],q=C[0]*E[1][1]-C[1]*E[0][1],Q=L===0?0:q/L,K=L===0?0:X/L,gt=y.vectorLen(y.subtract(M,S)),tt=1e-6*gt,Q<tt||K<tt?(N[1]=y.addArrays(M,y.mulItems(T,gt/3)),N[2]=y.addArrays(S,y.mulItems(w,gt/3))):(N[1]=y.addArrays(M,y.mulItems(T,Q)),N[2]=y.addArrays(S,y.mulItems(w,K))),N}function o(A,_,T){return T.map((w,N)=>l(A,_[N],w))}function l(A,_,T){var w=y.subtract(b.q(A,T),_),N=b.qprime(A,T),O=y.mulMatrix(w,N),P=y.sum(y.squareItems(N))+2*y.mulMatrix(w,b.qprimeprime(A,T));return P===0?T:T-O/P}function h(A){var _=[],T,w,N;return A.forEach((O,P)=>{T=P?w+y.vectorLen(y.subtract(O,N)):0,_.push(T),w=T,N=O}),_=_.map(O=>O/w),_}function p(A,_,T){var w,N,O,P,E,C,L,X;N=0,O=Math.floor(A.length/2);const q=d(_,10);for(E=0,C=A.length;E<C;E++)L=A[E],X=f(_,T[E],q,10),P=y.subtract(b.q(_,X),L),w=P[0]*P[0]+P[1]*P[1],w>N&&(N=w,O=E);return[N,O]}var d=function(A,_){for(var T,w=[0],N=A[0],O=0,P=1;P<=_;P++)T=b.q(A,P/_),O+=y.vectorLen(y.subtract(T,N)),w.push(O),N=T;return w=w.map(E=>E/O),w};function f(A,_,T,w){if(_<0)return 0;if(_>1)return 1;for(var N,O,P,E,C,L=1;L<=w;L++)if(_<=T[L]){E=(L-1)/w,P=L/w,O=T[L-1],N=T[L],C=(_-O)/(N-O)*(P-E)+E;break}return C}function m(A,_){return y.normalize(y.subtract(A,_))}class y{static zeros_Xx2x2(_){for(var T=[];_--;)T.push([0,0]);return T}static mulItems(_,T){return _.map(w=>w*T)}static mulMatrix(_,T){return _.reduce((w,N,O)=>w+N*T[O],0)}static subtract(_,T){return _.map((w,N)=>w-T[N])}static addArrays(_,T){return _.map((w,N)=>w+T[N])}static addItems(_,T){return _.map(w=>w+T)}static sum(_){return _.reduce((T,w)=>T+w)}static dot(_,T){return y.mulMatrix(_,T)}static vectorLen(_){return Math.hypot(..._)}static divItems(_,T){return _.map(w=>w/T)}static squareItems(_){return _.map(T=>T*T)}static normalize(_){return this.divItems(_,this.vectorLen(_))}}class b{static q(_,T){var w=1-T,N=y.mulItems(_[0],w*w*w),O=y.mulItems(_[1],3*w*w*T),P=y.mulItems(_[2],3*w*T*T),E=y.mulItems(_[3],T*T*T);return y.addArrays(y.addArrays(N,O),y.addArrays(P,E))}static qprime(_,T){var w=1-T,N=y.mulItems(y.subtract(_[1],_[0]),3*w*w),O=y.mulItems(y.subtract(_[2],_[1]),6*w*T),P=y.mulItems(y.subtract(_[3],_[2]),3*T*T);return y.addArrays(y.addArrays(N,O),P)}static qprimeprime(_,T){return y.addArrays(y.mulItems(y.addArrays(y.subtract(_[2],y.mulItems(_[1],2)),_[0]),6*(1-T)),y.mulItems(y.addArrays(y.subtract(_[3],y.mulItems(_[2],2)),_[1]),6*T))}}u.exports=t,u.exports.fitCubic=n,u.exports.createTangent=m}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var i=n(1),a=n(6),o=n(3),l=n(33),h=n(34);const p=1e3,d=9,f=new WeakSet;function m(U){return{width:U[2]-U[0],height:U[3]-U[1]}}class y{static create(x){switch(x.data.annotationType){case i.AnnotationType.LINK:return new A(x);case i.AnnotationType.TEXT:return new _(x);case i.AnnotationType.WIDGET:switch(x.data.fieldType){case"Tx":return new w(x);case"Btn":return x.data.radioButton?new O(x):x.data.checkBox?new N(x):new P(x);case"Ch":return new E(x)}return new T(x);case i.AnnotationType.POPUP:return new C(x);case i.AnnotationType.FREETEXT:return new X(x);case i.AnnotationType.LINE:return new q(x);case i.AnnotationType.SQUARE:return new Q(x);case i.AnnotationType.CIRCLE:return new K(x);case i.AnnotationType.POLYLINE:return new tt(x);case i.AnnotationType.CARET:return new ct(x);case i.AnnotationType.INK:return new J(x);case i.AnnotationType.POLYGON:return new gt(x);case i.AnnotationType.HIGHLIGHT:return new I(x);case i.AnnotationType.UNDERLINE:return new V(x);case i.AnnotationType.SQUIGGLY:return new j(x);case i.AnnotationType.STRIKEOUT:return new M(x);case i.AnnotationType.STAMP:return new S(x);case i.AnnotationType.FILEATTACHMENT:return new k(x);default:return new b(x)}}}class b{constructor(x,{isRenderable:R=!1,ignoreBorder:F=!1,createQuadrilaterals:G=!1}={}){this.isRenderable=R,this.data=x.data,this.layer=x.layer,this.page=x.page,this.viewport=x.viewport,this.linkService=x.linkService,this.downloadManager=x.downloadManager,this.imageResourcesPath=x.imageResourcesPath,this.renderForms=x.renderForms,this.svgFactory=x.svgFactory,this.annotationStorage=x.annotationStorage,this.enableScripting=x.enableScripting,this.hasJSActions=x.hasJSActions,this._fieldObjects=x.fieldObjects,R&&(this.container=this._createContainer(F)),G&&(this.quadrilaterals=this._createQuadrilaterals(F))}_createContainer(x=!1){const{data:R,page:F,viewport:G}=this,z=document.createElement("section");z.setAttribute("data-annotation-id",R.id);const{pageWidth:Y,pageHeight:$,pageX:at,pageY:st}=G.rawDims,{width:ot,height:bt}=m(R.rect),dt=i.Util.normalizeRect([R.rect[0],F.view[3]-R.rect[1]+F.view[1],R.rect[2],F.view[3]-R.rect[3]+F.view[1]]);if(!x&&R.borderStyle.width>0){z.style.borderWidth=`${R.borderStyle.width}px`;const At=R.borderStyle.horizontalCornerRadius,St=R.borderStyle.verticalCornerRadius;if(At>0||St>0){const _t=`calc(${At}px * var(--scale-factor)) / calc(${St}px * var(--scale-factor))`;z.style.borderRadius=_t}else if(this instanceof O){const _t=`calc(${ot}px * var(--scale-factor)) / calc(${bt}px * var(--scale-factor))`;z.style.borderRadius=_t}switch(R.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:z.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:z.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:z.style.borderBottomStyle="solid";break}const Tt=R.borderColor||null;Tt?z.style.borderColor=i.Util.makeHexColor(Tt[0]|0,Tt[1]|0,Tt[2]|0):z.style.borderWidth=0}z.style.left=`${100*(dt[0]-at)/Y}%`,z.style.top=`${100*(dt[1]-st)/$}%`;const{rotation:vt}=R;return R.hasOwnCanvas||vt===0?(z.style.width=`${100*ot/Y}%`,z.style.height=`${100*bt/$}%`):this.setRotation(vt,z),z}setRotation(x,R=this.container){const{pageWidth:F,pageHeight:G}=this.viewport.rawDims,{width:z,height:Y}=m(this.data.rect);let $,at;x%180===0?($=100*z/F,at=100*Y/G):($=100*Y/F,at=100*z/G),R.style.width=`${$}%`,R.style.height=`${at}%`,R.setAttribute("data-main-rotation",(360-x)%360)}get _commonActions(){const x=(R,F,G)=>{const z=G.detail[R];G.target.style[F]=l.ColorConverters[`${z[0]}_HTML`](z.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:R=>{const F=R.detail.display%2===1;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:F,print:R.detail.display===0||R.detail.display===3})},print:R=>{this.annotationStorage.setValue(this.data.id,{print:R.detail.print})},hidden:R=>{this.container.style.visibility=R.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:R.detail.hidden})},focus:R=>{setTimeout(()=>R.target.focus({preventScroll:!1}),0)},userName:R=>{R.target.title=R.detail.userName},readonly:R=>{R.detail.readonly?R.target.setAttribute("readonly",""):R.target.removeAttribute("readonly")},required:R=>{this._setRequired(R.target,R.detail.required)},bgColor:R=>{x("bgColor","backgroundColor",R)},fillColor:R=>{x("fillColor","backgroundColor",R)},fgColor:R=>{x("fgColor","color",R)},textColor:R=>{x("textColor","color",R)},borderColor:R=>{x("borderColor","borderColor",R)},strokeColor:R=>{x("strokeColor","borderColor",R)},rotation:R=>{const F=R.detail.rotation;this.setRotation(F),this.annotationStorage.setValue(this.data.id,{rotation:F})}})}_dispatchEventFromSandbox(x,R){const F=this._commonActions;for(const G of Object.keys(R.detail))(x[G]||F[G])?.(R)}_setDefaultPropertiesFromJS(x){if(!this.enableScripting)return;const R=this.annotationStorage.getRawValue(this.data.id);if(!R)return;const F=this._commonActions;for(const[G,z]of Object.entries(R)){const Y=F[G];if(Y){const $={detail:{[G]:z},target:x};Y($),delete R[G]}}}_createQuadrilaterals(x=!1){if(!this.data.quadPoints)return null;const R=[],F=this.data.rect;for(const G of this.data.quadPoints)this.data.rect=[G[2].x,G[2].y,G[1].x,G[1].y],R.push(this._createContainer(x));return this.data.rect=F,R}_createPopup(x,R){let F=this.container;this.quadrilaterals&&(x=x||this.quadrilaterals,F=this.quadrilaterals[0]),x||(x=document.createElement("div"),x.className="popupTriggerArea",F.append(x));const z=new L({container:F,trigger:x,color:R.color,titleObj:R.titleObj,modificationDate:R.modificationDate,contentsObj:R.contentsObj,richText:R.richText,hideWrapper:!0}).render();z.style.left="100%",F.append(z)}_renderQuadrilaterals(x){for(const R of this.quadrilaterals)R.className=x;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(x,R=null){const F=[];if(this._fieldObjects){const G=this._fieldObjects[x];if(G)for(const{page:z,id:Y,exportValues:$}of G){if(z===-1||Y===R)continue;const at=typeof $=="string"?$:null,st=document.querySelector(`[data-element-id="${Y}"]`);if(st&&!f.has(st)){(0,i.warn)(`_getElementsByName - element not allowed: ${Y}`);continue}F.push({id:Y,exportValue:at,domElement:st})}return F}for(const G of document.getElementsByName(x)){const{exportValue:z}=G,Y=G.getAttribute("data-element-id");Y!==R&&f.has(G)&&F.push({id:Y,exportValue:z,domElement:G})}return F}}class A extends b{constructor(x,R=null){super(x,{isRenderable:!0,ignoreBorder:!!R?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=x.data.isTooltipOnly}render(){const{data:x,linkService:R}=this,F=document.createElement("a");F.setAttribute("data-element-id",x.id);let G=!1;return x.url?(R.addLinkAttributes(F,x.url,x.newWindow),G=!0):x.action?(this._bindNamedAction(F,x.action),G=!0):x.attachment?(this._bindAttachment(F,x.attachment),G=!0):x.setOCGState?(this.#e(F,x.setOCGState),G=!0):x.dest?(this._bindLink(F,x.dest),G=!0):(x.actions&&(x.actions.Action||x.actions["Mouse Up"]||x.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(F,x),G=!0),x.resetForm?(this._bindResetFormAction(F,x.resetForm),G=!0):this.isTooltipOnly&&!G&&(this._bindLink(F,""),G=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((z,Y)=>{const $=Y===0?F:F.cloneNode();return z.append($),z}):(this.container.className="linkAnnotation",G&&this.container.append(F),this.container)}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(x,R){x.href=this.linkService.getDestinationHash(R),x.onclick=()=>(R&&this.linkService.goToDestination(R),!1),(R||R==="")&&this.#t()}_bindNamedAction(x,R){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.linkService.executeNamedAction(R),!1),this.#t()}_bindAttachment(x,R){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,R.content,R.filename),!1),this.#t()}#e(x,R){x.href=this.linkService.getAnchorUrl(""),x.onclick=()=>(this.linkService.executeSetOCGState(R),!1),this.#t()}_bindJSAction(x,R){x.href=this.linkService.getAnchorUrl("");const F=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const G of Object.keys(R.actions)){const z=F.get(G);z&&(x[z]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R.id,name:G}}),!1))}x.onclick||(x.onclick=()=>!1),this.#t()}_bindResetFormAction(x,R){const F=x.onclick;if(F||(x.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),F||(x.onclick=()=>!1);return}x.onclick=()=>{F?.();const{fields:G,refs:z,include:Y}=R,$=[];if(G.length!==0||z.length!==0){const ot=new Set(z);for(const bt of G){const dt=this._fieldObjects[bt]||[];for(const{id:vt}of dt)ot.add(vt)}for(const bt of Object.values(this._fieldObjects))for(const dt of bt)ot.has(dt.id)===Y&&$.push(dt)}else for(const ot of Object.values(this._fieldObjects))$.push(...ot);const at=this.annotationStorage,st=[];for(const ot of $){const{id:bt}=ot;switch(st.push(bt),ot.type){case"text":{const vt=ot.defaultValue||"";at.setValue(bt,{value:vt});break}case"checkbox":case"radiobutton":{const vt=ot.defaultValue===ot.exportValues;at.setValue(bt,{value:vt});break}case"combobox":case"listbox":{const vt=ot.defaultValue||"";at.setValue(bt,{value:vt});break}default:continue}const dt=document.querySelector(`[data-element-id="${bt}"]`);if(dt){if(!f.has(dt)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${bt}`);continue}}else continue;dt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:st,name:"ResetForm"}}),!1}}}class _ extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R})}render(){this.container.className="textAnnotation";const x=document.createElement("img");return x.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",x.alt="[{{type}} Annotation]",x.dataset.l10nId="text_annotation_type",x.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(x,this.data),this.container.append(x),this.container}}class T extends b{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(x){const{isWin:R,isMac:F}=i.FeatureTest.platform;return R&&x.ctrlKey||F&&x.metaKey}_setEventListener(x,R,F,G){R.includes("mouse")?x.addEventListener(R,z=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:G(z),shift:z.shiftKey,modifier:this._getKeyModifier(z)}})}):x.addEventListener(R,z=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:G(z)}})})}_setEventListeners(x,R,F){for(const[G,z]of R)(z==="Action"||this.data.actions?.[z])&&this._setEventListener(x,G,z,F)}_setBackgroundColor(x){const R=this.data.backgroundColor||null;x.style.backgroundColor=R===null?"transparent":i.Util.makeHexColor(R[0],R[1],R[2])}_setTextStyle(x){const R=["left","center","right"],{fontColor:F}=this.data.defaultAppearanceData,G=this.data.defaultAppearanceData.fontSize||d,z=x.style;let Y;const $=2,at=st=>Math.round(10*st)/10;if(this.data.multiLine){const st=Math.abs(this.data.rect[3]-this.data.rect[1]-$),ot=Math.round(st/(i.LINE_FACTOR*G))||1,bt=st/ot;Y=Math.min(G,at(bt/i.LINE_FACTOR))}else{const st=Math.abs(this.data.rect[3]-this.data.rect[1]-$);Y=Math.min(G,at(st/i.LINE_FACTOR))}z.fontSize=`calc(${Y}px * var(--scale-factor))`,z.color=i.Util.makeHexColor(F[0],F[1],F[2]),this.data.textAlignment!==null&&(z.textAlign=R[this.data.textAlignment])}_setRequired(x,R){R?x.setAttribute("required",!0):x.removeAttribute("required"),x.setAttribute("aria-required",R)}}class w extends T{constructor(x){const R=x.renderForms||!x.data.hasAppearance&&!!x.data.fieldValue;super(x,{isRenderable:R})}setPropertyOnSiblings(x,R,F,G){const z=this.annotationStorage;for(const Y of this._getElementsByName(x.name,x.id))Y.domElement&&(Y.domElement[R]=F),z.setValue(Y.id,{[G]:F})}render(){const x=this.annotationStorage,R=this.data.id;this.container.className="textWidgetAnnotation";let F=null;if(this.renderForms){const G=x.getValue(R,{value:this.data.fieldValue});let z=G.formattedValue||G.value||"";const Y=x.getValue(R,{charLimit:this.data.maxLen}).charLimit;Y&&z.length>Y&&(z=z.slice(0,Y));const $={userValue:z,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(F=document.createElement("textarea"),F.textContent=z,this.data.doNotScroll&&(F.style.overflowY="hidden")):(F=document.createElement("input"),F.type="text",F.setAttribute("value",z),this.data.doNotScroll&&(F.style.overflowX="hidden")),f.add(F),F.setAttribute("data-element-id",R),F.disabled=this.data.readOnly,F.name=this.data.fieldName,F.tabIndex=p,this._setRequired(F,this.data.required),Y&&(F.maxLength=Y),F.addEventListener("input",st=>{x.setValue(R,{value:st.target.value}),this.setPropertyOnSiblings(F,"value",st.target.value,"value")}),F.addEventListener("resetform",st=>{const ot=this.data.defaultFieldValue??"";F.value=$.userValue=ot,$.formattedValue=null});let at=st=>{const{formattedValue:ot}=$;ot!=null&&(st.target.value=ot),st.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){F.addEventListener("focus",ot=>{const{target:bt}=ot;$.userValue&&(bt.value=$.userValue),$.lastCommittedValue=bt.value,$.commitKey=1}),F.addEventListener("updatefromsandbox",ot=>{const bt={value(dt){$.userValue=dt.detail.value??"",x.setValue(R,{value:$.userValue.toString()}),dt.target.value=$.userValue},formattedValue(dt){const{formattedValue:vt}=dt.detail;$.formattedValue=vt,vt!=null&&dt.target!==document.activeElement&&(dt.target.value=vt),x.setValue(R,{formattedValue:vt})},selRange(dt){dt.target.setSelectionRange(...dt.detail.selRange)},charLimit:dt=>{const{charLimit:vt}=dt.detail,{target:At}=dt;if(vt===0){At.removeAttribute("maxLength");return}At.setAttribute("maxLength",vt);let St=$.userValue;!St||St.length<=vt||(St=St.slice(0,vt),At.value=$.userValue=St,x.setValue(R,{value:St}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:St,willCommit:!0,commitKey:1,selStart:At.selectionStart,selEnd:At.selectionEnd}}))}};this._dispatchEventFromSandbox(bt,ot)}),F.addEventListener("keydown",ot=>{$.commitKey=1;let bt=-1;if(ot.key==="Escape"?bt=0:ot.key==="Enter"&&!this.data.multiLine?bt=2:ot.key==="Tab"&&($.commitKey=3),bt===-1)return;const{value:dt}=ot.target;$.lastCommittedValue!==dt&&($.lastCommittedValue=dt,$.userValue=dt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:dt,willCommit:!0,commitKey:bt,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}))});const st=at;at=null,F.addEventListener("blur",ot=>{if(!ot.relatedTarget)return;const{value:bt}=ot.target;$.userValue=bt,$.lastCommittedValue!==bt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:bt,willCommit:!0,commitKey:$.commitKey,selStart:ot.target.selectionStart,selEnd:ot.target.selectionEnd}}),st(ot)}),this.data.actions?.Keystroke&&F.addEventListener("beforeinput",ot=>{$.lastCommittedValue=null;const{data:bt,target:dt}=ot,{value:vt,selectionStart:At,selectionEnd:St}=dt;let Tt=At,_t=St;switch(ot.inputType){case"deleteWordBackward":{const It=vt.substring(0,At).match(/\w*[^\w]*$/);It&&(Tt-=It[0].length);break}case"deleteWordForward":{const It=vt.substring(At).match(/^[^\w]*\w*/);It&&(_t+=It[0].length);break}case"deleteContentBackward":At===St&&(Tt-=1);break;case"deleteContentForward":At===St&&(_t+=1);break}ot.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:vt,change:bt||"",willCommit:!1,selStart:Tt,selEnd:_t}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.value)}if(at&&F.addEventListener("blur",at),this.data.comb){const ot=(this.data.rect[2]-this.data.rect[0])/Y;F.classList.add("comb"),F.style.letterSpacing=`calc(${ot}px * var(--scale-factor) - 1ch)`}}else F=document.createElement("div"),F.textContent=this.data.fieldValue,F.style.verticalAlign="middle",F.style.display="table-cell";return this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class N extends T{constructor(x){super(x,{isRenderable:x.renderForms})}render(){const x=this.annotationStorage,R=this.data,F=R.id;let G=x.getValue(F,{value:R.exportValue===R.fieldValue}).value;typeof G=="string"&&(G=G!=="Off",x.setValue(F,{value:G})),this.container.className="buttonWidgetAnnotation checkBox";const z=document.createElement("input");return f.add(z),z.setAttribute("data-element-id",F),z.disabled=R.readOnly,this._setRequired(z,this.data.required),z.type="checkbox",z.name=R.fieldName,G&&z.setAttribute("checked",!0),z.setAttribute("exportValue",R.exportValue),z.tabIndex=p,z.addEventListener("change",Y=>{const{name:$,checked:at}=Y.target;for(const st of this._getElementsByName($,F)){const ot=at&&st.exportValue===R.exportValue;st.domElement&&(st.domElement.checked=ot),x.setValue(st.id,{value:ot})}x.setValue(F,{value:at})}),z.addEventListener("resetform",Y=>{const $=R.defaultFieldValue||"Off";Y.target.checked=$===R.exportValue}),this.enableScripting&&this.hasJSActions&&(z.addEventListener("updatefromsandbox",Y=>{const $={value(at){at.target.checked=at.detail.value!=="Off",x.setValue(F,{value:at.target.checked})}};this._dispatchEventFromSandbox($,Y)}),this._setEventListeners(z,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class O extends T{constructor(x){super(x,{isRenderable:x.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const x=this.annotationStorage,R=this.data,F=R.id;let G=x.getValue(F,{value:R.fieldValue===R.buttonValue}).value;typeof G=="string"&&(G=G!==R.buttonValue,x.setValue(F,{value:G}));const z=document.createElement("input");if(f.add(z),z.setAttribute("data-element-id",F),z.disabled=R.readOnly,this._setRequired(z,this.data.required),z.type="radio",z.name=R.fieldName,G&&z.setAttribute("checked",!0),z.tabIndex=p,z.addEventListener("change",Y=>{const{name:$,checked:at}=Y.target;for(const st of this._getElementsByName($,F))x.setValue(st.id,{value:!1});x.setValue(F,{value:at})}),z.addEventListener("resetform",Y=>{const $=R.defaultFieldValue;Y.target.checked=$!=null&&$===R.buttonValue}),this.enableScripting&&this.hasJSActions){const Y=R.buttonValue;z.addEventListener("updatefromsandbox",$=>{const at={value:st=>{const ot=Y===st.detail.value;for(const bt of this._getElementsByName(st.target.name)){const dt=ot&&bt.id===F;bt.domElement&&(bt.domElement.checked=dt),x.setValue(bt.id,{value:dt})}}};this._dispatchEventFromSandbox(at,$)}),this._setEventListeners(z,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)}return this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class P extends A{constructor(x){super(x,{ignoreBorder:x.data.hasAppearance})}render(){const x=super.render();x.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(x.title=this.data.alternativeText);const R=x.lastChild;return this.enableScripting&&this.hasJSActions&&R&&(this._setDefaultPropertiesFromJS(R),R.addEventListener("updatefromsandbox",F=>{this._dispatchEventFromSandbox({},F)})),x}}class E extends T{constructor(x){super(x,{isRenderable:x.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const x=this.annotationStorage,R=this.data.id,F=x.getValue(R,{value:this.data.fieldValue}),G=document.createElement("select");f.add(G),G.setAttribute("data-element-id",R),G.disabled=this.data.readOnly,this._setRequired(G,this.data.required),G.name=this.data.fieldName,G.tabIndex=p;let z=this.data.combo&&this.data.options.length>0;this.data.combo||(G.size=this.data.options.length,this.data.multiSelect&&(G.multiple=!0)),G.addEventListener("resetform",ot=>{const bt=this.data.defaultFieldValue;for(const dt of G.options)dt.selected=dt.value===bt});for(const ot of this.data.options){const bt=document.createElement("option");bt.textContent=ot.displayValue,bt.value=ot.exportValue,F.value.includes(ot.exportValue)&&(bt.setAttribute("selected",!0),z=!1),G.append(bt)}let Y=null;if(z){const ot=document.createElement("option");ot.value=" ",ot.setAttribute("hidden",!0),ot.setAttribute("selected",!0),G.prepend(ot),Y=()=>{ot.remove(),G.removeEventListener("input",Y),Y=null},G.addEventListener("input",Y)}const $=ot=>{const bt=ot?"value":"textContent",{options:dt,multiple:vt}=G;return vt?Array.prototype.filter.call(dt,At=>At.selected).map(At=>At[bt]):dt.selectedIndex===-1?null:dt[dt.selectedIndex][bt]};let at=$(!1);const st=ot=>{const bt=ot.target.options;return Array.prototype.map.call(bt,dt=>({displayValue:dt.textContent,exportValue:dt.value}))};return this.enableScripting&&this.hasJSActions?(G.addEventListener("updatefromsandbox",ot=>{const bt={value(dt){Y?.();const vt=dt.detail.value,At=new Set(Array.isArray(vt)?vt:[vt]);for(const St of G.options)St.selected=At.has(St.value);x.setValue(R,{value:$(!0)}),at=$(!1)},multipleSelection(dt){G.multiple=!0},remove(dt){const vt=G.options,At=dt.detail.remove;vt[At].selected=!1,G.remove(At),vt.length>0&&Array.prototype.findIndex.call(vt,Tt=>Tt.selected)===-1&&(vt[0].selected=!0),x.setValue(R,{value:$(!0),items:st(dt)}),at=$(!1)},clear(dt){for(;G.length!==0;)G.remove(0);x.setValue(R,{value:null,items:[]}),at=$(!1)},insert(dt){const{index:vt,displayValue:At,exportValue:St}=dt.detail.insert,Tt=G.children[vt],_t=document.createElement("option");_t.textContent=At,_t.value=St,Tt?Tt.before(_t):G.append(_t),x.setValue(R,{value:$(!0),items:st(dt)}),at=$(!1)},items(dt){const{items:vt}=dt.detail;for(;G.length!==0;)G.remove(0);for(const At of vt){const{displayValue:St,exportValue:Tt}=At,_t=document.createElement("option");_t.textContent=St,_t.value=Tt,G.append(_t)}G.options.length>0&&(G.options[0].selected=!0),x.setValue(R,{value:$(!0),items:st(dt)}),at=$(!1)},indices(dt){const vt=new Set(dt.detail.indices);for(const At of dt.target.options)At.selected=vt.has(At.index);x.setValue(R,{value:$(!0)}),at=$(!1)},editable(dt){dt.target.disabled=!dt.detail.editable}};this._dispatchEventFromSandbox(bt,ot)}),G.addEventListener("input",ot=>{const bt=$(!0);x.setValue(R,{value:bt}),ot.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:at,changeEx:bt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(G,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ot=>ot.target.value)):G.addEventListener("input",function(ot){x.setValue(R,{value:$(!0)})}),this.data.combo&&this._setTextStyle(G),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class C extends b{static IGNORE_TYPES=new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]);constructor(x){const{data:R}=x,F=!C.IGNORE_TYPES.has(R.parentType)&&!!(R.titleObj?.str||R.contentsObj?.str||R.richText?.str);super(x,{isRenderable:F})}render(){this.container.className="popupAnnotation";const x=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(x.length===0)return this.container;const R=new L({container:this.container,trigger:Array.from(x),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),F=this.page,G=i.Util.normalizeRect([this.data.parentRect[0],F.view[3]-this.data.parentRect[1]+F.view[1],this.data.parentRect[2],F.view[3]-this.data.parentRect[3]+F.view[1]]),z=G[0]+this.data.parentRect[2]-this.data.parentRect[0],Y=G[1],{pageWidth:$,pageHeight:at,pageX:st,pageY:ot}=this.viewport.rawDims;return this.container.style.left=`${100*(z-st)/$}%`,this.container.style.top=`${100*(Y-ot)/at}%`,this.container.append(R.render()),this.container}}class L{constructor(x){this.container=x.container,this.trigger=x.trigger,this.color=x.color,this.titleObj=x.titleObj,this.modificationDate=x.modificationDate,this.contentsObj=x.contentsObj,this.richText=x.richText,this.hideWrapper=x.hideWrapper||!1,this.pinned=!1}render(){const R=document.createElement("div");R.className="popupWrapper",this.hideElement=this.hideWrapper?R:this.container,this.hideElement.hidden=!0;const F=document.createElement("div");F.className="popup";const G=this.color;if(G){const $=.7*(255-G[0])+G[0],at=.7*(255-G[1])+G[1],st=.7*(255-G[2])+G[2];F.style.backgroundColor=i.Util.makeHexColor($|0,at|0,st|0)}const z=document.createElement("h1");z.dir=this.titleObj.dir,z.textContent=this.titleObj.str,F.append(z);const Y=a.PDFDateString.toDateObject(this.modificationDate);if(Y){const $=document.createElement("span");$.className="popupDate",$.textContent="{{date}}, {{time}}",$.dataset.l10nId="annotation_date_string",$.dataset.l10nArgs=JSON.stringify({date:Y.toLocaleDateString(),time:Y.toLocaleTimeString()}),F.append($)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))h.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:F}),F.lastChild.className="richText popupContent";else{const $=this._formatContents(this.contentsObj);F.append($)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const $ of this.trigger)$.addEventListener("click",this._toggle.bind(this)),$.addEventListener("mouseover",this._show.bind(this,!1)),$.addEventListener("mouseout",this._hide.bind(this,!1));return F.addEventListener("click",this._hide.bind(this,!0)),R.append(F),R}_formatContents({str:x,dir:R}){const F=document.createElement("p");F.className="popupContent",F.dir=R;const G=x.split(/(?:\r\n?|\n)/);for(let z=0,Y=G.length;z<Y;++z){const $=G[z];F.append(document.createTextNode($)),z<Y-1&&F.append(document.createElement("br"))}return F}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(x=!1){x&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(x=!0){x&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class X extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0}),this.textContent=x.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const x=document.createElement("div");x.className="annotationTextContent",x.setAttribute("role","comment");for(const R of this.textContent){const F=document.createElement("span");F.textContent=R,x.append(F)}this.container.append(x)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class q extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const x=this.data,{width:R,height:F}=m(x.rect),G=this.svgFactory.create(R,F,!0),z=this.svgFactory.createElement("svg:line");return z.setAttribute("x1",x.rect[2]-x.lineCoordinates[0]),z.setAttribute("y1",x.rect[3]-x.lineCoordinates[1]),z.setAttribute("x2",x.rect[2]-x.lineCoordinates[2]),z.setAttribute("y2",x.rect[3]-x.lineCoordinates[3]),z.setAttribute("stroke-width",x.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),G.append(z),this.container.append(G),this._createPopup(z,x),this.container}}class Q extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const x=this.data,{width:R,height:F}=m(x.rect),G=this.svgFactory.create(R,F,!0),z=x.borderStyle.width,Y=this.svgFactory.createElement("svg:rect");return Y.setAttribute("x",z/2),Y.setAttribute("y",z/2),Y.setAttribute("width",R-z),Y.setAttribute("height",F-z),Y.setAttribute("stroke-width",z||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),G.append(Y),this.container.append(G),this._createPopup(Y,x),this.container}}class K extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const x=this.data,{width:R,height:F}=m(x.rect),G=this.svgFactory.create(R,F,!0),z=x.borderStyle.width,Y=this.svgFactory.createElement("svg:ellipse");return Y.setAttribute("cx",R/2),Y.setAttribute("cy",F/2),Y.setAttribute("rx",R/2-z/2),Y.setAttribute("ry",F/2-z/2),Y.setAttribute("stroke-width",z||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),G.append(Y),this.container.append(G),this._createPopup(Y,x),this.container}}class tt extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const x=this.data,{width:R,height:F}=m(x.rect),G=this.svgFactory.create(R,F,!0);let z=[];for(const $ of x.vertices){const at=$.x-x.rect[0],st=x.rect[3]-$.y;z.push(at+","+st)}z=z.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);return Y.setAttribute("points",z),Y.setAttribute("stroke-width",x.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),G.append(Y),this.container.append(G),this._createPopup(Y,x),this.container}}class gt extends tt{constructor(x){super(x),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ct extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class J extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const x=this.data,{width:R,height:F}=m(x.rect),G=this.svgFactory.create(R,F,!0);for(const z of x.inkLists){let Y=[];for(const at of z){const st=at.x-x.rect[0],ot=x.rect[3]-at.y;Y.push(`${st},${ot}`)}Y=Y.join(" ");const $=this.svgFactory.createElement(this.svgElementName);$.setAttribute("points",Y),$.setAttribute("stroke-width",x.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),this._createPopup($,x),G.append($)}return this.container.append(G),this.container}}class I extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class V extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class j extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class M extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class S extends b{constructor(x){const R=!!(x.data.hasPopup||x.data.titleObj?.str||x.data.contentsObj?.str||x.data.richText?.str);super(x,{isRenderable:R,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class k extends b{constructor(x){super(x,{isRenderable:!0});const{filename:R,content:F}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(R,!0),this.content=F,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:R,content:F})}render(){this.container.className="fileAttachmentAnnotation";let x;return this.data.hasAppearance?x=document.createElement("div"):(x=document.createElement("img"),x.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),x.className="popupTriggerArea",x.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(x,this.data),this.container.append(x),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class H{static#t(x,R,F,G){const z=x.firstChild||x;z.id=`${a.AnnotationPrefix}${R}`,F.append(x),G?.moveElementInDOM(F,x,z,!1)}static render(x){const{annotations:R,div:F,viewport:G,accessibilityManager:z}=x;(0,a.setLayerDimensions)(F,G);const Y={data:null,layer:F,page:x.page,viewport:G,linkService:x.linkService,downloadManager:x.downloadManager,imageResourcesPath:x.imageResourcesPath||"",renderForms:x.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:x.annotationStorage||new o.AnnotationStorage,enableScripting:x.enableScripting===!0,hasJSActions:x.hasJSActions,fieldObjects:x.fieldObjects};let $=0;for(const at of R){if(at.annotationType!==i.AnnotationType.POPUP){const{width:bt,height:dt}=m(at.rect);if(bt<=0||dt<=0)continue}Y.data=at;const st=y.create(Y);if(!st.isRenderable)continue;const ot=st.render();if(at.hidden&&(ot.style.visibility="hidden"),Array.isArray(ot))for(const bt of ot)bt.style.zIndex=$++,H.#t(bt,at.id,F,z);else ot.style.zIndex=$++,st instanceof C?F.prepend(ot):H.#t(ot,at.id,F,z)}this.#e(F,x.annotationCanvasMap)}static update(x){const{annotationCanvasMap:R,div:F,viewport:G}=x;(0,a.setLayerDimensions)(F,{rotation:G.rotation}),this.#e(F,R),F.hidden=!1}static#e(x,R){if(R){for(const[F,G]of R){const z=x.querySelector(`[data-annotation-id="${F}"]`);if(!z)continue;const{firstChild:Y}=z;Y?Y.nodeName==="CANVAS"?Y.replaceWith(G):Y.before(G):z.append(G)}R.clear()}}}t.AnnotationLayer=H}),((u,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([o,l,h,p]){return["G",1-Math.min(1,.3*o+.59*h+.11*l+p)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_HTML([o]){const l=n(o);return`#${l}${l}${l}`}static RGB_G([o,l,h]){return["G",.3*o+.59*l+.11*h]}static RGB_HTML([o,l,h]){const p=n(o),d=n(l),f=n(h);return`#${p}${d}${f}`}static T_HTML(){return"#00000000"}static CMYK_RGB([o,l,h,p]){return["RGB",1-Math.min(1,o+p),1-Math.min(1,h+p),1-Math.min(1,l+p)]}static CMYK_HTML(o){const l=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(l)}static RGB_CMYK([o,l,h]){const p=1-o,d=1-l,f=1-h,m=Math.min(p,d,f);return["CMYK",p,d,f,m]}}t.ColorConverters=i}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=n(19);class a{static setupStorage(l,h,p,d,f){const m=d.getValue(h,{value:null});switch(p.name){case"textarea":if(m.value!==null&&(l.textContent=m.value),f==="print")break;l.addEventListener("input",y=>{d.setValue(h,{value:y.target.value})});break;case"input":if(p.attributes.type==="radio"||p.attributes.type==="checkbox"){if(m.value===p.attributes.xfaOn?l.setAttribute("checked",!0):m.value===p.attributes.xfaOff&&l.removeAttribute("checked"),f==="print")break;l.addEventListener("change",y=>{d.setValue(h,{value:y.target.checked?y.target.getAttribute("xfaOn"):y.target.getAttribute("xfaOff")})})}else{if(m.value!==null&&l.setAttribute("value",m.value),f==="print")break;l.addEventListener("input",y=>{d.setValue(h,{value:y.target.value})})}break;case"select":if(m.value!==null)for(const y of p.children)y.attributes.value===m.value&&(y.attributes.selected=!0);l.addEventListener("input",y=>{const b=y.target.options,A=b.selectedIndex===-1?"":b[b.selectedIndex].value;d.setValue(h,{value:A})});break}}static setAttributes({html:l,element:h,storage:p=null,intent:d,linkService:f}){const{attributes:m}=h,y=l instanceof HTMLAnchorElement;m.type==="radio"&&(m.name=`${m.name}-${d}`);for(const[b,A]of Object.entries(m))if(A!=null)switch(b){case"class":A.length&&l.setAttribute(b,A.join(" "));break;case"dataId":break;case"id":l.setAttribute("data-element-id",A);break;case"style":Object.assign(l.style,A);break;case"textContent":l.textContent=A;break;default:(!y||b!=="href"&&b!=="newWindow")&&l.setAttribute(b,A)}y&&f.addLinkAttributes(l,m.href,m.newWindow),p&&m.dataId&&this.setupStorage(l,m.dataId,h,p)}static render(l){const h=l.annotationStorage,p=l.linkService,d=l.xfaHtml,f=l.intent||"display",m=document.createElement(d.name);d.attributes&&this.setAttributes({html:m,element:d,intent:f,linkService:p});const y=[[d,-1,m]],b=l.div;if(b.append(m),l.viewport){const _=`matrix(${l.viewport.transform.join(",")})`;b.style.transform=_}f!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const A=[];for(;y.length>0;){const[_,T,w]=y.at(-1);if(T+1===_.children.length){y.pop();continue}const N=_.children[++y.at(-1)[1]];if(N===null)continue;const{name:O}=N;if(O==="#text"){const E=document.createTextNode(N.value);A.push(E),w.append(E);continue}let P;if(N?.attributes?.xmlns?P=document.createElementNS(N.attributes.xmlns,O):P=document.createElement(O),w.append(P),N.attributes&&this.setAttributes({html:P,element:N,storage:h,intent:f,linkService:p}),N.children&&N.children.length>0)y.push([N,-1,P]);else if(N.value){const E=document.createTextNode(N.value);i.XfaText.shouldBuildText(O)&&A.push(E),P.append(E)}}for(const _ of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:A}}static update(l){const h=`matrix(${l.viewport.transform.join(",")})`;l.div.style.transform=h,l.div.hidden=!1}}t.XfaLayer=a}),((u,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=n(6),a=n(1),o=n(10);let l=class{constructor(){(0,a.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=l;{let _=function(E){let C=[];const L=[];for(const X of E){if(X.fn==="save"){C.push({fnId:92,fn:"group",items:[]}),L.push(C),C=C.at(-1).items;continue}X.fn==="restore"?C=L.pop():C.push(X)}return C},T=function(E){if(Number.isInteger(E))return E.toString();const C=E.toFixed(10);let L=C.length-1;if(C[L]!=="0")return C;do L--;while(C[L]==="0");return C.substring(0,C[L]==="."?L:L+1)},w=function(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":`scale(${T(E[0])} ${T(E[3])})`;if(E[0]===E[3]&&E[1]===-E[2]){const C=Math.acos(E[0])*180/Math.PI;return`rotate(${T(C)})`}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return`translate(${T(E[4])} ${T(E[5])})`;return`matrix(${T(E[0])} ${T(E[1])} ${T(E[2])} ${T(E[3])} ${T(E[4])} ${T(E[5])})`};const h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",f=["butt","round","square"],m=["miter","round","bevel"],y=function(E,C="",L=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!L)return URL.createObjectURL(new Blob([E],{type:C}));const X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let q=`data:${C};base64,`;for(let Q=0,K=E.length;Q<K;Q+=3){const tt=E[Q]&255,gt=E[Q+1]&255,ct=E[Q+2]&255,J=tt>>2,I=(tt&3)<<4|gt>>4,V=Q+1<K?(gt&15)<<2|ct>>6:64,j=Q+2<K?ct&63:64;q+=X[J]+X[I]+X[V]+X[j]}return q},b=(function(){const E=new Uint8Array([137,80,78,71,13,10,26,10]),C=12,L=new Int32Array(256);for(let ct=0;ct<256;ct++){let J=ct;for(let I=0;I<8;I++)J&1?J=3988292384^J>>1&2147483647:J=J>>1&2147483647;L[ct]=J}function X(ct,J,I){let V=-1;for(let j=J;j<I;j++){const M=(V^ct[j])&255,S=L[M];V=V>>>8^S}return V^-1}function q(ct,J,I,V){let j=V;const M=J.length;I[j]=M>>24&255,I[j+1]=M>>16&255,I[j+2]=M>>8&255,I[j+3]=M&255,j+=4,I[j]=ct.charCodeAt(0)&255,I[j+1]=ct.charCodeAt(1)&255,I[j+2]=ct.charCodeAt(2)&255,I[j+3]=ct.charCodeAt(3)&255,j+=4,I.set(J,j),j+=J.length;const S=X(I,V+4,j);I[j]=S>>24&255,I[j+1]=S>>16&255,I[j+2]=S>>8&255,I[j+3]=S&255}function Q(ct,J,I){let V=1,j=0;for(let M=J;M<I;++M)V=(V+(ct[M]&255))%65521,j=(j+V)%65521;return j<<16|V}function K(ct){if(!o.isNodeJS)return tt(ct);try{let J;parseInt(process.versions.node)>=8?J=ct:J=Buffer.from(ct);const I=require$$5.deflateSync(J,{level:9});return I instanceof Uint8Array?I:new Uint8Array(I)}catch(J){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+J)}return tt(ct)}function tt(ct){let J=ct.length;const I=65535,V=Math.ceil(J/I),j=new Uint8Array(2+J+V*5+4);let M=0;j[M++]=120,j[M++]=156;let S=0;for(;J>I;)j[M++]=0,j[M++]=255,j[M++]=255,j[M++]=0,j[M++]=0,j.set(ct.subarray(S,S+I),M),M+=I,S+=I,J-=I;j[M++]=1,j[M++]=J&255,j[M++]=J>>8&255,j[M++]=~J&65535&255,j[M++]=(~J&65535)>>8&255,j.set(ct.subarray(S),M),M+=ct.length-S;const k=Q(ct,0,ct.length);return j[M++]=k>>24&255,j[M++]=k>>16&255,j[M++]=k>>8&255,j[M++]=k&255,j}function gt(ct,J,I,V){const j=ct.width,M=ct.height;let S,k,H;const U=ct.data;switch(J){case a.ImageKind.GRAYSCALE_1BPP:k=0,S=1,H=j+7>>3;break;case a.ImageKind.RGB_24BPP:k=2,S=8,H=j*3;break;case a.ImageKind.RGBA_32BPP:k=6,S=8,H=j*4;break;default:throw new Error("invalid format")}const x=new Uint8Array((1+H)*M);let R=0,F=0;for(let st=0;st<M;++st)x[R++]=0,x.set(U.subarray(F,F+H),R),F+=H,R+=H;if(J===a.ImageKind.GRAYSCALE_1BPP&&V){R=0;for(let st=0;st<M;st++){R++;for(let ot=0;ot<H;ot++)x[R++]^=255}}const G=new Uint8Array([j>>24&255,j>>16&255,j>>8&255,j&255,M>>24&255,M>>16&255,M>>8&255,M&255,S,k,0,0,0]),z=K(x),Y=E.length+C*3+G.length+z.length,$=new Uint8Array(Y);let at=0;return $.set(E,at),at+=E.length,q("IHDR",G,$,at),at+=C+G.length,q("IDATA",z,$,at),at+=C+z.length,q("IEND",new Uint8Array(0),$,at),y($,"image/png",I)}return function(J,I,V){const j=J.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:J.kind;return gt(J,j,I,V)}})();class A{constructor(){this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(C,L){this.x=C,this.y=L}}let N=0,O=0,P=0;t.SVGGraphics=l=class{constructor(E,C,L=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new A,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=E,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!L,this._operatorIdMapping=[];for(const X in a.OPS)this._operatorIdMapping[a.OPS[X]]=X}getObject(E,C=null){return typeof E=="string"?E.startsWith("g_")?this.commonObjs.get(E):this.objs.get(E):C}save(){this.transformStack.push(this.transformMatrix);const E=this.current;this.extraStack.push(E),this.current=E.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(E){this.save(),this.executeOpTree(E),this.restore()}loadDependencies(E){const C=E.fnArray,L=E.argsArray;for(let X=0,q=C.length;X<q;X++)if(C[X]===a.OPS.dependency)for(const Q of L[X]){const K=Q.startsWith("g_")?this.commonObjs:this.objs,tt=new Promise(gt=>{K.get(Q,gt)});this.current.dependencies.push(tt)}return Promise.all(this.current.dependencies)}transform(E,C,L,X,q,Q){const K=[E,C,L,X,q,Q];this.transformMatrix=a.Util.transform(this.transformMatrix,K),this.tgrp=null}getSVG(E,C){this.viewport=C;const L=this._initialize(C);return this.loadDependencies(E).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(E)),L))}convertOpList(E){const C=this._operatorIdMapping,L=E.argsArray,X=E.fnArray,q=[];for(let Q=0,K=X.length;Q<K;Q++){const tt=X[Q];q.push({fnId:tt,fn:C[tt],args:L[Q]})}return _(q)}executeOpTree(E){for(const C of E){const L=C.fn,X=C.fnId,q=C.args;switch(X|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(q);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(q[0],q[1]);break;case a.OPS.setFont:this.setFont(q);break;case a.OPS.showText:this.showText(q[0]);break;case a.OPS.showSpacedText:this.showText(q[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(q[0],q[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(q[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(q[0]);break;case a.OPS.setHScale:this.setHScale(q[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(q[0],q[1],q[2],q[3],q[4],q[5]);break;case a.OPS.setTextRise:this.setTextRise(q[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(q[0]);break;case a.OPS.setLineWidth:this.setLineWidth(q[0]);break;case a.OPS.setLineJoin:this.setLineJoin(q[0]);break;case a.OPS.setLineCap:this.setLineCap(q[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(q[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(q[0],q[1],q[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(q[0],q[1],q[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(q);break;case a.OPS.setFillColorN:this.setFillColorN(q);break;case a.OPS.shadingFill:this.shadingFill(q[0]);break;case a.OPS.setDash:this.setDash(q[0],q[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(q[0]);break;case a.OPS.setFlatness:this.setFlatness(q[0]);break;case a.OPS.setGState:this.setGState(q[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(q[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(q[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(q[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(q[0],q[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(q[0],q[1],q[2],q[3],q[4],q[5]);break;case a.OPS.constructPath:this.constructPath(q[0],q[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,a.warn)(`Unimplemented operator ${L}`);break}}}setWordSpacing(E){this.current.wordSpacing=E}setCharSpacing(E){this.current.charSpacing=E}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(E,C,L,X,q,Q){const K=this.current;K.textMatrix=K.lineMatrix=[E,C,L,X,q,Q],K.textMatrixScale=Math.hypot(E,C),K.x=K.lineX=0,K.y=K.lineY=0,K.xcoords=[],K.ycoords=[],K.tspan=this.svgFactory.createElement("svg:tspan"),K.tspan.setAttributeNS(null,"font-family",K.fontFamily),K.tspan.setAttributeNS(null,"font-size",`${T(K.fontSize)}px`),K.tspan.setAttributeNS(null,"y",T(-K.y)),K.txtElement=this.svgFactory.createElement("svg:text"),K.txtElement.append(K.tspan)}beginText(){const E=this.current;E.x=E.lineX=0,E.y=E.lineY=0,E.textMatrix=a.IDENTITY_MATRIX,E.lineMatrix=a.IDENTITY_MATRIX,E.textMatrixScale=1,E.tspan=this.svgFactory.createElement("svg:tspan"),E.txtElement=this.svgFactory.createElement("svg:text"),E.txtgrp=this.svgFactory.createElement("svg:g"),E.xcoords=[],E.ycoords=[]}moveText(E,C){const L=this.current;L.x=L.lineX+=E,L.y=L.lineY+=C,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${T(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",T(-L.y))}showText(E){const C=this.current,L=C.font,X=C.fontSize;if(X===0)return;const q=C.fontSizeScale,Q=C.charSpacing,K=C.wordSpacing,tt=C.fontDirection,gt=C.textHScale*tt,ct=L.vertical,J=ct?1:-1,I=L.defaultVMetrics,V=X*C.fontMatrix[0];let j=0;for(const k of E){if(k===null){j+=tt*K;continue}else if(typeof k=="number"){j+=J*k*X/1e3;continue}const H=(k.isSpace?K:0)+Q,U=k.fontChar;let x,R,F=k.width;if(ct){let z;const Y=k.vmetric||I;z=k.vmetric?Y[1]:F*.5,z=-z*V;const $=Y[2]*V;F=Y?-Y[0]:F,x=z/q,R=(j+$)/q}else x=j/q,R=0;(k.isInFont||L.missingFile)&&(C.xcoords.push(C.x+x),ct&&C.ycoords.push(-C.y+R),C.tspan.textContent+=U);let G;ct?G=F*V-H*tt:G=F*V+H*tt,j+=G}C.tspan.setAttributeNS(null,"x",C.xcoords.map(T).join(" ")),ct?C.tspan.setAttributeNS(null,"y",C.ycoords.map(T).join(" ")):C.tspan.setAttributeNS(null,"y",T(-C.y)),ct?C.y-=j:C.x+=j*gt,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${T(C.fontSize)}px`),C.fontStyle!==h.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==h.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const M=C.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(M===a.TextRenderingMode.FILL||M===a.TextRenderingMode.FILL_STROKE?(C.fillColor!==h.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),M===a.TextRenderingMode.STROKE||M===a.TextRenderingMode.FILL_STROKE){const k=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,k)}let S=C.textMatrix;C.textRise!==0&&(S=S.slice(),S[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${w(S)} scale(${T(gt)}, -1)`),C.txtElement.setAttributeNS(p,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(E,C){this.setLeading(-C),this.moveText(E,C)}addFontStyle(E){if(!E.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=y(E.data,E.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${E.loadedName}"; src: url(${C}); }
`}setFont(E){const C=this.current,L=this.commonObjs.get(E[0]);let X=E[1];C.font=L,this.embedFonts&&!L.missingFile&&!this.embeddedFonts[L.loadedName]&&(this.addFontStyle(L),this.embeddedFonts[L.loadedName]=L),C.fontMatrix=L.fontMatrix||a.FONT_IDENTITY_MATRIX;let q="normal";L.black?q="900":L.bold&&(q="bold");const Q=L.italic?"italic":"normal";X<0?(X=-X,C.fontDirection=-1):C.fontDirection=1,C.fontSize=X,C.fontFamily=L.loadedName,C.fontWeight=q,C.fontStyle=Q,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",T(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){const E=this.current;E.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&E.txtElement?.hasChildNodes()&&(E.element=E.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(E){E>0&&(this.current.lineWidth=E)}setLineCap(E){this.current.lineCap=f[E]}setLineJoin(E){this.current.lineJoin=m[E]}setMiterLimit(E){this.current.miterLimit=E}setStrokeAlpha(E){this.current.strokeAlpha=E}setStrokeRGBColor(E,C,L){this.current.strokeColor=a.Util.makeHexColor(E,C,L)}setFillAlpha(E){this.current.fillAlpha=E}setFillRGBColor(E,C,L){this.current.fillColor=a.Util.makeHexColor(E,C,L),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(E){this.current.strokeColor=this._makeColorN_Pattern(E)}setFillColorN(E){this.current.fillColor=this._makeColorN_Pattern(E)}shadingFill(E){const C=this.viewport.width,L=this.viewport.height,X=a.Util.inverseTransform(this.transformMatrix),q=a.Util.applyTransform([0,0],X),Q=a.Util.applyTransform([0,L],X),K=a.Util.applyTransform([C,0],X),tt=a.Util.applyTransform([C,L],X),gt=Math.min(q[0],Q[0],K[0],tt[0]),ct=Math.min(q[1],Q[1],K[1],tt[1]),J=Math.max(q[0],Q[0],K[0],tt[0]),I=Math.max(q[1],Q[1],K[1],tt[1]),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",gt),V.setAttributeNS(null,"y",ct),V.setAttributeNS(null,"width",J-gt),V.setAttributeNS(null,"height",I-ct),V.setAttributeNS(null,"fill",this._makeShadingPattern(E)),this.current.fillAlpha<1&&V.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(V)}_makeColorN_Pattern(E){return E[0]==="TilingPattern"?this._makeTilingPattern(E):this._makeShadingPattern(E)}_makeTilingPattern(E){const C=E[1],L=E[2],X=E[3]||a.IDENTITY_MATRIX,[q,Q,K,tt]=E[4],gt=E[5],ct=E[6],J=E[7],I=`shading${P++}`,[V,j,M,S]=a.Util.normalizeRect([...a.Util.applyTransform([q,Q],X),...a.Util.applyTransform([K,tt],X)]),[k,H]=a.Util.singularValueDecompose2dScale(X),U=gt*k,x=ct*H,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",I),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",U),R.setAttributeNS(null,"height",x),R.setAttributeNS(null,"x",`${V}`),R.setAttributeNS(null,"y",`${j}`);const F=this.svg,G=this.transformMatrix,z=this.current.fillColor,Y=this.current.strokeColor,$=this.svgFactory.create(M-V,S-j);if(this.svg=$,this.transformMatrix=X,J===2){const at=a.Util.makeHexColor(...C);this.current.fillColor=at,this.current.strokeColor=at}return this.executeOpTree(this.convertOpList(L)),this.svg=F,this.transformMatrix=G,this.current.fillColor=z,this.current.strokeColor=Y,R.append($.childNodes[0]),this.defs.append(R),`url(#${I})`}_makeShadingPattern(E){switch(typeof E=="string"&&(E=this.objs.get(E)),E[0]){case"RadialAxial":const C=`shading${P++}`,L=E[3];let X;switch(E[1]){case"axial":const q=E[4],Q=E[5];X=this.svgFactory.createElement("svg:linearGradient"),X.setAttributeNS(null,"id",C),X.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),X.setAttributeNS(null,"x1",q[0]),X.setAttributeNS(null,"y1",q[1]),X.setAttributeNS(null,"x2",Q[0]),X.setAttributeNS(null,"y2",Q[1]);break;case"radial":const K=E[4],tt=E[5],gt=E[6],ct=E[7];X=this.svgFactory.createElement("svg:radialGradient"),X.setAttributeNS(null,"id",C),X.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),X.setAttributeNS(null,"cx",tt[0]),X.setAttributeNS(null,"cy",tt[1]),X.setAttributeNS(null,"r",ct),X.setAttributeNS(null,"fx",K[0]),X.setAttributeNS(null,"fy",K[1]),X.setAttributeNS(null,"fr",gt);break;default:throw new Error(`Unknown RadialAxial type: ${E[1]}`)}for(const q of L){const Q=this.svgFactory.createElement("svg:stop");Q.setAttributeNS(null,"offset",q[0]),Q.setAttributeNS(null,"stop-color",q[1]),X.append(Q)}return this.defs.append(X),`url(#${C})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${E[0]}`)}}setDash(E,C){this.current.dashArray=E,this.current.dashPhase=C}constructPath(E,C){const L=this.current;let X=L.x,q=L.y,Q=[],K=0;for(const tt of E)switch(tt|0){case a.OPS.rectangle:X=C[K++],q=C[K++];const gt=C[K++],ct=C[K++],J=X+gt,I=q+ct;Q.push("M",T(X),T(q),"L",T(J),T(q),"L",T(J),T(I),"L",T(X),T(I),"Z");break;case a.OPS.moveTo:X=C[K++],q=C[K++],Q.push("M",T(X),T(q));break;case a.OPS.lineTo:X=C[K++],q=C[K++],Q.push("L",T(X),T(q));break;case a.OPS.curveTo:X=C[K+4],q=C[K+5],Q.push("C",T(C[K]),T(C[K+1]),T(C[K+2]),T(C[K+3]),T(X),T(q)),K+=6;break;case a.OPS.curveTo2:Q.push("C",T(X),T(q),T(C[K]),T(C[K+1]),T(C[K+2]),T(C[K+3])),X=C[K+2],q=C[K+3],K+=4;break;case a.OPS.curveTo3:X=C[K+2],q=C[K+3],Q.push("C",T(C[K]),T(C[K+1]),T(X),T(q),T(X),T(q)),K+=4;break;case a.OPS.closePath:Q.push("Z");break}Q=Q.join(" "),L.path&&E.length>0&&E[0]!==a.OPS.rectangle&&E[0]!==a.OPS.moveTo?Q=L.path.getAttributeNS(null,"d")+Q:(L.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(L.path)),L.path.setAttributeNS(null,"d",Q),L.path.setAttributeNS(null,"fill","none"),L.element=L.path,L.setCurrentPoint(X,q)}endPath(){const E=this.current;if(E.path=null,!this.pendingClip)return;if(!E.element){this.pendingClip=null;return}const C=`clippath${N++}`,L=this.svgFactory.createElement("svg:clipPath");L.setAttributeNS(null,"id",C),L.setAttributeNS(null,"transform",w(this.transformMatrix));const X=E.element.cloneNode(!0);if(this.pendingClip==="evenodd"?X.setAttributeNS(null,"clip-rule","evenodd"):X.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,L.append(X),this.defs.append(L),E.activeClipUrl){E.clipGroup=null;for(const q of this.extraStack)q.clipGroup=null;L.setAttributeNS(null,"clip-path",E.activeClipUrl)}E.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(E){this.pendingClip=E}closePath(){const E=this.current;if(E.path){const C=`${E.path.getAttributeNS(null,"d")}Z`;E.path.setAttributeNS(null,"d",C)}}setLeading(E){this.current.leading=-E}setTextRise(E){this.current.textRise=E}setTextRenderingMode(E){this.current.textRenderingMode=E}setHScale(E){this.current.textHScale=E/100}setRenderingIntent(E){}setFlatness(E){}setGState(E){for(const[C,L]of E)switch(C){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L);break;case"CA":this.setStrokeAlpha(L);break;case"ca":this.setFillAlpha(L);break;default:(0,a.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const E=this.current;E.element&&(E.element.setAttributeNS(null,"fill",E.fillColor),E.element.setAttributeNS(null,"fill-opacity",E.fillAlpha),this.endPath())}stroke(){const E=this.current;E.element&&(this._setStrokeAttributes(E.element),E.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(E,C=1){const L=this.current;let X=L.dashArray;C!==1&&X.length>0&&(X=X.map(function(q){return C*q})),E.setAttributeNS(null,"stroke",L.strokeColor),E.setAttributeNS(null,"stroke-opacity",L.strokeAlpha),E.setAttributeNS(null,"stroke-miterlimit",T(L.miterLimit)),E.setAttributeNS(null,"stroke-linecap",L.lineCap),E.setAttributeNS(null,"stroke-linejoin",L.lineJoin),E.setAttributeNS(null,"stroke-width",T(C*L.lineWidth)+"px"),E.setAttributeNS(null,"stroke-dasharray",X.map(T).join(" ")),E.setAttributeNS(null,"stroke-dashoffset",T(C*L.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width","1px"),E.setAttributeNS(null,"height","1px"),E.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(E)}paintImageXObject(E){const C=this.getObject(E);if(!C){(0,a.warn)(`Dependent image with object ID ${E} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(E,C){const L=E.width,X=E.height,q=b(E,this.forceDataSchema,!!C),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",T(L)),Q.setAttributeNS(null,"height",T(X)),this.current.element=Q,this.clip("nonzero");const K=this.svgFactory.createElement("svg:image");K.setAttributeNS(d,"xlink:href",q),K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y",T(-X)),K.setAttributeNS(null,"width",T(L)+"px"),K.setAttributeNS(null,"height",T(X)+"px"),K.setAttributeNS(null,"transform",`scale(${T(1/L)} ${T(-1/X)})`),C?C.append(K):this._ensureTransformGroup().append(K)}paintImageMaskXObject(E){const C=this.getObject(E.data,E);if(C.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const L=this.current,X=C.width,q=C.height,Q=L.fillColor;L.maskId=`mask${O++}`;const K=this.svgFactory.createElement("svg:mask");K.setAttributeNS(null,"id",L.maskId);const tt=this.svgFactory.createElement("svg:rect");tt.setAttributeNS(null,"x","0"),tt.setAttributeNS(null,"y","0"),tt.setAttributeNS(null,"width",T(X)),tt.setAttributeNS(null,"height",T(q)),tt.setAttributeNS(null,"fill",Q),tt.setAttributeNS(null,"mask",`url(#${L.maskId})`),this.defs.append(K),this._ensureTransformGroup().append(tt),this.paintInlineImageXObject(C,K)}paintFormXObjectBegin(E,C){if(Array.isArray(E)&&E.length===6&&this.transform(E[0],E[1],E[2],E[3],E[4],E[5]),C){const L=C[2]-C[0],X=C[3]-C[1],q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",C[0]),q.setAttributeNS(null,"y",C[1]),q.setAttributeNS(null,"width",T(L)),q.setAttributeNS(null,"height",T(X)),this.current.element=q,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(E){const C=this.svgFactory.create(E.width,E.height),L=this.svgFactory.createElement("svg:defs");C.append(L),this.defs=L;const X=this.svgFactory.createElement("svg:g");return X.setAttributeNS(null,"transform",w(E.transform)),C.append(X),this.svg=X,C}_ensureClipGroup(){if(!this.current.clipGroup){const E=this.svgFactory.createElement("svg:g");E.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(E),this.current.clipGroup=E}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",w(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}})],__webpack_module_cache__={};function __w_pdfjs_require__(u){var t=__webpack_module_cache__[u];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[u]={exports:{}};return __webpack_modules__[u](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var u=__webpack_exports__;Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(u,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(u,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(u,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(u,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return l.AnnotationEditorUIManager}}),Object.defineProperty(u,"AnnotationLayer",{enumerable:!0,get:function(){return h.AnnotationLayer}}),Object.defineProperty(u,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(u,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(u,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(u,"GlobalWorkerOptions",{enumerable:!0,get:function(){return p.GlobalWorkerOptions}}),Object.defineProperty(u,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(u,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(u,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(u,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(u,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(u,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(u,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(u,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(u,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(u,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(u,"SVGGraphics",{enumerable:!0,get:function(){return d.SVGGraphics}}),Object.defineProperty(u,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(u,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(u,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(u,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(u,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(u,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(u,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(u,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(u,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(u,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(u,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(u,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(u,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(u,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(u,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(u,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(u,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(u,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(u,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(u,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),o=__w_pdfjs_require__(27),l=__w_pdfjs_require__(5),h=__w_pdfjs_require__(32),p=__w_pdfjs_require__(14),d=__w_pdfjs_require__(35),f=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";const PdfReader=()=>{const{language:u}=useLanguage(),[t,n]=reactExports.useState(null),[i,a]=reactExports.useState(1),[o,l]=reactExports.useState(0),[h,p]=reactExports.useState(!1),[d,f]=reactExports.useState(null),[m,y]=reactExports.useState(1),[b,A]=reactExports.useState(1),_=reactExports.useRef(null),T=reactExports.useRef(null),w=reactExports.useRef(null),N=reactExports.useRef(null),O=async tt=>{try{p(!0),f(null);const gt=await tt.arrayBuffer(),ct=await pdfExports.getDocument({data:gt,cMapUrl:"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/cmaps/",cMapPacked:!0}).promise;n(ct),l(ct.numPages),a(1),y(1)}catch(gt){console.error("PDF loading error:",gt),f(languageData[u]["pdf-error"]||"Failed to load PDF")}finally{p(!1)}},P=reactExports.useCallback(async()=>{if(!(!t||!_.current||!T.current)){w.current&&w.current.cancel();try{const tt=await t.getPage(i),gt=tt.getViewport({scale:1}),ct=T.current,J=40,I=ct.clientWidth-J,V=ct.clientHeight-J,j=Math.min(I/gt.width,V/gt.height,1);A(j);const M=j*m,S=tt.getViewport({scale:M}),k=_.current;k.height=S.height,k.width=S.width;const H={canvasContext:k.getContext("2d"),viewport:S};w.current=tt.render(H),await w.current.promise,w.current=null}catch(tt){tt.name!=="RenderingCancelledException"&&(console.error("Render error:",tt),f(languageData[u]["pdf-render-error"]||"Failed to render page"))}}},[t,i,m,u]);reactExports.useEffect(()=>{P()},[P]),reactExports.useEffect(()=>{const tt=()=>{t&&P()};return window.addEventListener("resize",tt),()=>window.removeEventListener("resize",tt)},[t,P]);const E=tt=>{const gt=tt.target.files[0];if(gt){if(gt.type!=="application/pdf"){f(languageData[u]["pdf-invalid-type"]||"Please select a PDF file");return}O(gt)}},C=()=>N.current.click(),L=()=>i>1&&a(tt=>tt-1),X=()=>i<o&&a(tt=>tt+1),q=()=>y(tt=>Math.min(tt+.25,3)),Q=()=>y(tt=>Math.max(tt-.25,.5)),K=()=>y(1);return reactExports.useEffect(()=>()=>{t&&t.destroy(),w.current&&w.current.cancel()},[t]),jsxRuntimeExports.jsxs("div",{className:"calculator-container",children:[jsxRuntimeExports.jsx("div",{className:"calculator-display",children:jsxRuntimeExports.jsx("h3",{className:"pdf-title",children:languageData[u]["pdf-title"]||"PDF Viewer"})}),jsxRuntimeExports.jsxs("div",{className:"pdf-content",children:[jsxRuntimeExports.jsx("button",{onClick:C,className:"calc-btn calc-btn-number",disabled:h,children:languageData[u]["pdf-upload-label"]||"Select PDF"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"application/pdf",onChange:E,ref:N,className:"pdf-file-input",disabled:h}),d&&jsxRuntimeExports.jsx("div",{className:"calc-error",children:d}),h&&jsxRuntimeExports.jsx("div",{className:"pdf-loading",children:"Loading..."}),jsxRuntimeExports.jsxs("div",{className:"pdf-viewer-container",ref:T,children:[jsxRuntimeExports.jsxs("div",{className:"pdf-controls",children:[jsxRuntimeExports.jsx("button",{onClick:Q,disabled:!t||h,className:"calc-btn calc-btn-number",children:languageData[u]["zoom-out"]||"Zoom Out"}),jsxRuntimeExports.jsxs("button",{onClick:K,disabled:!t||h,className:"calc-btn calc-btn-operator",children:[languageData[u]["zoom-reset"]||"Reset"," (",(b*m).toFixed(1),"x)"]}),jsxRuntimeExports.jsx("button",{onClick:q,disabled:!t||h,className:"calc-btn calc-btn-number",children:languageData[u]["zoom-in"]||"Zoom In"}),jsxRuntimeExports.jsx("span",{className:"page-info",children:t?`${i} / ${o}`:languageData[u]["no-pdf"]||"No PDF loaded"})]}),jsxRuntimeExports.jsx("div",{className:"pdf-canvas-container",children:jsxRuntimeExports.jsx("canvas",{ref:_,className:"pdf-canvas"})}),jsxRuntimeExports.jsxs("div",{className:"pdf-nav-buttons",children:[jsxRuntimeExports.jsx("button",{onClick:L,disabled:!t||i<=1||h,className:"calc-btn calc-btn-function",children:languageData[u]["prev-page"]||"Previous"}),jsxRuntimeExports.jsx("button",{onClick:X,disabled:!t||i>=o||h,className:"calc-btn calc-btn-function",children:languageData[u]["next-page"]||"Next"})]})]})]})]})};function Calculator(){const[u,t]=reactExports.useState("0"),[n,i]=reactExports.useState(null),[a,o]=reactExports.useState(null),[l,h]=reactExports.useState(!1),p=()=>{t("0"),i(null),o(null),h(!1)},d=A=>{l?(t(String(A)),h(!1)):t(u==="0"?String(A):u+A)},f=()=>{if(l){t("0."),h(!1);return}u.includes(".")||t(u+".")},m=A=>{const _=parseFloat(u);if(n===null)i(_);else if(a){const T=n||0;let w;switch(a){case"+":w=T+_;break;case"-":w=T-_;break;case"*":w=T*_;break;case"/":w=T/_;break;default:w=_}i(w),t(String(w))}h(!0),o(A)},y=()=>{!a||n===null||(m(null),o(null))},b=()=>{u.length===1?t("0"):t(u.slice(0,-1))};return jsxRuntimeExports.jsxs("div",{className:"calculator-container",children:[jsxRuntimeExports.jsx("div",{className:"calculator-display",id:"calcDisplay",children:u}),jsxRuntimeExports.jsxs("div",{className:"calculator-buttons",children:[jsxRuntimeExports.jsx("button",{onClick:p,className:"calc-btn calc-btn-function calc-btn-clear",children:"AC"}),jsxRuntimeExports.jsx("button",{onClick:b,className:"calc-btn calc-btn-function",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>m("/"),className:"calc-btn calc-btn-operator",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>d(7),className:"calc-btn calc-btn-number",children:"7"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(8),className:"calc-btn calc-btn-number",children:"8"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(9),className:"calc-btn calc-btn-number",children:"9"}),jsxRuntimeExports.jsx("button",{onClick:()=>m("*"),className:"calc-btn calc-btn-operator",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>d(4),className:"calc-btn calc-btn-number",children:"4"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(5),className:"calc-btn calc-btn-number",children:"5"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(6),className:"calc-btn calc-btn-number",children:"6"}),jsxRuntimeExports.jsx("button",{onClick:()=>m("-"),className:"calc-btn calc-btn-operator",children:"-"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(1),className:"calc-btn calc-btn-number",children:"1"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(2),className:"calc-btn calc-btn-number",children:"2"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(3),className:"calc-btn calc-btn-number",children:"3"}),jsxRuntimeExports.jsx("button",{onClick:()=>m("+"),className:"calc-btn calc-btn-operator",children:"+"}),jsxRuntimeExports.jsx("button",{onClick:()=>d(0),className:"calc-btn calc-btn-number calc-btn-zero",children:"0"}),jsxRuntimeExports.jsx("button",{onClick:f,className:"calc-btn calc-btn-number",children:"."}),jsxRuntimeExports.jsx("button",{onClick:y,className:"calc-btn calc-btn-equals",children:"="})]})]})}function TextEditor({initialContent:u="",onContentChange:t}){const{t:n}=useLanguage(),i=reactExports.useRef(null),[a,o]=reactExports.useState(!1),[l,h]=reactExports.useState([]),[p,d]=reactExports.useState(-1),f=reactExports.useCallback(A=>{const _=[...l.slice(0,p+1),A];h(_),d(_.length-1),t&&t(A)},[l,p,t]),m=A=>{document.execCommand(A,!1,null),i.current.focus()},y=()=>{p>0&&(d(A=>A-1),i.current.innerHTML=l[p-1])},b=()=>{p<l.length-1&&(d(A=>A+1),i.current.innerHTML=l[p+1])};return reactExports.useEffect(()=>{u?(i.current.innerHTML=u,f(u)):!a&&i.current.innerHTML===""&&(i.current.innerHTML=n("text-editor-placeholder"))},[n,a,u,f]),jsxRuntimeExports.jsxs("div",{className:"calculator-container",children:[jsxRuntimeExports.jsx("div",{className:"calculator-display",children:jsxRuntimeExports.jsx("h3",{className:"text-editor-title",children:n("text-editor-title")})}),jsxRuntimeExports.jsxs("div",{className:"text-editor-content",children:[jsxRuntimeExports.jsxs("div",{className:"editor-toolbar",children:[jsxRuntimeExports.jsx("button",{onClick:()=>m("bold"),className:"calc-btn calc-btn-number","aria-label":n("format-bold"),title:n("format-bold"),children:jsxRuntimeExports.jsx(FaBold,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>m("italic"),className:"calc-btn calc-btn-number","aria-label":n("format-italic"),title:n("format-italic"),children:jsxRuntimeExports.jsx(FaItalic,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>m("underline"),className:"calc-btn calc-btn-number","aria-label":n("format-underline"),title:n("format-underline"),children:jsxRuntimeExports.jsx(FaUnderline,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>m("insertUnorderedList"),className:"calc-btn calc-btn-number","aria-label":n("format-list"),title:n("format-list"),children:jsxRuntimeExports.jsx(FaListUl,{})}),jsxRuntimeExports.jsx("button",{onClick:y,disabled:p<=0,className:"calc-btn calc-btn-function","aria-label":n("undo"),title:n("undo"),children:jsxRuntimeExports.jsx(FaUndo,{})}),jsxRuntimeExports.jsx("button",{onClick:b,disabled:p>=l.length-1,className:"calc-btn calc-btn-function","aria-label":n("redo"),title:n("redo"),children:jsxRuntimeExports.jsx(FaRedo,{})})]}),jsxRuntimeExports.jsx("div",{ref:i,contentEditable:!0,onFocus:()=>{o(!0),i.current.innerHTML===n("text-editor-placeholder")&&(i.current.innerHTML="")},onBlur:()=>{o(!1),i.current.innerHTML===""&&(i.current.innerHTML=n("text-editor-placeholder"))},onInput:A=>f(A.currentTarget.innerHTML),className:"calculator-display editor-area","aria-label":n("text-editor-aria-label"),placeholder:n("text-editor-placeholder")})]})]})}function ImageResizer(){const{t:u}=useLanguage(),[t,n]=reactExports.useState(null),[i,a]=reactExports.useState(""),[o,l]=reactExports.useState(""),[h,p]=reactExports.useState(null),[d,f]=reactExports.useState(""),[m,y]=reactExports.useState([]),b=reactExports.useRef(null),A=reactExports.useRef(null),_=O=>{const P=O.target.files[0];if(!P)return;if(!P.type.match("image.*")){f(u("alert-image-type"));return}const E=new FileReader;E.onload=C=>{const L=new Image;L.onload=()=>{n(L),a(L.width),l(L.height),p(null),f("")},L.src=C.target.result},E.readAsDataURL(P)},T=()=>{if(!t){f(u("alert-image-required"));return}const O=parseInt(i),P=parseInt(o);if(isNaN(O)||isNaN(P)||O<=0||P<=0){f(u("alert-invalid-dimensions"));return}const E=b.current;E.width=O,E.height=P,E.getContext("2d").drawImage(t,0,0,O,P);const L=E.toDataURL("image/png");p(L),y(X=>[...X,{original:`${t.width}${t.height}`,resized:`${O}${P}`,timestamp:new Date().toLocaleString()}].slice(-3)),f("")},w=()=>A.current.click(),N=()=>{const O=document.createElement("a");O.href=h,O.download="resized_image.png",document.body.appendChild(O),O.click(),document.body.removeChild(O)};return jsxRuntimeExports.jsxs("div",{className:"image-resizer-container",children:[jsxRuntimeExports.jsxs("div",{className:"image-resizer-display",children:[jsxRuntimeExports.jsx("h3",{className:"image-resizer-title",children:u("image-resizer-title")||"Image Resizer"}),jsxRuntimeExports.jsx("div",{className:"image-resizer-description",children:u("image-resizer-description")||"Resize images to specific dimensions while maintaining aspect ratio"})]}),jsxRuntimeExports.jsxs("div",{className:"image-resizer-buttons",children:[jsxRuntimeExports.jsxs("button",{onClick:w,className:"calc-btn calc-btn-number",children:[jsxRuntimeExports.jsx("i",{className:"fas fa-upload"})," ",u("image-upload-label")||"Select Image"]}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:_,ref:A,className:"image-file-input"}),d&&jsxRuntimeExports.jsx("div",{className:"calc-error",children:d}),jsxRuntimeExports.jsx("div",{className:"dimension-inputs",children:jsxRuntimeExports.jsxs("div",{className:"dimension-group",children:[jsxRuntimeExports.jsx("input",{type:"number",value:i,onChange:O=>a(O.target.value),placeholder:u("width-placeholder")||"Width (px)",className:"calc-input",min:"1"}),jsxRuntimeExports.jsx("span",{className:"dimension-separator",children:""}),jsxRuntimeExports.jsx("input",{type:"number",value:o,onChange:O=>l(O.target.value),placeholder:u("height-placeholder")||"Height (px)",className:"calc-input",min:"1"})]})}),jsxRuntimeExports.jsxs("button",{onClick:T,className:"calc-btn calc-btn-operator",disabled:!t,children:[jsxRuntimeExports.jsx("i",{className:"fas fa-expand"})," ",u("resize-btn")||"Resize Image"]}),jsxRuntimeExports.jsxs("div",{className:"canvas-container",children:[jsxRuntimeExports.jsx("canvas",{ref:b,className:"resized-canvas",style:{display:"none"}}),h&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:h,alt:"Resized",className:"resized-image"}),jsxRuntimeExports.jsxs("button",{onClick:N,className:"calc-btn calc-btn-equals",children:[jsxRuntimeExports.jsx("i",{className:"fas fa-download"})," ",u("download-btn")||"Download Image"]})]})]}),m.length>0&&jsxRuntimeExports.jsxs("div",{className:"conversion-history",children:[jsxRuntimeExports.jsx("h4",{children:u("conversion-history")||"Recent Conversions"}),jsxRuntimeExports.jsx("ul",{children:m.map((O,P)=>jsxRuntimeExports.jsxs("li",{children:[O.original,"  ",O.resized," (",O.timestamp,")"]},P))})]})]})]})}function TextTools(){const{t:u}=useLanguage(),[t,n]=reactExports.useState(""),[i,a]=reactExports.useState(0),[o,l]=reactExports.useState(0);reactExports.useEffect(()=>{const p=t.trim().split(/\s+/).filter(d=>d.length>0);a(p.length),l(t.length)},[t]);const h=p=>{switch(p){case"upper":n(t.toUpperCase());break;case"lower":n(t.toLowerCase());break;case"title":n(t.toLowerCase().split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "));break}};return jsxRuntimeExports.jsxs("div",{className:"calculator-container",children:[jsxRuntimeExports.jsx("div",{className:"calculator-display",children:jsxRuntimeExports.jsx("h3",{className:"text-tools-title",children:u("text-tools-title")})}),jsxRuntimeExports.jsxs("div",{className:"text-tools-content",children:[jsxRuntimeExports.jsx("textarea",{value:t,onChange:p=>n(p.target.value),placeholder:u("text-tools-placeholder"),className:"calculator-display tool-textarea",rows:"8",dir:"auto"}),jsxRuntimeExports.jsxs("div",{className:"text-counts",children:[jsxRuntimeExports.jsxs("span",{children:[u("word-count")," ",jsxRuntimeExports.jsx("strong",{children:i})]}),jsxRuntimeExports.jsxs("span",{children:[u("char-count")," ",jsxRuntimeExports.jsx("strong",{children:o})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-tools-buttons",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("upper"),className:"calc-btn calc-btn-number",children:"UPPERCASE"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("lower"),className:"calc-btn calc-btn-number",children:"lowercase"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("title"),className:"calc-btn calc-btn-number",children:"Title Case"})]})]})]})}function UnitConverter(){const{t:u}=useLanguage(),[t,n]=reactExports.useState(""),[i,a]=reactExports.useState(""),[o,l]=reactExports.useState(""),[h,p]=reactExports.useState(""),d=b=>{const A=b.target.value;n(A),a(A===""?"":(parseFloat(A)*9/5+32).toFixed(2))},f=b=>{const A=b.target.value;a(A),n(A===""?"":((parseFloat(A)-32)*5/9).toFixed(2))},m=b=>{const A=b.target.value;l(A),p(A===""?"":(parseFloat(A)*2.20462).toFixed(2))},y=b=>{const A=b.target.value;p(A),l(A===""?"":(parseFloat(A)/2.20462).toFixed(2))};return jsxRuntimeExports.jsxs("div",{className:"calculator-container",children:[jsxRuntimeExports.jsx("div",{className:"calculator-display",children:jsxRuntimeExports.jsx("h3",{className:"unit-converter-title",children:u("unit-converter-title")||"Unit Converter"})}),jsxRuntimeExports.jsxs("div",{className:"unit-converter-content",children:[jsxRuntimeExports.jsxs("div",{className:"converter-section",children:[jsxRuntimeExports.jsx("h4",{className:"converter-subtitle",children:u("temperature-converter")||"Temperature Converter"}),jsxRuntimeExports.jsxs("div",{className:"converter-row",children:[jsxRuntimeExports.jsxs("div",{className:"converter-input-group",children:[jsxRuntimeExports.jsx("input",{type:"number",value:t,onChange:d,placeholder:u("celsius-placeholder")||"Celsius",className:"calc-input"}),jsxRuntimeExports.jsx("span",{className:"unit-label",children:"C"})]}),jsxRuntimeExports.jsx("span",{className:"converter-equals",children:"="}),jsxRuntimeExports.jsxs("div",{className:"converter-input-group",children:[jsxRuntimeExports.jsx("input",{type:"number",value:i,onChange:f,placeholder:u("fahrenheit-placeholder")||"Fahrenheit",className:"calc-input"}),jsxRuntimeExports.jsx("span",{className:"unit-label",children:"F"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"converter-section",children:[jsxRuntimeExports.jsx("h4",{className:"converter-subtitle",children:u("weight-converter")||"Weight Converter"}),jsxRuntimeExports.jsxs("div",{className:"converter-row",children:[jsxRuntimeExports.jsxs("div",{className:"converter-input-group",children:[jsxRuntimeExports.jsx("input",{type:"number",value:o,onChange:m,placeholder:u("kg-placeholder")||"Kilograms",className:"calc-input"}),jsxRuntimeExports.jsx("span",{className:"unit-label",children:"kg"})]}),jsxRuntimeExports.jsx("span",{className:"converter-equals",children:"="}),jsxRuntimeExports.jsxs("div",{className:"converter-input-group",children:[jsxRuntimeExports.jsx("input",{type:"number",value:h,onChange:y,placeholder:u("pound-placeholder")||"Pounds",className:"calc-input"}),jsxRuntimeExports.jsx("span",{className:"unit-label",children:"lb"})]})]})]})]})]})}GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${version}/pdf.worker.min.js`;function Tools(){const{language:u}=useLanguage();return jsxRuntimeExports.jsxs("section",{id:"tools",className:"py-5",children:[jsxRuntimeExports.jsx("h2",{className:"text-center mb-5",children:languageData[u]["tools-title"]}),jsxRuntimeExports.jsxs(Row,{className:"align-items-start",children:[" ",jsxRuntimeExports.jsx(Col,{md:6,lg:4,className:"mb-4 d-flex",children:jsxRuntimeExports.jsxs("div",{className:"w-100",children:[" ",jsxRuntimeExports.jsx(Calculator,{language:u})]})}),jsxRuntimeExports.jsx(Col,{md:6,lg:4,className:"mb-4 d-flex",children:jsxRuntimeExports.jsx("div",{className:"w-100",children:jsxRuntimeExports.jsx(TextEditor,{language:u})})}),jsxRuntimeExports.jsx(Col,{md:6,lg:4,className:"mb-4 d-flex",children:jsxRuntimeExports.jsx("div",{className:"w-100",children:jsxRuntimeExports.jsx(TextTools,{language:u})})}),jsxRuntimeExports.jsx(Col,{md:6,lg:4,className:"mb-4 d-flex",children:jsxRuntimeExports.jsxs("div",{className:"w-100",style:{height:"fit-content"},children:[" ",jsxRuntimeExports.jsx(UnitConverter,{language:u})]})}),jsxRuntimeExports.jsx(Col,{md:6,lg:4,className:"mb-4 d-flex",children:jsxRuntimeExports.jsx("div",{className:"w-100",children:jsxRuntimeExports.jsx(PdfReader,{language:u})})}),jsxRuntimeExports.jsx(Col,{md:6,lg:4,className:"mb-4 d-flex",children:jsxRuntimeExports.jsx("div",{className:"w-100",children:jsxRuntimeExports.jsx(ImageResizer,{language:u})})})]})]})}function About(){const{t:u}=useLanguage();return jsxRuntimeExports.jsx("section",{id:"about",className:"about-section",children:jsxRuntimeExports.jsxs("div",{className:"about-container",children:[jsxRuntimeExports.jsx("h2",{className:"about-title",children:u("about-title")}),jsxRuntimeExports.jsx("p",{className:"about-content",children:u("about-content")})]})})}function Contact(){const{t:u}=useLanguage();return jsxRuntimeExports.jsx("section",{id:"contact",className:"contact-section",children:jsxRuntimeExports.jsxs("div",{className:"contact-container",children:[jsxRuntimeExports.jsx("h2",{className:"contact-title",children:u("contact-title")}),jsxRuntimeExports.jsxs("div",{className:"social-links",children:[jsxRuntimeExports.jsx("a",{href:"#",className:"social-link","aria-label":"Twitter",children:jsxRuntimeExports.jsx(FaTwitter,{})}),jsxRuntimeExports.jsx("a",{href:"#",className:"social-link","aria-label":"Instagram",children:jsxRuntimeExports.jsx(FaInstagram,{})}),jsxRuntimeExports.jsx("a",{href:"#",className:"social-link","aria-label":"YouTube",children:jsxRuntimeExports.jsx(FaYoutube,{})})]}),jsxRuntimeExports.jsxs("p",{className:"contact-email",children:[u("contact-email-prefix"),jsxRuntimeExports.jsx("a",{href:"mailto:contact@example.com",className:"email-link",children:"contact@example.com"}),u("contact-email-suffix")]})]})})}function LanguageProvider({children:u}){const[t,n]=reactExports.useState(()=>localStorage.getItem("language")||"en"),i={language:t,t:(a,o)=>{const l=languageData[t][a];return typeof l=="function"?l(o):l},changeLanguage:a=>{n(a),localStorage.setItem("language",a)}};return jsxRuntimeExports.jsx(LanguageContext.Provider,{value:i,children:u})}function useDarkMode(){const[u,t]=reactExports.useState(()=>{const n=localStorage.getItem("darkMode");return n?JSON.parse(n):!1});return reactExports.useEffect(()=>{localStorage.setItem("darkMode",u),document.body.classList.toggle("dark-mode",u)},[u]),[u,t]}function AppContent(){const[u,t]=useDarkMode();return jsxRuntimeExports.jsxs("div",{className:u?"dark-mode":"",children:[jsxRuntimeExports.jsx(Header,{darkMode:u,setDarkMode:t}),jsxRuntimeExports.jsx("main",{className:"pt-5 mt-5",children:jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsx(Tools,{}),jsxRuntimeExports.jsx(About,{}),jsxRuntimeExports.jsx(Contact,{})]})}),jsxRuntimeExports.jsx(Footer,{}),jsxRuntimeExports.jsx(BackToTop,{})]})}function App(){return jsxRuntimeExports.jsx(LanguageProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
